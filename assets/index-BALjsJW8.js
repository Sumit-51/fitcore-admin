function Rk(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in r)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(r,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Pk(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var If={exports:{}},gl={},Nf={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zy;function jk(){if(zy)return Ue;zy=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function k(U){return U===null||typeof U!="object"?null:(U=b&&U[b]||U["@@iterator"],typeof U=="function"?U:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,N={};function O(U,J,se){this.props=U,this.context=J,this.refs=N,this.updater=se||P}O.prototype.isReactComponent={},O.prototype.setState=function(U,J){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,J,"setState")},O.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function z(){}z.prototype=O.prototype;function $(U,J,se){this.props=U,this.context=J,this.refs=N,this.updater=se||P}var Q=$.prototype=new z;Q.constructor=$,L(Q,O.prototype),Q.isPureReactComponent=!0;var fe=Array.isArray,oe=Object.prototype.hasOwnProperty,Y={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(U,J,se){var pe,Ve={},Oe=null,Ie=null;if(J!=null)for(pe in J.ref!==void 0&&(Ie=J.ref),J.key!==void 0&&(Oe=""+J.key),J)oe.call(J,pe)&&!I.hasOwnProperty(pe)&&(Ve[pe]=J[pe]);var ze=arguments.length-2;if(ze===1)Ve.children=se;else if(1<ze){for(var Qe=Array(ze),kt=0;kt<ze;kt++)Qe[kt]=arguments[kt+2];Ve.children=Qe}if(U&&U.defaultProps)for(pe in ze=U.defaultProps,ze)Ve[pe]===void 0&&(Ve[pe]=ze[pe]);return{$$typeof:r,type:U,key:Oe,ref:Ie,props:Ve,_owner:Y.current}}function R(U,J){return{$$typeof:r,type:U.type,key:J,ref:U.ref,props:U.props,_owner:U._owner}}function C(U){return typeof U=="object"&&U!==null&&U.$$typeof===r}function S(U){var J={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(se){return J[se]})}var M=/\/+/g;function A(U,J){return typeof U=="object"&&U!==null&&U.key!=null?S(""+U.key):J.toString(36)}function ie(U,J,se,pe,Ve){var Oe=typeof U;(Oe==="undefined"||Oe==="boolean")&&(U=null);var Ie=!1;if(U===null)Ie=!0;else switch(Oe){case"string":case"number":Ie=!0;break;case"object":switch(U.$$typeof){case r:case e:Ie=!0}}if(Ie)return Ie=U,Ve=Ve(Ie),U=pe===""?"."+A(Ie,0):pe,fe(Ve)?(se="",U!=null&&(se=U.replace(M,"$&/")+"/"),ie(Ve,J,se,"",function(kt){return kt})):Ve!=null&&(C(Ve)&&(Ve=R(Ve,se+(!Ve.key||Ie&&Ie.key===Ve.key?"":(""+Ve.key).replace(M,"$&/")+"/")+U)),J.push(Ve)),1;if(Ie=0,pe=pe===""?".":pe+":",fe(U))for(var ze=0;ze<U.length;ze++){Oe=U[ze];var Qe=pe+A(Oe,ze);Ie+=ie(Oe,J,se,Qe,Ve)}else if(Qe=k(U),typeof Qe=="function")for(U=Qe.call(U),ze=0;!(Oe=U.next()).done;)Oe=Oe.value,Qe=pe+A(Oe,ze++),Ie+=ie(Oe,J,se,Qe,Ve);else if(Oe==="object")throw J=String(U),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Ie}function we(U,J,se){if(U==null)return U;var pe=[],Ve=0;return ie(U,pe,"","",function(Oe){return J.call(se,Oe,Ve++)}),pe}function Ce(U){if(U._status===-1){var J=U._result;J=J(),J.then(function(se){(U._status===0||U._status===-1)&&(U._status=1,U._result=se)},function(se){(U._status===0||U._status===-1)&&(U._status=2,U._result=se)}),U._status===-1&&(U._status=0,U._result=J)}if(U._status===1)return U._result.default;throw U._result}var Me={current:null},K={transition:null},de={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:K,ReactCurrentOwner:Y};function le(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:we,forEach:function(U,J,se){we(U,function(){J.apply(this,arguments)},se)},count:function(U){var J=0;return we(U,function(){J++}),J},toArray:function(U){return we(U,function(J){return J})||[]},only:function(U){if(!C(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ue.Component=O,Ue.Fragment=t,Ue.Profiler=a,Ue.PureComponent=$,Ue.StrictMode=s,Ue.Suspense=p,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,Ue.act=le,Ue.cloneElement=function(U,J,se){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var pe=L({},U.props),Ve=U.key,Oe=U.ref,Ie=U._owner;if(J!=null){if(J.ref!==void 0&&(Oe=J.ref,Ie=Y.current),J.key!==void 0&&(Ve=""+J.key),U.type&&U.type.defaultProps)var ze=U.type.defaultProps;for(Qe in J)oe.call(J,Qe)&&!I.hasOwnProperty(Qe)&&(pe[Qe]=J[Qe]===void 0&&ze!==void 0?ze[Qe]:J[Qe])}var Qe=arguments.length-2;if(Qe===1)pe.children=se;else if(1<Qe){ze=Array(Qe);for(var kt=0;kt<Qe;kt++)ze[kt]=arguments[kt+2];pe.children=ze}return{$$typeof:r,type:U.type,key:Ve,ref:Oe,props:pe,_owner:Ie}},Ue.createContext=function(U){return U={$$typeof:d,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:l,_context:U},U.Consumer=U},Ue.createElement=E,Ue.createFactory=function(U){var J=E.bind(null,U);return J.type=U,J},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(U){return{$$typeof:f,render:U}},Ue.isValidElement=C,Ue.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:Ce}},Ue.memo=function(U,J){return{$$typeof:g,type:U,compare:J===void 0?null:J}},Ue.startTransition=function(U){var J=K.transition;K.transition={};try{U()}finally{K.transition=J}},Ue.unstable_act=le,Ue.useCallback=function(U,J){return Me.current.useCallback(U,J)},Ue.useContext=function(U){return Me.current.useContext(U)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(U){return Me.current.useDeferredValue(U)},Ue.useEffect=function(U,J){return Me.current.useEffect(U,J)},Ue.useId=function(){return Me.current.useId()},Ue.useImperativeHandle=function(U,J,se){return Me.current.useImperativeHandle(U,J,se)},Ue.useInsertionEffect=function(U,J){return Me.current.useInsertionEffect(U,J)},Ue.useLayoutEffect=function(U,J){return Me.current.useLayoutEffect(U,J)},Ue.useMemo=function(U,J){return Me.current.useMemo(U,J)},Ue.useReducer=function(U,J,se){return Me.current.useReducer(U,J,se)},Ue.useRef=function(U){return Me.current.useRef(U)},Ue.useState=function(U){return Me.current.useState(U)},Ue.useSyncExternalStore=function(U,J,se){return Me.current.useSyncExternalStore(U,J,se)},Ue.useTransition=function(){return Me.current.useTransition()},Ue.version="18.3.1",Ue}var $y;function Tm(){return $y||($y=1,Nf.exports=jk()),Nf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var By;function Dk(){if(By)return gl;By=1;var r=Tm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(f,p,g){var v,b={},k=null,P=null;g!==void 0&&(k=""+g),p.key!==void 0&&(k=""+p.key),p.ref!==void 0&&(P=p.ref);for(v in p)s.call(p,v)&&!l.hasOwnProperty(v)&&(b[v]=p[v]);if(f&&f.defaultProps)for(v in p=f.defaultProps,p)b[v]===void 0&&(b[v]=p[v]);return{$$typeof:e,type:f,key:k,ref:P,props:b,_owner:a.current}}return gl.Fragment=t,gl.jsx=d,gl.jsxs=d,gl}var qy;function Lk(){return qy||(qy=1,If.exports=Dk()),If.exports}var c=Lk(),Iu={},Sf={exports:{}},dr={},Af={exports:{}},Cf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hy;function Mk(){return Hy||(Hy=1,(function(r){function e(K,de){var le=K.length;K.push(de);e:for(;0<le;){var U=le-1>>>1,J=K[U];if(0<a(J,de))K[U]=de,K[le]=J,le=U;else break e}}function t(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var de=K[0],le=K.pop();if(le!==de){K[0]=le;e:for(var U=0,J=K.length,se=J>>>1;U<se;){var pe=2*(U+1)-1,Ve=K[pe],Oe=pe+1,Ie=K[Oe];if(0>a(Ve,le))Oe<J&&0>a(Ie,Ve)?(K[U]=Ie,K[Oe]=le,U=Oe):(K[U]=Ve,K[pe]=le,U=pe);else if(Oe<J&&0>a(Ie,le))K[U]=Ie,K[Oe]=le,U=Oe;else break e}}return de}function a(K,de){var le=K.sortIndex-de.sortIndex;return le!==0?le:K.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var p=[],g=[],v=1,b=null,k=3,P=!1,L=!1,N=!1,O=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(K){for(var de=t(g);de!==null;){if(de.callback===null)s(g);else if(de.startTime<=K)s(g),de.sortIndex=de.expirationTime,e(p,de);else break;de=t(g)}}function fe(K){if(N=!1,Q(K),!L)if(t(p)!==null)L=!0,Ce(oe);else{var de=t(g);de!==null&&Me(fe,de.startTime-K)}}function oe(K,de){L=!1,N&&(N=!1,z(E),E=-1),P=!0;var le=k;try{for(Q(de),b=t(p);b!==null&&(!(b.expirationTime>de)||K&&!S());){var U=b.callback;if(typeof U=="function"){b.callback=null,k=b.priorityLevel;var J=U(b.expirationTime<=de);de=r.unstable_now(),typeof J=="function"?b.callback=J:b===t(p)&&s(p),Q(de)}else s(p);b=t(p)}if(b!==null)var se=!0;else{var pe=t(g);pe!==null&&Me(fe,pe.startTime-de),se=!1}return se}finally{b=null,k=le,P=!1}}var Y=!1,I=null,E=-1,R=5,C=-1;function S(){return!(r.unstable_now()-C<R)}function M(){if(I!==null){var K=r.unstable_now();C=K;var de=!0;try{de=I(!0,K)}finally{de?A():(Y=!1,I=null)}}else Y=!1}var A;if(typeof $=="function")A=function(){$(M)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,we=ie.port2;ie.port1.onmessage=M,A=function(){we.postMessage(null)}}else A=function(){O(M,0)};function Ce(K){I=K,Y||(Y=!0,A())}function Me(K,de){E=O(function(){K(r.unstable_now())},de)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_continueExecution=function(){L||P||(L=!0,Ce(oe))},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return k},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(K){switch(k){case 1:case 2:case 3:var de=3;break;default:de=k}var le=k;k=de;try{return K()}finally{k=le}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(K,de){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var le=k;k=K;try{return de()}finally{k=le}},r.unstable_scheduleCallback=function(K,de,le){var U=r.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?U+le:U):le=U,K){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=le+J,K={id:v++,callback:de,priorityLevel:K,startTime:le,expirationTime:J,sortIndex:-1},le>U?(K.sortIndex=le,e(g,K),t(p)===null&&K===t(g)&&(N?(z(E),E=-1):N=!0,Me(fe,le-U))):(K.sortIndex=J,e(p,K),L||P||(L=!0,Ce(oe))),K},r.unstable_shouldYield=S,r.unstable_wrapCallback=function(K){var de=k;return function(){var le=k;k=de;try{return K.apply(this,arguments)}finally{k=le}}}})(Cf)),Cf}var Wy;function Vk(){return Wy||(Wy=1,Af.exports=Mk()),Af.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gy;function Ok(){if(Gy)return dr;Gy=1;var r=Tm(),e=Vk();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,o=1;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(n,i){d(n,i),d(n+"Capture",i)}function d(n,i){for(a[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},b={};function k(n){return p.call(b,n)?!0:p.call(v,n)?!1:g.test(n)?b[n]=!0:(v[n]=!0,!1)}function P(n,i,o,h){if(o!==null&&o.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:o!==null?!o.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function L(n,i,o,h){if(i===null||typeof i>"u"||P(n,i,o,h))return!0;if(h)return!1;if(o!==null)switch(o.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function N(n,i,o,h,m,y,_){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=o,this.propertyName=n,this.type=i,this.sanitizeURL=y,this.removeEmptyString=_}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){O[n]=new N(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];O[i]=new N(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){O[n]=new N(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){O[n]=new N(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){O[n]=new N(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){O[n]=new N(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){O[n]=new N(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){O[n]=new N(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){O[n]=new N(n,5,!1,n.toLowerCase(),null,!1,!1)});var z=/[\-:]([a-z])/g;function $(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(z,$);O[i]=new N(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(z,$);O[i]=new N(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(z,$);O[i]=new N(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){O[n]=new N(n,1,!1,n.toLowerCase(),null,!1,!1)}),O.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){O[n]=new N(n,1,!1,n.toLowerCase(),null,!0,!0)});function Q(n,i,o,h){var m=O.hasOwnProperty(i)?O[i]:null;(m!==null?m.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(L(i,o,m,h)&&(o=null),h||m===null?k(i)&&(o===null?n.removeAttribute(i):n.setAttribute(i,""+o)):m.mustUseProperty?n[m.propertyName]=o===null?m.type===3?!1:"":o:(i=m.attributeName,h=m.attributeNamespace,o===null?n.removeAttribute(i):(m=m.type,o=m===3||m===4&&o===!0?"":""+o,h?n.setAttributeNS(h,i,o):n.setAttribute(i,o))))}var fe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oe=Symbol.for("react.element"),Y=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),S=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),we=Symbol.for("react.memo"),Ce=Symbol.for("react.lazy"),Me=Symbol.for("react.offscreen"),K=Symbol.iterator;function de(n){return n===null||typeof n!="object"?null:(n=K&&n[K]||n["@@iterator"],typeof n=="function"?n:null)}var le=Object.assign,U;function J(n){if(U===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);U=i&&i[1]||""}return`
`+U+n}var se=!1;function pe(n,i){if(!n||se)return"";se=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(W){var h=W}Reflect.construct(n,[],i)}else{try{i.call()}catch(W){h=W}n.call(i.prototype)}else{try{throw Error()}catch(W){h=W}n()}}catch(W){if(W&&h&&typeof W.stack=="string"){for(var m=W.stack.split(`
`),y=h.stack.split(`
`),_=m.length-1,j=y.length-1;1<=_&&0<=j&&m[_]!==y[j];)j--;for(;1<=_&&0<=j;_--,j--)if(m[_]!==y[j]){if(_!==1||j!==1)do if(_--,j--,0>j||m[_]!==y[j]){var V=`
`+m[_].replace(" at new "," at ");return n.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",n.displayName)),V}while(1<=_&&0<=j);break}}}finally{se=!1,Error.prepareStackTrace=o}return(n=n?n.displayName||n.name:"")?J(n):""}function Ve(n){switch(n.tag){case 5:return J(n.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return n=pe(n.type,!1),n;case 11:return n=pe(n.type.render,!1),n;case 1:return n=pe(n.type,!0),n;default:return""}}function Oe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case I:return"Fragment";case Y:return"Portal";case R:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case ie:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case S:return(n.displayName||"Context")+".Consumer";case C:return(n._context.displayName||"Context")+".Provider";case M:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case we:return i=n.displayName||null,i!==null?i:Oe(n.type)||"Memo";case Ce:i=n._payload,n=n._init;try{return Oe(n(i))}catch{}}return null}function Ie(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(i);case 8:return i===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ze(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Qe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function kt(n){var i=Qe(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),h=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,y=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return m.call(this)},set:function(_){h=""+_,y.call(this,_)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return h},setValue:function(_){h=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function en(n){n._valueTracker||(n._valueTracker=kt(n))}function tn(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),h="";return n&&(h=Qe(n)?n.checked?"true":"false":n.value),n=h,n!==o?(i.setValue(n),!0):!1}function ds(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ta(n,i){var o=i.checked;return le({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??n._wrapperState.initialChecked})}function dc(n,i){var o=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;o=ze(i.value!=null?i.value:o),n._wrapperState={initialChecked:h,initialValue:o,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ra(n,i){i=i.checked,i!=null&&Q(n,"checked",i,!1)}function hi(n,i){ra(n,i);var o=ze(i.value),h=i.type;if(o!=null)h==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+o):n.value!==""+o&&(n.value=""+o);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Et(n,i.type,o):i.hasOwnProperty("defaultValue")&&Et(n,i.type,ze(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function ko(n,i,o){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,o||i===n.value||(n.value=i),n.defaultValue=i}o=n.name,o!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,o!==""&&(n.name=o)}function Et(n,i,o){(i!=="number"||ds(n.ownerDocument)!==n)&&(o==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+o&&(n.defaultValue=""+o))}var xt=Array.isArray;function Fr(n,i,o,h){if(n=n.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=i.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&h&&(n[o].defaultSelected=!0)}else{for(o=""+ze(o),i=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,h&&(n[m].defaultSelected=!0);return}i!==null||n[m].disabled||(i=n[m])}i!==null&&(i.selected=!0)}}function Eo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function To(n,i){var o=i.value;if(o==null){if(o=i.children,i=i.defaultValue,o!=null){if(i!=null)throw Error(t(92));if(xt(o)){if(1<o.length)throw Error(t(93));o=o[0]}i=o}i==null&&(i=""),o=i}n._wrapperState={initialValue:ze(o)}}function hc(n,i){var o=ze(i.value),h=ze(i.defaultValue);o!=null&&(o=""+o,o!==n.value&&(n.value=o),i.defaultValue==null&&n.defaultValue!==o&&(n.defaultValue=o)),h!=null&&(n.defaultValue=""+h)}function hs(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Io(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function na(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Io(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var fs,fc=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,o,h,m){MSApp.execUnsafeLocalFunction(function(){return n(i,o,h,m)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(fs=fs||document.createElement("div"),fs.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=fs.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function fi(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mc=["Webkit","ms","Moz","O"];Object.keys(ms).forEach(function(n){mc.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),ms[i]=ms[n]})});function ps(n,i,o){return i==null||typeof i=="boolean"||i===""?"":o||typeof i!="number"||i===0||ms.hasOwnProperty(n)&&ms[n]?(""+i).trim():i+"px"}function sa(n,i){n=n.style;for(var o in i)if(i.hasOwnProperty(o)){var h=o.indexOf("--")===0,m=ps(o,i[o],h);o==="float"&&(o="cssFloat"),h?n.setProperty(o,m):n[o]=m}}var No=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ur(n,i){if(i){if(No[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function ia(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gs=null;function aa(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Pn=null,jn=null,gt=null;function So(n){if(n=tl(n)){if(typeof Pn!="function")throw Error(t(280));var i=n.stateNode;i&&(i=zc(i),Pn(n.stateNode,n.type,i))}}function ys(n){jn?gt?gt.push(n):gt=[n]:jn=n}function xs(){if(jn){var n=jn,i=gt;if(gt=jn=null,So(n),i)for(n=0;n<i.length;n++)So(i[n])}}function pc(n,i){return n(i)}function gc(){}var rn=!1;function yc(n,i,o){if(rn)return n(i,o);rn=!0;try{return pc(n,i,o)}finally{rn=!1,(jn!==null||gt!==null)&&(gc(),xs())}}function mi(n,i){var o=n.stateNode;if(o===null)return null;var h=zc(o);if(h===null)return null;o=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(t(231,i,typeof o));return o}var vs=!1;if(f)try{var ws={};Object.defineProperty(ws,"passive",{get:function(){vs=!0}}),window.addEventListener("test",ws,ws),window.removeEventListener("test",ws,ws)}catch{vs=!1}function xc(n,i,o,h,m,y,_,j,V){var W=Array.prototype.slice.call(arguments,3);try{i.apply(o,W)}catch(te){this.onError(te)}}var Dn=!1,nn=null,oa=!1,Tr=null,vc={onError:function(n){Dn=!0,nn=n}};function wc(n,i,o,h,m,y,_,j,V){Dn=!1,nn=null,xc.apply(vc,arguments)}function Ao(n,i,o,h,m,y,_,j,V){if(wc.apply(this,arguments),Dn){if(Dn){var W=nn;Dn=!1,nn=null}else throw Error(t(198));oa||(oa=!0,Tr=W)}}function zr(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function Co(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function _c(n){if(zr(n)!==n)throw Error(t(188))}function bc(n){var i=n.alternate;if(!i){if(i=zr(n),i===null)throw Error(t(188));return i!==n?null:n}for(var o=n,h=i;;){var m=o.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){o=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===o)return _c(m),n;if(y===h)return _c(m),i;y=y.sibling}throw Error(t(188))}if(o.return!==h.return)o=m,h=y;else{for(var _=!1,j=m.child;j;){if(j===o){_=!0,o=m,h=y;break}if(j===h){_=!0,h=m,o=y;break}j=j.sibling}if(!_){for(j=y.child;j;){if(j===o){_=!0,o=y,h=m;break}if(j===h){_=!0,h=y,o=m;break}j=j.sibling}if(!_)throw Error(t(189))}}if(o.alternate!==h)throw Error(t(190))}if(o.tag!==3)throw Error(t(188));return o.stateNode.current===o?n:i}function kc(n){return n=bc(n),n!==null?pi(n):null}function pi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=pi(n);if(i!==null)return i;n=n.sibling}return null}var Ro=e.unstable_scheduleCallback,la=e.unstable_cancelCallback,gi=e.unstable_shouldYield,Ln=e.unstable_requestPaint,ot=e.unstable_now,rh=e.unstable_getCurrentPriorityLevel,ca=e.unstable_ImmediatePriority,Po=e.unstable_UserBlockingPriority,yi=e.unstable_NormalPriority,jo=e.unstable_LowPriority,ua=e.unstable_IdlePriority,xi=null,fr=null;function Ec(n){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(xi,n,void 0,(n.current.flags&128)===128)}catch{}}var mr=Math.clz32?Math.clz32:vi,sn=Math.log,Ir=Math.LN2;function vi(n){return n>>>=0,n===0?32:31-(sn(n)/Ir|0)|0}var an=64,_s=4194304;function Je(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Mn(n,i){var o=n.pendingLanes;if(o===0)return 0;var h=0,m=n.suspendedLanes,y=n.pingedLanes,_=o&268435455;if(_!==0){var j=_&~m;j!==0?h=Je(j):(y&=_,y!==0&&(h=Je(y)))}else _=o&~m,_!==0?h=Je(_):y!==0&&(h=Je(y));if(h===0)return 0;if(i!==0&&i!==h&&(i&m)===0&&(m=h&-h,y=i&-i,m>=y||m===16&&(y&4194240)!==0))return i;if((h&4)!==0&&(h|=o&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=h;0<i;)o=31-mr(i),m=1<<o,h|=n[o],i&=~m;return h}function wi(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _i(n,i){for(var o=n.suspendedLanes,h=n.pingedLanes,m=n.expirationTimes,y=n.pendingLanes;0<y;){var _=31-mr(y),j=1<<_,V=m[_];V===-1?((j&o)===0||(j&h)!==0)&&(m[_]=wi(j,i)):V<=i&&(n.expiredLanes|=j),y&=~j}}function Do(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Lo(){var n=an;return an<<=1,(an&4194240)===0&&(an=64),n}function Mo(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function bi(n,i,o){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-mr(i),n[i]=o}function nh(n,i){var o=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<o;){var m=31-mr(o),y=1<<m;i[m]=0,h[m]=-1,n[m]=-1,o&=~y}}function Vo(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var h=31-mr(o),m=1<<h;m&i|n[h]&i&&(n[h]|=i),o&=~m}}var He=0;function on(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Oo,da,Fo,Uo,zo,ln=!1,ha=[],cn=null,un=null,Ft=null,ki=new Map,Vn=new Map,pr=[],Tc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bs(n,i){switch(n){case"focusin":case"focusout":cn=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":ki.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vn.delete(i.pointerId)}}function $r(n,i,o,h,m,y){return n===null||n.nativeEvent!==y?(n={blockedOn:i,domEventName:o,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},i!==null&&(i=tl(i),i!==null&&da(i)),n):(n.eventSystemFlags|=h,i=n.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),n)}function Ic(n,i,o,h,m){switch(i){case"focusin":return cn=$r(cn,n,i,o,h,m),!0;case"dragenter":return un=$r(un,n,i,o,h,m),!0;case"mouseover":return Ft=$r(Ft,n,i,o,h,m),!0;case"pointerover":var y=m.pointerId;return ki.set(y,$r(ki.get(y)||null,n,i,o,h,m)),!0;case"gotpointercapture":return y=m.pointerId,Vn.set(y,$r(Vn.get(y)||null,n,i,o,h,m)),!0}return!1}function fa(n){var i=Ni(n.target);if(i!==null){var o=zr(i);if(o!==null){if(i=o.tag,i===13){if(i=Co(o),i!==null){n.blockedOn=i,zo(n.priority,function(){Fo(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function rt(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=ma(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(o===null){o=n.nativeEvent;var h=new o.constructor(o.type,o);gs=h,o.target.dispatchEvent(h),gs=null}else return i=tl(o),i!==null&&da(i),n.blockedOn=o,!1;i.shift()}return!0}function Nc(n,i,o){rt(n)&&o.delete(i)}function sh(){ln=!1,cn!==null&&rt(cn)&&(cn=null),un!==null&&rt(un)&&(un=null),Ft!==null&&rt(Ft)&&(Ft=null),ki.forEach(Nc),Vn.forEach(Nc)}function ks(n,i){n.blockedOn===i&&(n.blockedOn=null,ln||(ln=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sh)))}function Es(n){function i(m){return ks(m,n)}if(0<ha.length){ks(ha[0],n);for(var o=1;o<ha.length;o++){var h=ha[o];h.blockedOn===n&&(h.blockedOn=null)}}for(cn!==null&&ks(cn,n),un!==null&&ks(un,n),Ft!==null&&ks(Ft,n),ki.forEach(i),Vn.forEach(i),o=0;o<pr.length;o++)h=pr[o],h.blockedOn===n&&(h.blockedOn=null);for(;0<pr.length&&(o=pr[0],o.blockedOn===null);)fa(o),o.blockedOn===null&&pr.shift()}var On=fe.ReactCurrentBatchConfig,Fn=!0;function dn(n,i,o,h){var m=He,y=On.transition;On.transition=null;try{He=1,$o(n,i,o,h)}finally{He=m,On.transition=y}}function Sc(n,i,o,h){var m=He,y=On.transition;On.transition=null;try{He=4,$o(n,i,o,h)}finally{He=m,On.transition=y}}function $o(n,i,o,h){if(Fn){var m=ma(n,i,o,h);if(m===null)ph(n,i,h,hn,o),bs(n,h);else if(Ic(m,n,i,o,h))h.stopPropagation();else if(bs(n,h),i&4&&-1<Tc.indexOf(n)){for(;m!==null;){var y=tl(m);if(y!==null&&Oo(y),y=ma(n,i,o,h),y===null&&ph(n,i,h,hn,o),y===m)break;m=y}m!==null&&h.stopPropagation()}else ph(n,i,h,null,o)}}var hn=null;function ma(n,i,o,h){if(hn=null,n=aa(h),n=Ni(n),n!==null)if(i=zr(n),i===null)n=null;else if(o=i.tag,o===13){if(n=Co(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return hn=n,null}function pa(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rh()){case ca:return 1;case Po:return 4;case yi:case jo:return 16;case ua:return 536870912;default:return 16}default:return 16}}var gr=null,ga=null,Un=null;function Ac(){if(Un)return Un;var n,i=ga,o=i.length,h,m="value"in gr?gr.value:gr.textContent,y=m.length;for(n=0;n<o&&i[n]===m[n];n++);var _=o-n;for(h=1;h<=_&&i[o-h]===m[y-h];h++);return Un=m.slice(n,1<h?1-h:void 0)}function Ei(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function fn(){return!0}function Bo(){return!1}function Gt(n){function i(o,h,m,y,_){this._reactName=o,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var j in n)n.hasOwnProperty(j)&&(o=n[j],this[j]=o?o(y):y[j]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?fn:Bo,this.isPropagationStopped=Bo,this}return le(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=fn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=fn)},persist:function(){},isPersistent:fn}),i}var mn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ti=Gt(mn),Ts=le({},mn,{view:0,detail:0}),ya=Gt(Ts),xa,va,yr,Ii=le({},Ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Le,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==yr&&(yr&&n.type==="mousemove"?(xa=n.screenX-yr.screenX,va=n.screenY-yr.screenY):va=xa=0,yr=n),xa)},movementY:function(n){return"movementY"in n?n.movementY:va}}),qo=Gt(Ii),Cc=le({},Ii,{dataTransfer:0}),Rc=Gt(Cc),wa=le({},Ts,{relatedTarget:0}),Ut=Gt(wa),Pc=le({},mn,{animationName:0,elapsedTime:0,pseudoElement:0}),jc=Gt(Pc),Is=le({},mn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Gt(Is),x=le({},mn,{data:0}),w=Gt(x),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ae(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=G[n])?!!i[n]:!1}function Le(){return ae}var vt=le({},Ts,{key:function(n){if(n.key){var i=T[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ei(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?q[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Le,charCode:function(n){return n.type==="keypress"?Ei(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ei(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),et=Gt(vt),Tt=le({},Ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xr=Gt(Tt),zn=le({},Ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Le}),pn=Gt(zn),gn=le({},mn,{propertyName:0,elapsedTime:0,pseudoElement:0}),_a=Gt(gn),Ho=le({},Ii,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Tb=Gt(Ho),Ib=[9,13,27,32],ih=f&&"CompositionEvent"in window,Wo=null;f&&"documentMode"in document&&(Wo=document.documentMode);var Nb=f&&"TextEvent"in window&&!Wo,jp=f&&(!ih||Wo&&8<Wo&&11>=Wo),Dp=" ",Lp=!1;function Mp(n,i){switch(n){case"keyup":return Ib.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ba=!1;function Sb(n,i){switch(n){case"compositionend":return Vp(i);case"keypress":return i.which!==32?null:(Lp=!0,Dp);case"textInput":return n=i.data,n===Dp&&Lp?null:n;default:return null}}function Ab(n,i){if(ba)return n==="compositionend"||!ih&&Mp(n,i)?(n=Ac(),Un=ga=gr=null,ba=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return jp&&i.locale!=="ko"?null:i.data;default:return null}}var Cb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Op(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Cb[n.type]:i==="textarea"}function Fp(n,i,o,h){ys(h),i=Oc(i,"onChange"),0<i.length&&(o=new Ti("onChange","change",null,o,h),n.push({event:o,listeners:i}))}var Go=null,Ko=null;function Rb(n){ng(n,0)}function Dc(n){var i=Na(n);if(tn(i))return n}function Pb(n,i){if(n==="change")return i}var Up=!1;if(f){var ah;if(f){var oh="oninput"in document;if(!oh){var zp=document.createElement("div");zp.setAttribute("oninput","return;"),oh=typeof zp.oninput=="function"}ah=oh}else ah=!1;Up=ah&&(!document.documentMode||9<document.documentMode)}function $p(){Go&&(Go.detachEvent("onpropertychange",Bp),Ko=Go=null)}function Bp(n){if(n.propertyName==="value"&&Dc(Ko)){var i=[];Fp(i,Ko,n,aa(n)),yc(Rb,i)}}function jb(n,i,o){n==="focusin"?($p(),Go=i,Ko=o,Go.attachEvent("onpropertychange",Bp)):n==="focusout"&&$p()}function Db(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Dc(Ko)}function Lb(n,i){if(n==="click")return Dc(i)}function Mb(n,i){if(n==="input"||n==="change")return Dc(i)}function Vb(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Br=typeof Object.is=="function"?Object.is:Vb;function Qo(n,i){if(Br(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),h=Object.keys(i);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var m=o[h];if(!p.call(i,m)||!Br(n[m],i[m]))return!1}return!0}function qp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hp(n,i){var o=qp(n);n=0;for(var h;o;){if(o.nodeType===3){if(h=n+o.textContent.length,n<=i&&h>=i)return{node:o,offset:i-n};n=h}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=qp(o)}}function Wp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Wp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Gp(){for(var n=window,i=ds();i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=ds(n.document)}return i}function lh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Ob(n){var i=Gp(),o=n.focusedElem,h=n.selectionRange;if(i!==o&&o&&o.ownerDocument&&Wp(o.ownerDocument.documentElement,o)){if(h!==null&&lh(o)){if(i=h.start,n=h.end,n===void 0&&(n=i),"selectionStart"in o)o.selectionStart=i,o.selectionEnd=Math.min(n,o.value.length);else if(n=(i=o.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var m=o.textContent.length,y=Math.min(h.start,m);h=h.end===void 0?y:Math.min(h.end,m),!n.extend&&y>h&&(m=h,h=y,y=m),m=Hp(o,y);var _=Hp(o,h);m&&_&&(n.rangeCount!==1||n.anchorNode!==m.node||n.anchorOffset!==m.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(i=i.createRange(),i.setStart(m.node,m.offset),n.removeAllRanges(),y>h?(n.addRange(i),n.extend(_.node,_.offset)):(i.setEnd(_.node,_.offset),n.addRange(i)))}}for(i=[],n=o;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<i.length;o++)n=i[o],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Fb=f&&"documentMode"in document&&11>=document.documentMode,ka=null,ch=null,Yo=null,uh=!1;function Kp(n,i,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;uh||ka==null||ka!==ds(h)||(h=ka,"selectionStart"in h&&lh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Yo&&Qo(Yo,h)||(Yo=h,h=Oc(ch,"onSelect"),0<h.length&&(i=new Ti("onSelect","select",null,i,o),n.push({event:i,listeners:h}),i.target=ka)))}function Lc(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Ea={animationend:Lc("Animation","AnimationEnd"),animationiteration:Lc("Animation","AnimationIteration"),animationstart:Lc("Animation","AnimationStart"),transitionend:Lc("Transition","TransitionEnd")},dh={},Qp={};f&&(Qp=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function Mc(n){if(dh[n])return dh[n];if(!Ea[n])return n;var i=Ea[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in Qp)return dh[n]=i[o];return n}var Yp=Mc("animationend"),Jp=Mc("animationiteration"),Xp=Mc("animationstart"),Zp=Mc("transitionend"),eg=new Map,tg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ns(n,i){eg.set(n,i),l(i,[n])}for(var hh=0;hh<tg.length;hh++){var fh=tg[hh],Ub=fh.toLowerCase(),zb=fh[0].toUpperCase()+fh.slice(1);Ns(Ub,"on"+zb)}Ns(Yp,"onAnimationEnd"),Ns(Jp,"onAnimationIteration"),Ns(Xp,"onAnimationStart"),Ns("dblclick","onDoubleClick"),Ns("focusin","onFocus"),Ns("focusout","onBlur"),Ns(Zp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$b=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jo));function rg(n,i,o){var h=n.type||"unknown-event";n.currentTarget=o,Ao(h,i,void 0,n),n.currentTarget=null}function ng(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var h=n[o],m=h.event;h=h.listeners;e:{var y=void 0;if(i)for(var _=h.length-1;0<=_;_--){var j=h[_],V=j.instance,W=j.currentTarget;if(j=j.listener,V!==y&&m.isPropagationStopped())break e;rg(m,j,W),y=V}else for(_=0;_<h.length;_++){if(j=h[_],V=j.instance,W=j.currentTarget,j=j.listener,V!==y&&m.isPropagationStopped())break e;rg(m,j,W),y=V}}}if(oa)throw n=Tr,oa=!1,Tr=null,n}function lt(n,i){var o=i[_h];o===void 0&&(o=i[_h]=new Set);var h=n+"__bubble";o.has(h)||(sg(i,n,2,!1),o.add(h))}function mh(n,i,o){var h=0;i&&(h|=4),sg(o,n,h,i)}var Vc="_reactListening"+Math.random().toString(36).slice(2);function Xo(n){if(!n[Vc]){n[Vc]=!0,s.forEach(function(o){o!=="selectionchange"&&($b.has(o)||mh(o,!1,n),mh(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Vc]||(i[Vc]=!0,mh("selectionchange",!1,i))}}function sg(n,i,o,h){switch(pa(i)){case 1:var m=dn;break;case 4:m=Sc;break;default:m=$o}o=m.bind(null,i,o,n),m=void 0,!vs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),h?m!==void 0?n.addEventListener(i,o,{capture:!0,passive:m}):n.addEventListener(i,o,!0):m!==void 0?n.addEventListener(i,o,{passive:m}):n.addEventListener(i,o,!1)}function ph(n,i,o,h,m){var y=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var j=h.stateNode.containerInfo;if(j===m||j.nodeType===8&&j.parentNode===m)break;if(_===4)for(_=h.return;_!==null;){var V=_.tag;if((V===3||V===4)&&(V=_.stateNode.containerInfo,V===m||V.nodeType===8&&V.parentNode===m))return;_=_.return}for(;j!==null;){if(_=Ni(j),_===null)return;if(V=_.tag,V===5||V===6){h=y=_;continue e}j=j.parentNode}}h=h.return}yc(function(){var W=y,te=aa(o),re=[];e:{var ee=eg.get(n);if(ee!==void 0){var ue=Ti,ge=n;switch(n){case"keypress":if(Ei(o)===0)break e;case"keydown":case"keyup":ue=et;break;case"focusin":ge="focus",ue=Ut;break;case"focusout":ge="blur",ue=Ut;break;case"beforeblur":case"afterblur":ue=Ut;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Rc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=pn;break;case Yp:case Jp:case Xp:ue=jc;break;case Zp:ue=_a;break;case"scroll":ue=ya;break;case"wheel":ue=Tb;break;case"copy":case"cut":case"paste":ue=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=xr}var ve=(i&4)!==0,wt=!ve&&n==="scroll",B=ve?ee!==null?ee+"Capture":null:ee;ve=[];for(var F=W,H;F!==null;){H=F;var ne=H.stateNode;if(H.tag===5&&ne!==null&&(H=ne,B!==null&&(ne=mi(F,B),ne!=null&&ve.push(Zo(F,ne,H)))),wt)break;F=F.return}0<ve.length&&(ee=new ue(ee,ge,null,o,te),re.push({event:ee,listeners:ve}))}}if((i&7)===0){e:{if(ee=n==="mouseover"||n==="pointerover",ue=n==="mouseout"||n==="pointerout",ee&&o!==gs&&(ge=o.relatedTarget||o.fromElement)&&(Ni(ge)||ge[$n]))break e;if((ue||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,ue?(ge=o.relatedTarget||o.toElement,ue=W,ge=ge?Ni(ge):null,ge!==null&&(wt=zr(ge),ge!==wt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(ue=null,ge=W),ue!==ge)){if(ve=qo,ne="onMouseLeave",B="onMouseEnter",F="mouse",(n==="pointerout"||n==="pointerover")&&(ve=xr,ne="onPointerLeave",B="onPointerEnter",F="pointer"),wt=ue==null?ee:Na(ue),H=ge==null?ee:Na(ge),ee=new ve(ne,F+"leave",ue,o,te),ee.target=wt,ee.relatedTarget=H,ne=null,Ni(te)===W&&(ve=new ve(B,F+"enter",ge,o,te),ve.target=H,ve.relatedTarget=wt,ne=ve),wt=ne,ue&&ge)t:{for(ve=ue,B=ge,F=0,H=ve;H;H=Ta(H))F++;for(H=0,ne=B;ne;ne=Ta(ne))H++;for(;0<F-H;)ve=Ta(ve),F--;for(;0<H-F;)B=Ta(B),H--;for(;F--;){if(ve===B||B!==null&&ve===B.alternate)break t;ve=Ta(ve),B=Ta(B)}ve=null}else ve=null;ue!==null&&ig(re,ee,ue,ve,!1),ge!==null&&wt!==null&&ig(re,wt,ge,ve,!0)}}e:{if(ee=W?Na(W):window,ue=ee.nodeName&&ee.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ee.type==="file")var _e=Pb;else if(Op(ee))if(Up)_e=Mb;else{_e=Db;var Ee=jb}else(ue=ee.nodeName)&&ue.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(_e=Lb);if(_e&&(_e=_e(n,W))){Fp(re,_e,o,te);break e}Ee&&Ee(n,ee,W),n==="focusout"&&(Ee=ee._wrapperState)&&Ee.controlled&&ee.type==="number"&&Et(ee,"number",ee.value)}switch(Ee=W?Na(W):window,n){case"focusin":(Op(Ee)||Ee.contentEditable==="true")&&(ka=Ee,ch=W,Yo=null);break;case"focusout":Yo=ch=ka=null;break;case"mousedown":uh=!0;break;case"contextmenu":case"mouseup":case"dragend":uh=!1,Kp(re,o,te);break;case"selectionchange":if(Fb)break;case"keydown":case"keyup":Kp(re,o,te)}var Te;if(ih)e:{switch(n){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else ba?Mp(n,o)&&(Re="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Re="onCompositionStart");Re&&(jp&&o.locale!=="ko"&&(ba||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&ba&&(Te=Ac()):(gr=te,ga="value"in gr?gr.value:gr.textContent,ba=!0)),Ee=Oc(W,Re),0<Ee.length&&(Re=new w(Re,n,null,o,te),re.push({event:Re,listeners:Ee}),Te?Re.data=Te:(Te=Vp(o),Te!==null&&(Re.data=Te)))),(Te=Nb?Sb(n,o):Ab(n,o))&&(W=Oc(W,"onBeforeInput"),0<W.length&&(te=new w("onBeforeInput","beforeinput",null,o,te),re.push({event:te,listeners:W}),te.data=Te))}ng(re,i)})}function Zo(n,i,o){return{instance:n,listener:i,currentTarget:o}}function Oc(n,i){for(var o=i+"Capture",h=[];n!==null;){var m=n,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=mi(n,o),y!=null&&h.unshift(Zo(n,y,m)),y=mi(n,i),y!=null&&h.push(Zo(n,y,m))),n=n.return}return h}function Ta(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ig(n,i,o,h,m){for(var y=i._reactName,_=[];o!==null&&o!==h;){var j=o,V=j.alternate,W=j.stateNode;if(V!==null&&V===h)break;j.tag===5&&W!==null&&(j=W,m?(V=mi(o,y),V!=null&&_.unshift(Zo(o,V,j))):m||(V=mi(o,y),V!=null&&_.push(Zo(o,V,j)))),o=o.return}_.length!==0&&n.push({event:i,listeners:_})}var Bb=/\r\n?/g,qb=/\u0000|\uFFFD/g;function ag(n){return(typeof n=="string"?n:""+n).replace(Bb,`
`).replace(qb,"")}function Fc(n,i,o){if(i=ag(i),ag(n)!==i&&o)throw Error(t(425))}function Uc(){}var gh=null,yh=null;function xh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var vh=typeof setTimeout=="function"?setTimeout:void 0,Hb=typeof clearTimeout=="function"?clearTimeout:void 0,og=typeof Promise=="function"?Promise:void 0,Wb=typeof queueMicrotask=="function"?queueMicrotask:typeof og<"u"?function(n){return og.resolve(null).then(n).catch(Gb)}:vh;function Gb(n){setTimeout(function(){throw n})}function wh(n,i){var o=i,h=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(h===0){n.removeChild(m),Es(i);return}h--}else o!=="$"&&o!=="$?"&&o!=="$!"||h++;o=m}while(o);Es(i)}function Ss(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function lg(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}var Ia=Math.random().toString(36).slice(2),yn="__reactFiber$"+Ia,el="__reactProps$"+Ia,$n="__reactContainer$"+Ia,_h="__reactEvents$"+Ia,Kb="__reactListeners$"+Ia,Qb="__reactHandles$"+Ia;function Ni(n){var i=n[yn];if(i)return i;for(var o=n.parentNode;o;){if(i=o[$n]||o[yn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=lg(n);n!==null;){if(o=n[yn])return o;n=lg(n)}return i}n=o,o=n.parentNode}return null}function tl(n){return n=n[yn]||n[$n],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Na(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function zc(n){return n[el]||null}var bh=[],Sa=-1;function As(n){return{current:n}}function ct(n){0>Sa||(n.current=bh[Sa],bh[Sa]=null,Sa--)}function st(n,i){Sa++,bh[Sa]=n.current,n.current=i}var Cs={},Kt=As(Cs),ar=As(!1),Si=Cs;function Aa(n,i){var o=n.type.contextTypes;if(!o)return Cs;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in o)m[y]=i[y];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=m),m}function or(n){return n=n.childContextTypes,n!=null}function $c(){ct(ar),ct(Kt)}function cg(n,i,o){if(Kt.current!==Cs)throw Error(t(168));st(Kt,i),st(ar,o)}function ug(n,i,o){var h=n.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return o;h=h.getChildContext();for(var m in h)if(!(m in i))throw Error(t(108,Ie(n)||"Unknown",m));return le({},o,h)}function Bc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Cs,Si=Kt.current,st(Kt,n),st(ar,ar.current),!0}function dg(n,i,o){var h=n.stateNode;if(!h)throw Error(t(169));o?(n=ug(n,i,Si),h.__reactInternalMemoizedMergedChildContext=n,ct(ar),ct(Kt),st(Kt,n)):ct(ar),st(ar,o)}var Bn=null,qc=!1,kh=!1;function hg(n){Bn===null?Bn=[n]:Bn.push(n)}function Yb(n){qc=!0,hg(n)}function Rs(){if(!kh&&Bn!==null){kh=!0;var n=0,i=He;try{var o=Bn;for(He=1;n<o.length;n++){var h=o[n];do h=h(!0);while(h!==null)}Bn=null,qc=!1}catch(m){throw Bn!==null&&(Bn=Bn.slice(n+1)),Ro(ca,Rs),m}finally{He=i,kh=!1}}return null}var Ca=[],Ra=0,Hc=null,Wc=0,Nr=[],Sr=0,Ai=null,qn=1,Hn="";function Ci(n,i){Ca[Ra++]=Wc,Ca[Ra++]=Hc,Hc=n,Wc=i}function fg(n,i,o){Nr[Sr++]=qn,Nr[Sr++]=Hn,Nr[Sr++]=Ai,Ai=n;var h=qn;n=Hn;var m=32-mr(h)-1;h&=~(1<<m),o+=1;var y=32-mr(i)+m;if(30<y){var _=m-m%5;y=(h&(1<<_)-1).toString(32),h>>=_,m-=_,qn=1<<32-mr(i)+m|o<<m|h,Hn=y+n}else qn=1<<y|o<<m|h,Hn=n}function Eh(n){n.return!==null&&(Ci(n,1),fg(n,1,0))}function Th(n){for(;n===Hc;)Hc=Ca[--Ra],Ca[Ra]=null,Wc=Ca[--Ra],Ca[Ra]=null;for(;n===Ai;)Ai=Nr[--Sr],Nr[Sr]=null,Hn=Nr[--Sr],Nr[Sr]=null,qn=Nr[--Sr],Nr[Sr]=null}var vr=null,wr=null,dt=!1,qr=null;function mg(n,i){var o=Pr(5,null,null,0);o.elementType="DELETED",o.stateNode=i,o.return=n,i=n.deletions,i===null?(n.deletions=[o],n.flags|=16):i.push(o)}function pg(n,i){switch(n.tag){case 5:var o=n.type;return i=i.nodeType!==1||o.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,vr=n,wr=Ss(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,vr=n,wr=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(o=Ai!==null?{id:qn,overflow:Hn}:null,n.memoizedState={dehydrated:i,treeContext:o,retryLane:1073741824},o=Pr(18,null,null,0),o.stateNode=i,o.return=n,n.child=o,vr=n,wr=null,!0):!1;default:return!1}}function Ih(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Nh(n){if(dt){var i=wr;if(i){var o=i;if(!pg(n,i)){if(Ih(n))throw Error(t(418));i=Ss(o.nextSibling);var h=vr;i&&pg(n,i)?mg(h,o):(n.flags=n.flags&-4097|2,dt=!1,vr=n)}}else{if(Ih(n))throw Error(t(418));n.flags=n.flags&-4097|2,dt=!1,vr=n}}}function gg(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;vr=n}function Gc(n){if(n!==vr)return!1;if(!dt)return gg(n),dt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!xh(n.type,n.memoizedProps)),i&&(i=wr)){if(Ih(n))throw yg(),Error(t(418));for(;i;)mg(n,i),i=Ss(i.nextSibling)}if(gg(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"){if(i===0){wr=Ss(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++}n=n.nextSibling}wr=null}}else wr=vr?Ss(n.stateNode.nextSibling):null;return!0}function yg(){for(var n=wr;n;)n=Ss(n.nextSibling)}function Pa(){wr=vr=null,dt=!1}function Sh(n){qr===null?qr=[n]:qr.push(n)}var Jb=fe.ReactCurrentBatchConfig;function rl(n,i,o){if(n=o.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(t(309));var h=o.stateNode}if(!h)throw Error(t(147,n));var m=h,y=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===y?i.ref:(i=function(_){var j=m.refs;_===null?delete j[y]:j[y]=_},i._stringRef=y,i)}if(typeof n!="string")throw Error(t(284));if(!o._owner)throw Error(t(290,n))}return n}function Kc(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function xg(n){var i=n._init;return i(n._payload)}function vg(n){function i(B,F){if(n){var H=B.deletions;H===null?(B.deletions=[F],B.flags|=16):H.push(F)}}function o(B,F){if(!n)return null;for(;F!==null;)i(B,F),F=F.sibling;return null}function h(B,F){for(B=new Map;F!==null;)F.key!==null?B.set(F.key,F):B.set(F.index,F),F=F.sibling;return B}function m(B,F){return B=Fs(B,F),B.index=0,B.sibling=null,B}function y(B,F,H){return B.index=H,n?(H=B.alternate,H!==null?(H=H.index,H<F?(B.flags|=2,F):H):(B.flags|=2,F)):(B.flags|=1048576,F)}function _(B){return n&&B.alternate===null&&(B.flags|=2),B}function j(B,F,H,ne){return F===null||F.tag!==6?(F=wf(H,B.mode,ne),F.return=B,F):(F=m(F,H),F.return=B,F)}function V(B,F,H,ne){var _e=H.type;return _e===I?te(B,F,H.props.children,ne,H.key):F!==null&&(F.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Ce&&xg(_e)===F.type)?(ne=m(F,H.props),ne.ref=rl(B,F,H),ne.return=B,ne):(ne=xu(H.type,H.key,H.props,null,B.mode,ne),ne.ref=rl(B,F,H),ne.return=B,ne)}function W(B,F,H,ne){return F===null||F.tag!==4||F.stateNode.containerInfo!==H.containerInfo||F.stateNode.implementation!==H.implementation?(F=_f(H,B.mode,ne),F.return=B,F):(F=m(F,H.children||[]),F.return=B,F)}function te(B,F,H,ne,_e){return F===null||F.tag!==7?(F=Oi(H,B.mode,ne,_e),F.return=B,F):(F=m(F,H),F.return=B,F)}function re(B,F,H){if(typeof F=="string"&&F!==""||typeof F=="number")return F=wf(""+F,B.mode,H),F.return=B,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case oe:return H=xu(F.type,F.key,F.props,null,B.mode,H),H.ref=rl(B,null,F),H.return=B,H;case Y:return F=_f(F,B.mode,H),F.return=B,F;case Ce:var ne=F._init;return re(B,ne(F._payload),H)}if(xt(F)||de(F))return F=Oi(F,B.mode,H,null),F.return=B,F;Kc(B,F)}return null}function ee(B,F,H,ne){var _e=F!==null?F.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return _e!==null?null:j(B,F,""+H,ne);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case oe:return H.key===_e?V(B,F,H,ne):null;case Y:return H.key===_e?W(B,F,H,ne):null;case Ce:return _e=H._init,ee(B,F,_e(H._payload),ne)}if(xt(H)||de(H))return _e!==null?null:te(B,F,H,ne,null);Kc(B,H)}return null}function ue(B,F,H,ne,_e){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return B=B.get(H)||null,j(F,B,""+ne,_e);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case oe:return B=B.get(ne.key===null?H:ne.key)||null,V(F,B,ne,_e);case Y:return B=B.get(ne.key===null?H:ne.key)||null,W(F,B,ne,_e);case Ce:var Ee=ne._init;return ue(B,F,H,Ee(ne._payload),_e)}if(xt(ne)||de(ne))return B=B.get(H)||null,te(F,B,ne,_e,null);Kc(F,ne)}return null}function ge(B,F,H,ne){for(var _e=null,Ee=null,Te=F,Re=F=0,Mt=null;Te!==null&&Re<H.length;Re++){Te.index>Re?(Mt=Te,Te=null):Mt=Te.sibling;var Ye=ee(B,Te,H[Re],ne);if(Ye===null){Te===null&&(Te=Mt);break}n&&Te&&Ye.alternate===null&&i(B,Te),F=y(Ye,F,Re),Ee===null?_e=Ye:Ee.sibling=Ye,Ee=Ye,Te=Mt}if(Re===H.length)return o(B,Te),dt&&Ci(B,Re),_e;if(Te===null){for(;Re<H.length;Re++)Te=re(B,H[Re],ne),Te!==null&&(F=y(Te,F,Re),Ee===null?_e=Te:Ee.sibling=Te,Ee=Te);return dt&&Ci(B,Re),_e}for(Te=h(B,Te);Re<H.length;Re++)Mt=ue(Te,B,Re,H[Re],ne),Mt!==null&&(n&&Mt.alternate!==null&&Te.delete(Mt.key===null?Re:Mt.key),F=y(Mt,F,Re),Ee===null?_e=Mt:Ee.sibling=Mt,Ee=Mt);return n&&Te.forEach(function(Us){return i(B,Us)}),dt&&Ci(B,Re),_e}function ve(B,F,H,ne){var _e=de(H);if(typeof _e!="function")throw Error(t(150));if(H=_e.call(H),H==null)throw Error(t(151));for(var Ee=_e=null,Te=F,Re=F=0,Mt=null,Ye=H.next();Te!==null&&!Ye.done;Re++,Ye=H.next()){Te.index>Re?(Mt=Te,Te=null):Mt=Te.sibling;var Us=ee(B,Te,Ye.value,ne);if(Us===null){Te===null&&(Te=Mt);break}n&&Te&&Us.alternate===null&&i(B,Te),F=y(Us,F,Re),Ee===null?_e=Us:Ee.sibling=Us,Ee=Us,Te=Mt}if(Ye.done)return o(B,Te),dt&&Ci(B,Re),_e;if(Te===null){for(;!Ye.done;Re++,Ye=H.next())Ye=re(B,Ye.value,ne),Ye!==null&&(F=y(Ye,F,Re),Ee===null?_e=Ye:Ee.sibling=Ye,Ee=Ye);return dt&&Ci(B,Re),_e}for(Te=h(B,Te);!Ye.done;Re++,Ye=H.next())Ye=ue(Te,B,Re,Ye.value,ne),Ye!==null&&(n&&Ye.alternate!==null&&Te.delete(Ye.key===null?Re:Ye.key),F=y(Ye,F,Re),Ee===null?_e=Ye:Ee.sibling=Ye,Ee=Ye);return n&&Te.forEach(function(Ck){return i(B,Ck)}),dt&&Ci(B,Re),_e}function wt(B,F,H,ne){if(typeof H=="object"&&H!==null&&H.type===I&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case oe:e:{for(var _e=H.key,Ee=F;Ee!==null;){if(Ee.key===_e){if(_e=H.type,_e===I){if(Ee.tag===7){o(B,Ee.sibling),F=m(Ee,H.props.children),F.return=B,B=F;break e}}else if(Ee.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Ce&&xg(_e)===Ee.type){o(B,Ee.sibling),F=m(Ee,H.props),F.ref=rl(B,Ee,H),F.return=B,B=F;break e}o(B,Ee);break}else i(B,Ee);Ee=Ee.sibling}H.type===I?(F=Oi(H.props.children,B.mode,ne,H.key),F.return=B,B=F):(ne=xu(H.type,H.key,H.props,null,B.mode,ne),ne.ref=rl(B,F,H),ne.return=B,B=ne)}return _(B);case Y:e:{for(Ee=H.key;F!==null;){if(F.key===Ee)if(F.tag===4&&F.stateNode.containerInfo===H.containerInfo&&F.stateNode.implementation===H.implementation){o(B,F.sibling),F=m(F,H.children||[]),F.return=B,B=F;break e}else{o(B,F);break}else i(B,F);F=F.sibling}F=_f(H,B.mode,ne),F.return=B,B=F}return _(B);case Ce:return Ee=H._init,wt(B,F,Ee(H._payload),ne)}if(xt(H))return ge(B,F,H,ne);if(de(H))return ve(B,F,H,ne);Kc(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,F!==null&&F.tag===6?(o(B,F.sibling),F=m(F,H),F.return=B,B=F):(o(B,F),F=wf(H,B.mode,ne),F.return=B,B=F),_(B)):o(B,F)}return wt}var ja=vg(!0),wg=vg(!1),Qc=As(null),Yc=null,Da=null,Ah=null;function Ch(){Ah=Da=Yc=null}function Rh(n){var i=Qc.current;ct(Qc),n._currentValue=i}function Ph(n,i,o){for(;n!==null;){var h=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),n===o)break;n=n.return}}function La(n,i){Yc=n,Ah=Da=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(lr=!0),n.firstContext=null)}function Ar(n){var i=n._currentValue;if(Ah!==n)if(n={context:n,memoizedValue:i,next:null},Da===null){if(Yc===null)throw Error(t(308));Da=n,Yc.dependencies={lanes:0,firstContext:n}}else Da=Da.next=n;return i}var Ri=null;function jh(n){Ri===null?Ri=[n]:Ri.push(n)}function _g(n,i,o,h){var m=i.interleaved;return m===null?(o.next=o,jh(i)):(o.next=m.next,m.next=o),i.interleaved=o,Wn(n,h)}function Wn(n,i){n.lanes|=i;var o=n.alternate;for(o!==null&&(o.lanes|=i),o=n,n=n.return;n!==null;)n.childLanes|=i,o=n.alternate,o!==null&&(o.childLanes|=i),o=n,n=n.return;return o.tag===3?o.stateNode:null}var Ps=!1;function Dh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bg(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Gn(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function js(n,i,o){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Ke&2)!==0){var m=h.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),h.pending=i,Wn(n,o)}return m=h.interleaved,m===null?(i.next=i,jh(h)):(i.next=m.next,m.next=i),h.interleaved=i,Wn(n,o)}function Jc(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194240)!==0)){var h=i.lanes;h&=n.pendingLanes,o|=h,i.lanes=o,Vo(n,o)}}function kg(n,i){var o=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var m=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};y===null?m=y=_:y=y.next=_,o=o.next}while(o!==null);y===null?m=y=i:y=y.next=i}else m=y=i;o={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,effects:h.effects},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}function Xc(n,i,o,h){var m=n.updateQueue;Ps=!1;var y=m.firstBaseUpdate,_=m.lastBaseUpdate,j=m.shared.pending;if(j!==null){m.shared.pending=null;var V=j,W=V.next;V.next=null,_===null?y=W:_.next=W,_=V;var te=n.alternate;te!==null&&(te=te.updateQueue,j=te.lastBaseUpdate,j!==_&&(j===null?te.firstBaseUpdate=W:j.next=W,te.lastBaseUpdate=V))}if(y!==null){var re=m.baseState;_=0,te=W=V=null,j=y;do{var ee=j.lane,ue=j.eventTime;if((h&ee)===ee){te!==null&&(te=te.next={eventTime:ue,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var ge=n,ve=j;switch(ee=i,ue=o,ve.tag){case 1:if(ge=ve.payload,typeof ge=="function"){re=ge.call(ue,re,ee);break e}re=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ve.payload,ee=typeof ge=="function"?ge.call(ue,re,ee):ge,ee==null)break e;re=le({},re,ee);break e;case 2:Ps=!0}}j.callback!==null&&j.lane!==0&&(n.flags|=64,ee=m.effects,ee===null?m.effects=[j]:ee.push(j))}else ue={eventTime:ue,lane:ee,tag:j.tag,payload:j.payload,callback:j.callback,next:null},te===null?(W=te=ue,V=re):te=te.next=ue,_|=ee;if(j=j.next,j===null){if(j=m.shared.pending,j===null)break;ee=j,j=ee.next,ee.next=null,m.lastBaseUpdate=ee,m.shared.pending=null}}while(!0);if(te===null&&(V=re),m.baseState=V,m.firstBaseUpdate=W,m.lastBaseUpdate=te,i=m.shared.interleaved,i!==null){m=i;do _|=m.lane,m=m.next;while(m!==i)}else y===null&&(m.shared.lanes=0);Di|=_,n.lanes=_,n.memoizedState=re}}function Eg(n,i,o){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var h=n[i],m=h.callback;if(m!==null){if(h.callback=null,h=o,typeof m!="function")throw Error(t(191,m));m.call(h)}}}var nl={},xn=As(nl),sl=As(nl),il=As(nl);function Pi(n){if(n===nl)throw Error(t(174));return n}function Lh(n,i){switch(st(il,i),st(sl,n),st(xn,nl),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:na(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=na(i,n)}ct(xn),st(xn,i)}function Ma(){ct(xn),ct(sl),ct(il)}function Tg(n){Pi(il.current);var i=Pi(xn.current),o=na(i,n.type);i!==o&&(st(sl,n),st(xn,o))}function Mh(n){sl.current===n&&(ct(xn),ct(sl))}var ft=As(0);function Zc(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Vh=[];function Oh(){for(var n=0;n<Vh.length;n++)Vh[n]._workInProgressVersionPrimary=null;Vh.length=0}var eu=fe.ReactCurrentDispatcher,Fh=fe.ReactCurrentBatchConfig,ji=0,mt=null,Ct=null,Dt=null,tu=!1,al=!1,ol=0,Xb=0;function Qt(){throw Error(t(321))}function Uh(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Br(n[o],i[o]))return!1;return!0}function zh(n,i,o,h,m,y){if(ji=y,mt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,eu.current=n===null||n.memoizedState===null?rk:nk,n=o(h,m),al){y=0;do{if(al=!1,ol=0,25<=y)throw Error(t(301));y+=1,Dt=Ct=null,i.updateQueue=null,eu.current=sk,n=o(h,m)}while(al)}if(eu.current=su,i=Ct!==null&&Ct.next!==null,ji=0,Dt=Ct=mt=null,tu=!1,i)throw Error(t(300));return n}function $h(){var n=ol!==0;return ol=0,n}function vn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?mt.memoizedState=Dt=n:Dt=Dt.next=n,Dt}function Cr(){if(Ct===null){var n=mt.alternate;n=n!==null?n.memoizedState:null}else n=Ct.next;var i=Dt===null?mt.memoizedState:Dt.next;if(i!==null)Dt=i,Ct=n;else{if(n===null)throw Error(t(310));Ct=n,n={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Dt===null?mt.memoizedState=Dt=n:Dt=Dt.next=n}return Dt}function ll(n,i){return typeof i=="function"?i(n):i}function Bh(n){var i=Cr(),o=i.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=n;var h=Ct,m=h.baseQueue,y=o.pending;if(y!==null){if(m!==null){var _=m.next;m.next=y.next,y.next=_}h.baseQueue=m=y,o.pending=null}if(m!==null){y=m.next,h=h.baseState;var j=_=null,V=null,W=y;do{var te=W.lane;if((ji&te)===te)V!==null&&(V=V.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),h=W.hasEagerState?W.eagerState:n(h,W.action);else{var re={lane:te,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};V===null?(j=V=re,_=h):V=V.next=re,mt.lanes|=te,Di|=te}W=W.next}while(W!==null&&W!==y);V===null?_=h:V.next=j,Br(h,i.memoizedState)||(lr=!0),i.memoizedState=h,i.baseState=_,i.baseQueue=V,o.lastRenderedState=h}if(n=o.interleaved,n!==null){m=n;do y=m.lane,mt.lanes|=y,Di|=y,m=m.next;while(m!==n)}else m===null&&(o.lanes=0);return[i.memoizedState,o.dispatch]}function qh(n){var i=Cr(),o=i.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=n;var h=o.dispatch,m=o.pending,y=i.memoizedState;if(m!==null){o.pending=null;var _=m=m.next;do y=n(y,_.action),_=_.next;while(_!==m);Br(y,i.memoizedState)||(lr=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,h]}function Ig(){}function Ng(n,i){var o=mt,h=Cr(),m=i(),y=!Br(h.memoizedState,m);if(y&&(h.memoizedState=m,lr=!0),h=h.queue,Hh(Cg.bind(null,o,h,n),[n]),h.getSnapshot!==i||y||Dt!==null&&Dt.memoizedState.tag&1){if(o.flags|=2048,cl(9,Ag.bind(null,o,h,m,i),void 0,null),Lt===null)throw Error(t(349));(ji&30)!==0||Sg(o,i,m)}return m}function Sg(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=mt.updateQueue,i===null?(i={lastEffect:null,stores:null},mt.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function Ag(n,i,o,h){i.value=o,i.getSnapshot=h,Rg(i)&&Pg(n)}function Cg(n,i,o){return o(function(){Rg(i)&&Pg(n)})}function Rg(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Br(n,o)}catch{return!0}}function Pg(n){var i=Wn(n,1);i!==null&&Kr(i,n,1,-1)}function jg(n){var i=vn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ll,lastRenderedState:n},i.queue=n,n=n.dispatch=tk.bind(null,mt,n),[i.memoizedState,n]}function cl(n,i,o,h){return n={tag:n,create:i,destroy:o,deps:h,next:null},i=mt.updateQueue,i===null?(i={lastEffect:null,stores:null},mt.updateQueue=i,i.lastEffect=n.next=n):(o=i.lastEffect,o===null?i.lastEffect=n.next=n:(h=o.next,o.next=n,n.next=h,i.lastEffect=n)),n}function Dg(){return Cr().memoizedState}function ru(n,i,o,h){var m=vn();mt.flags|=n,m.memoizedState=cl(1|i,o,void 0,h===void 0?null:h)}function nu(n,i,o,h){var m=Cr();h=h===void 0?null:h;var y=void 0;if(Ct!==null){var _=Ct.memoizedState;if(y=_.destroy,h!==null&&Uh(h,_.deps)){m.memoizedState=cl(i,o,y,h);return}}mt.flags|=n,m.memoizedState=cl(1|i,o,y,h)}function Lg(n,i){return ru(8390656,8,n,i)}function Hh(n,i){return nu(2048,8,n,i)}function Mg(n,i){return nu(4,2,n,i)}function Vg(n,i){return nu(4,4,n,i)}function Og(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Fg(n,i,o){return o=o!=null?o.concat([n]):null,nu(4,4,Og.bind(null,i,n),o)}function Wh(){}function Ug(n,i){var o=Cr();i=i===void 0?null:i;var h=o.memoizedState;return h!==null&&i!==null&&Uh(i,h[1])?h[0]:(o.memoizedState=[n,i],n)}function zg(n,i){var o=Cr();i=i===void 0?null:i;var h=o.memoizedState;return h!==null&&i!==null&&Uh(i,h[1])?h[0]:(n=n(),o.memoizedState=[n,i],n)}function $g(n,i,o){return(ji&21)===0?(n.baseState&&(n.baseState=!1,lr=!0),n.memoizedState=o):(Br(o,i)||(o=Lo(),mt.lanes|=o,Di|=o,n.baseState=!0),i)}function Zb(n,i){var o=He;He=o!==0&&4>o?o:4,n(!0);var h=Fh.transition;Fh.transition={};try{n(!1),i()}finally{He=o,Fh.transition=h}}function Bg(){return Cr().memoizedState}function ek(n,i,o){var h=Vs(n);if(o={lane:h,action:o,hasEagerState:!1,eagerState:null,next:null},qg(n))Hg(i,o);else if(o=_g(n,i,o,h),o!==null){var m=nr();Kr(o,n,h,m),Wg(o,i,h)}}function tk(n,i,o){var h=Vs(n),m={lane:h,action:o,hasEagerState:!1,eagerState:null,next:null};if(qg(n))Hg(i,m);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var _=i.lastRenderedState,j=y(_,o);if(m.hasEagerState=!0,m.eagerState=j,Br(j,_)){var V=i.interleaved;V===null?(m.next=m,jh(i)):(m.next=V.next,V.next=m),i.interleaved=m;return}}catch{}finally{}o=_g(n,i,m,h),o!==null&&(m=nr(),Kr(o,n,h,m),Wg(o,i,h))}}function qg(n){var i=n.alternate;return n===mt||i!==null&&i===mt}function Hg(n,i){al=tu=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function Wg(n,i,o){if((o&4194240)!==0){var h=i.lanes;h&=n.pendingLanes,o|=h,i.lanes=o,Vo(n,o)}}var su={readContext:Ar,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},rk={readContext:Ar,useCallback:function(n,i){return vn().memoizedState=[n,i===void 0?null:i],n},useContext:Ar,useEffect:Lg,useImperativeHandle:function(n,i,o){return o=o!=null?o.concat([n]):null,ru(4194308,4,Og.bind(null,i,n),o)},useLayoutEffect:function(n,i){return ru(4194308,4,n,i)},useInsertionEffect:function(n,i){return ru(4,2,n,i)},useMemo:function(n,i){var o=vn();return i=i===void 0?null:i,n=n(),o.memoizedState=[n,i],n},useReducer:function(n,i,o){var h=vn();return i=o!==void 0?o(i):i,h.memoizedState=h.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},h.queue=n,n=n.dispatch=ek.bind(null,mt,n),[h.memoizedState,n]},useRef:function(n){var i=vn();return n={current:n},i.memoizedState=n},useState:jg,useDebugValue:Wh,useDeferredValue:function(n){return vn().memoizedState=n},useTransition:function(){var n=jg(!1),i=n[0];return n=Zb.bind(null,n[1]),vn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,o){var h=mt,m=vn();if(dt){if(o===void 0)throw Error(t(407));o=o()}else{if(o=i(),Lt===null)throw Error(t(349));(ji&30)!==0||Sg(h,i,o)}m.memoizedState=o;var y={value:o,getSnapshot:i};return m.queue=y,Lg(Cg.bind(null,h,y,n),[n]),h.flags|=2048,cl(9,Ag.bind(null,h,y,o,i),void 0,null),o},useId:function(){var n=vn(),i=Lt.identifierPrefix;if(dt){var o=Hn,h=qn;o=(h&~(1<<32-mr(h)-1)).toString(32)+o,i=":"+i+"R"+o,o=ol++,0<o&&(i+="H"+o.toString(32)),i+=":"}else o=Xb++,i=":"+i+"r"+o.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},nk={readContext:Ar,useCallback:Ug,useContext:Ar,useEffect:Hh,useImperativeHandle:Fg,useInsertionEffect:Mg,useLayoutEffect:Vg,useMemo:zg,useReducer:Bh,useRef:Dg,useState:function(){return Bh(ll)},useDebugValue:Wh,useDeferredValue:function(n){var i=Cr();return $g(i,Ct.memoizedState,n)},useTransition:function(){var n=Bh(ll)[0],i=Cr().memoizedState;return[n,i]},useMutableSource:Ig,useSyncExternalStore:Ng,useId:Bg,unstable_isNewReconciler:!1},sk={readContext:Ar,useCallback:Ug,useContext:Ar,useEffect:Hh,useImperativeHandle:Fg,useInsertionEffect:Mg,useLayoutEffect:Vg,useMemo:zg,useReducer:qh,useRef:Dg,useState:function(){return qh(ll)},useDebugValue:Wh,useDeferredValue:function(n){var i=Cr();return Ct===null?i.memoizedState=n:$g(i,Ct.memoizedState,n)},useTransition:function(){var n=qh(ll)[0],i=Cr().memoizedState;return[n,i]},useMutableSource:Ig,useSyncExternalStore:Ng,useId:Bg,unstable_isNewReconciler:!1};function Hr(n,i){if(n&&n.defaultProps){i=le({},i),n=n.defaultProps;for(var o in n)i[o]===void 0&&(i[o]=n[o]);return i}return i}function Gh(n,i,o,h){i=n.memoizedState,o=o(h,i),o=o==null?i:le({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var iu={isMounted:function(n){return(n=n._reactInternals)?zr(n)===n:!1},enqueueSetState:function(n,i,o){n=n._reactInternals;var h=nr(),m=Vs(n),y=Gn(h,m);y.payload=i,o!=null&&(y.callback=o),i=js(n,y,m),i!==null&&(Kr(i,n,m,h),Jc(i,n,m))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var h=nr(),m=Vs(n),y=Gn(h,m);y.tag=1,y.payload=i,o!=null&&(y.callback=o),i=js(n,y,m),i!==null&&(Kr(i,n,m,h),Jc(i,n,m))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=nr(),h=Vs(n),m=Gn(o,h);m.tag=2,i!=null&&(m.callback=i),i=js(n,m,h),i!==null&&(Kr(i,n,h,o),Jc(i,n,h))}};function Gg(n,i,o,h,m,y,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,y,_):i.prototype&&i.prototype.isPureReactComponent?!Qo(o,h)||!Qo(m,y):!0}function Kg(n,i,o){var h=!1,m=Cs,y=i.contextType;return typeof y=="object"&&y!==null?y=Ar(y):(m=or(i)?Si:Kt.current,h=i.contextTypes,y=(h=h!=null)?Aa(n,m):Cs),i=new i(o,y),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=iu,n.stateNode=i,i._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=m,n.__reactInternalMemoizedMaskedChildContext=y),i}function Qg(n,i,o,h){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,h),i.state!==n&&iu.enqueueReplaceState(i,i.state,null)}function Kh(n,i,o,h){var m=n.stateNode;m.props=o,m.state=n.memoizedState,m.refs={},Dh(n);var y=i.contextType;typeof y=="object"&&y!==null?m.context=Ar(y):(y=or(i)?Si:Kt.current,m.context=Aa(n,y)),m.state=n.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(Gh(n,i,y,o),m.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(i=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),i!==m.state&&iu.enqueueReplaceState(m,m.state,null),Xc(n,o,m,h),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308)}function Va(n,i){try{var o="",h=i;do o+=Ve(h),h=h.return;while(h);var m=o}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:i,stack:m,digest:null}}function Qh(n,i,o){return{value:n,source:null,stack:o??null,digest:i??null}}function Yh(n,i){try{console.error(i.value)}catch(o){setTimeout(function(){throw o})}}var ik=typeof WeakMap=="function"?WeakMap:Map;function Yg(n,i,o){o=Gn(-1,o),o.tag=3,o.payload={element:null};var h=i.value;return o.callback=function(){hu||(hu=!0,hf=h),Yh(n,i)},o}function Jg(n,i,o){o=Gn(-1,o),o.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var m=i.value;o.payload=function(){return h(m)},o.callback=function(){Yh(n,i)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(o.callback=function(){Yh(n,i),typeof h!="function"&&(Ls===null?Ls=new Set([this]):Ls.add(this));var _=i.stack;this.componentDidCatch(i.value,{componentStack:_!==null?_:""})}),o}function Xg(n,i,o){var h=n.pingCache;if(h===null){h=n.pingCache=new ik;var m=new Set;h.set(i,m)}else m=h.get(i),m===void 0&&(m=new Set,h.set(i,m));m.has(o)||(m.add(o),n=vk.bind(null,n,i,o),i.then(n,n))}function Zg(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function ey(n,i,o,h,m){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(i=Gn(-1,1),i.tag=2,js(o,i,1))),o.lanes|=1),n):(n.flags|=65536,n.lanes=m,n)}var ak=fe.ReactCurrentOwner,lr=!1;function rr(n,i,o,h){i.child=n===null?wg(i,null,o,h):ja(i,n.child,o,h)}function ty(n,i,o,h,m){o=o.render;var y=i.ref;return La(i,m),h=zh(n,i,o,h,y,m),o=$h(),n!==null&&!lr?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~m,Kn(n,i,m)):(dt&&o&&Eh(i),i.flags|=1,rr(n,i,h,m),i.child)}function ry(n,i,o,h,m){if(n===null){var y=o.type;return typeof y=="function"&&!vf(y)&&y.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(i.tag=15,i.type=y,ny(n,i,y,h,m)):(n=xu(o.type,null,h,i,i.mode,m),n.ref=i.ref,n.return=i,i.child=n)}if(y=n.child,(n.lanes&m)===0){var _=y.memoizedProps;if(o=o.compare,o=o!==null?o:Qo,o(_,h)&&n.ref===i.ref)return Kn(n,i,m)}return i.flags|=1,n=Fs(y,h),n.ref=i.ref,n.return=i,i.child=n}function ny(n,i,o,h,m){if(n!==null){var y=n.memoizedProps;if(Qo(y,h)&&n.ref===i.ref)if(lr=!1,i.pendingProps=h=y,(n.lanes&m)!==0)(n.flags&131072)!==0&&(lr=!0);else return i.lanes=n.lanes,Kn(n,i,m)}return Jh(n,i,o,h,m)}function sy(n,i,o){var h=i.pendingProps,m=h.children,y=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(Fa,_r),_r|=o;else{if((o&1073741824)===0)return n=y!==null?y.baseLanes|o:o,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,st(Fa,_r),_r|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:o,st(Fa,_r),_r|=h}else y!==null?(h=y.baseLanes|o,i.memoizedState=null):h=o,st(Fa,_r),_r|=h;return rr(n,i,m,o),i.child}function iy(n,i){var o=i.ref;(n===null&&o!==null||n!==null&&n.ref!==o)&&(i.flags|=512,i.flags|=2097152)}function Jh(n,i,o,h,m){var y=or(o)?Si:Kt.current;return y=Aa(i,y),La(i,m),o=zh(n,i,o,h,y,m),h=$h(),n!==null&&!lr?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~m,Kn(n,i,m)):(dt&&h&&Eh(i),i.flags|=1,rr(n,i,o,m),i.child)}function ay(n,i,o,h,m){if(or(o)){var y=!0;Bc(i)}else y=!1;if(La(i,m),i.stateNode===null)ou(n,i),Kg(i,o,h),Kh(i,o,h,m),h=!0;else if(n===null){var _=i.stateNode,j=i.memoizedProps;_.props=j;var V=_.context,W=o.contextType;typeof W=="object"&&W!==null?W=Ar(W):(W=or(o)?Si:Kt.current,W=Aa(i,W));var te=o.getDerivedStateFromProps,re=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function";re||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(j!==h||V!==W)&&Qg(i,_,h,W),Ps=!1;var ee=i.memoizedState;_.state=ee,Xc(i,h,_,m),V=i.memoizedState,j!==h||ee!==V||ar.current||Ps?(typeof te=="function"&&(Gh(i,o,te,h),V=i.memoizedState),(j=Ps||Gg(i,o,j,h,ee,V,W))?(re||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(i.flags|=4194308)):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=V),_.props=h,_.state=V,_.context=W,h=j):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{_=i.stateNode,bg(n,i),j=i.memoizedProps,W=i.type===i.elementType?j:Hr(i.type,j),_.props=W,re=i.pendingProps,ee=_.context,V=o.contextType,typeof V=="object"&&V!==null?V=Ar(V):(V=or(o)?Si:Kt.current,V=Aa(i,V));var ue=o.getDerivedStateFromProps;(te=typeof ue=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(j!==re||ee!==V)&&Qg(i,_,h,V),Ps=!1,ee=i.memoizedState,_.state=ee,Xc(i,h,_,m);var ge=i.memoizedState;j!==re||ee!==ge||ar.current||Ps?(typeof ue=="function"&&(Gh(i,o,ue,h),ge=i.memoizedState),(W=Ps||Gg(i,o,W,h,ee,ge,V)||!1)?(te||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,ge,V),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,ge,V)),typeof _.componentDidUpdate=="function"&&(i.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof _.componentDidUpdate!="function"||j===n.memoizedProps&&ee===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||j===n.memoizedProps&&ee===n.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=ge),_.props=h,_.state=ge,_.context=V,h=W):(typeof _.componentDidUpdate!="function"||j===n.memoizedProps&&ee===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||j===n.memoizedProps&&ee===n.memoizedState||(i.flags|=1024),h=!1)}return Xh(n,i,o,h,y,m)}function Xh(n,i,o,h,m,y){iy(n,i);var _=(i.flags&128)!==0;if(!h&&!_)return m&&dg(i,o,!1),Kn(n,i,y);h=i.stateNode,ak.current=i;var j=_&&typeof o.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,n!==null&&_?(i.child=ja(i,n.child,null,y),i.child=ja(i,null,j,y)):rr(n,i,j,y),i.memoizedState=h.state,m&&dg(i,o,!0),i.child}function oy(n){var i=n.stateNode;i.pendingContext?cg(n,i.pendingContext,i.pendingContext!==i.context):i.context&&cg(n,i.context,!1),Lh(n,i.containerInfo)}function ly(n,i,o,h,m){return Pa(),Sh(m),i.flags|=256,rr(n,i,o,h),i.child}var Zh={dehydrated:null,treeContext:null,retryLane:0};function ef(n){return{baseLanes:n,cachePool:null,transitions:null}}function cy(n,i,o){var h=i.pendingProps,m=ft.current,y=!1,_=(i.flags&128)!==0,j;if((j=_)||(j=n!==null&&n.memoizedState===null?!1:(m&2)!==0),j?(y=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(m|=1),st(ft,m&1),n===null)return Nh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(_=h.children,n=h.fallback,y?(h=i.mode,y=i.child,_={mode:"hidden",children:_},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=_):y=vu(_,h,0,null),n=Oi(n,h,o,null),y.return=i,n.return=i,y.sibling=n,i.child=y,i.child.memoizedState=ef(o),i.memoizedState=Zh,n):tf(i,_));if(m=n.memoizedState,m!==null&&(j=m.dehydrated,j!==null))return ok(n,i,_,h,j,m,o);if(y){y=h.fallback,_=i.mode,m=n.child,j=m.sibling;var V={mode:"hidden",children:h.children};return(_&1)===0&&i.child!==m?(h=i.child,h.childLanes=0,h.pendingProps=V,i.deletions=null):(h=Fs(m,V),h.subtreeFlags=m.subtreeFlags&14680064),j!==null?y=Fs(j,y):(y=Oi(y,_,o,null),y.flags|=2),y.return=i,h.return=i,h.sibling=y,i.child=h,h=y,y=i.child,_=n.child.memoizedState,_=_===null?ef(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},y.memoizedState=_,y.childLanes=n.childLanes&~o,i.memoizedState=Zh,h}return y=n.child,n=y.sibling,h=Fs(y,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=o),h.return=i,h.sibling=null,n!==null&&(o=i.deletions,o===null?(i.deletions=[n],i.flags|=16):o.push(n)),i.child=h,i.memoizedState=null,h}function tf(n,i){return i=vu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function au(n,i,o,h){return h!==null&&Sh(h),ja(i,n.child,null,o),n=tf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function ok(n,i,o,h,m,y,_){if(o)return i.flags&256?(i.flags&=-257,h=Qh(Error(t(422))),au(n,i,_,h)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(y=h.fallback,m=i.mode,h=vu({mode:"visible",children:h.children},m,0,null),y=Oi(y,m,_,null),y.flags|=2,h.return=i,y.return=i,h.sibling=y,i.child=h,(i.mode&1)!==0&&ja(i,n.child,null,_),i.child.memoizedState=ef(_),i.memoizedState=Zh,y);if((i.mode&1)===0)return au(n,i,_,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var j=h.dgst;return h=j,y=Error(t(419)),h=Qh(y,h,void 0),au(n,i,_,h)}if(j=(_&n.childLanes)!==0,lr||j){if(h=Lt,h!==null){switch(_&-_){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(h.suspendedLanes|_))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,Wn(n,m),Kr(h,n,m,-1))}return xf(),h=Qh(Error(t(421))),au(n,i,_,h)}return m.data==="$?"?(i.flags|=128,i.child=n.child,i=wk.bind(null,n),m._reactRetry=i,null):(n=y.treeContext,wr=Ss(m.nextSibling),vr=i,dt=!0,qr=null,n!==null&&(Nr[Sr++]=qn,Nr[Sr++]=Hn,Nr[Sr++]=Ai,qn=n.id,Hn=n.overflow,Ai=i),i=tf(i,h.children),i.flags|=4096,i)}function uy(n,i,o){n.lanes|=i;var h=n.alternate;h!==null&&(h.lanes|=i),Ph(n.return,i,o)}function rf(n,i,o,h,m){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:m}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=o,y.tailMode=m)}function dy(n,i,o){var h=i.pendingProps,m=h.revealOrder,y=h.tail;if(rr(n,i,h.children,o),h=ft.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&uy(n,o,i);else if(n.tag===19)uy(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(st(ft,h),(i.mode&1)===0)i.memoizedState=null;else switch(m){case"forwards":for(o=i.child,m=null;o!==null;)n=o.alternate,n!==null&&Zc(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),rf(i,!1,m,o,y);break;case"backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(n=m.alternate,n!==null&&Zc(n)===null){i.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}rf(i,!0,o,null,y);break;case"together":rf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ou(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Kn(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Di|=i.lanes,(o&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,o=Fs(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Fs(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function lk(n,i,o){switch(i.tag){case 3:oy(i),Pa();break;case 5:Tg(i);break;case 1:or(i.type)&&Bc(i);break;case 4:Lh(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,m=i.memoizedProps.value;st(Qc,h._currentValue),h._currentValue=m;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(st(ft,ft.current&1),i.flags|=128,null):(o&i.child.childLanes)!==0?cy(n,i,o):(st(ft,ft.current&1),n=Kn(n,i,o),n!==null?n.sibling:null);st(ft,ft.current&1);break;case 19:if(h=(o&i.childLanes)!==0,(n.flags&128)!==0){if(h)return dy(n,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),st(ft,ft.current),h)break;return null;case 22:case 23:return i.lanes=0,sy(n,i,o)}return Kn(n,i,o)}var hy,nf,fy,my;hy=function(n,i){for(var o=i.child;o!==null;){if(o.tag===5||o.tag===6)n.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},nf=function(){},fy=function(n,i,o,h){var m=n.memoizedProps;if(m!==h){n=i.stateNode,Pi(xn.current);var y=null;switch(o){case"input":m=ta(n,m),h=ta(n,h),y=[];break;case"select":m=le({},m,{value:void 0}),h=le({},h,{value:void 0}),y=[];break;case"textarea":m=Eo(n,m),h=Eo(n,h),y=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Uc)}Ur(o,h);var _;o=null;for(W in m)if(!h.hasOwnProperty(W)&&m.hasOwnProperty(W)&&m[W]!=null)if(W==="style"){var j=m[W];for(_ in j)j.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(a.hasOwnProperty(W)?y||(y=[]):(y=y||[]).push(W,null));for(W in h){var V=h[W];if(j=m?.[W],h.hasOwnProperty(W)&&V!==j&&(V!=null||j!=null))if(W==="style")if(j){for(_ in j)!j.hasOwnProperty(_)||V&&V.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in V)V.hasOwnProperty(_)&&j[_]!==V[_]&&(o||(o={}),o[_]=V[_])}else o||(y||(y=[]),y.push(W,o)),o=V;else W==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,j=j?j.__html:void 0,V!=null&&j!==V&&(y=y||[]).push(W,V)):W==="children"?typeof V!="string"&&typeof V!="number"||(y=y||[]).push(W,""+V):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(a.hasOwnProperty(W)?(V!=null&&W==="onScroll"&&lt("scroll",n),y||j===V||(y=[])):(y=y||[]).push(W,V))}o&&(y=y||[]).push("style",o);var W=y;(i.updateQueue=W)&&(i.flags|=4)}},my=function(n,i,o,h){o!==h&&(i.flags|=4)};function ul(n,i){if(!dt)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Yt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,h=0;if(i)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=h,n.childLanes=o,i}function ck(n,i,o){var h=i.pendingProps;switch(Th(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(i),null;case 1:return or(i.type)&&$c(),Yt(i),null;case 3:return h=i.stateNode,Ma(),ct(ar),ct(Kt),Oh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Gc(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,qr!==null&&(pf(qr),qr=null))),nf(n,i),Yt(i),null;case 5:Mh(i);var m=Pi(il.current);if(o=i.type,n!==null&&i.stateNode!=null)fy(n,i,o,h,m),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return Yt(i),null}if(n=Pi(xn.current),Gc(i)){h=i.stateNode,o=i.type;var y=i.memoizedProps;switch(h[yn]=i,h[el]=y,n=(i.mode&1)!==0,o){case"dialog":lt("cancel",h),lt("close",h);break;case"iframe":case"object":case"embed":lt("load",h);break;case"video":case"audio":for(m=0;m<Jo.length;m++)lt(Jo[m],h);break;case"source":lt("error",h);break;case"img":case"image":case"link":lt("error",h),lt("load",h);break;case"details":lt("toggle",h);break;case"input":dc(h,y),lt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},lt("invalid",h);break;case"textarea":To(h,y),lt("invalid",h)}Ur(o,y),m=null;for(var _ in y)if(y.hasOwnProperty(_)){var j=y[_];_==="children"?typeof j=="string"?h.textContent!==j&&(y.suppressHydrationWarning!==!0&&Fc(h.textContent,j,n),m=["children",j]):typeof j=="number"&&h.textContent!==""+j&&(y.suppressHydrationWarning!==!0&&Fc(h.textContent,j,n),m=["children",""+j]):a.hasOwnProperty(_)&&j!=null&&_==="onScroll"&&lt("scroll",h)}switch(o){case"input":en(h),ko(h,y,!0);break;case"textarea":en(h),hs(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=Uc)}h=m,i.updateQueue=h,h!==null&&(i.flags|=4)}else{_=m.nodeType===9?m:m.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Io(o)),n==="http://www.w3.org/1999/xhtml"?o==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=_.createElement(o,{is:h.is}):(n=_.createElement(o),o==="select"&&(_=n,h.multiple?_.multiple=!0:h.size&&(_.size=h.size))):n=_.createElementNS(n,o),n[yn]=i,n[el]=h,hy(n,i,!1,!1),i.stateNode=n;e:{switch(_=ia(o,h),o){case"dialog":lt("cancel",n),lt("close",n),m=h;break;case"iframe":case"object":case"embed":lt("load",n),m=h;break;case"video":case"audio":for(m=0;m<Jo.length;m++)lt(Jo[m],n);m=h;break;case"source":lt("error",n),m=h;break;case"img":case"image":case"link":lt("error",n),lt("load",n),m=h;break;case"details":lt("toggle",n),m=h;break;case"input":dc(n,h),m=ta(n,h),lt("invalid",n);break;case"option":m=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},m=le({},h,{value:void 0}),lt("invalid",n);break;case"textarea":To(n,h),m=Eo(n,h),lt("invalid",n);break;default:m=h}Ur(o,m),j=m;for(y in j)if(j.hasOwnProperty(y)){var V=j[y];y==="style"?sa(n,V):y==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&fc(n,V)):y==="children"?typeof V=="string"?(o!=="textarea"||V!=="")&&fi(n,V):typeof V=="number"&&fi(n,""+V):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(a.hasOwnProperty(y)?V!=null&&y==="onScroll"&&lt("scroll",n):V!=null&&Q(n,y,V,_))}switch(o){case"input":en(n),ko(n,h,!1);break;case"textarea":en(n),hs(n);break;case"option":h.value!=null&&n.setAttribute("value",""+ze(h.value));break;case"select":n.multiple=!!h.multiple,y=h.value,y!=null?Fr(n,!!h.multiple,y,!1):h.defaultValue!=null&&Fr(n,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(n.onclick=Uc)}switch(o){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Yt(i),null;case 6:if(n&&i.stateNode!=null)my(n,i,n.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(o=Pi(il.current),Pi(xn.current),Gc(i)){if(h=i.stateNode,o=i.memoizedProps,h[yn]=i,(y=h.nodeValue!==o)&&(n=vr,n!==null))switch(n.tag){case 3:Fc(h.nodeValue,o,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Fc(h.nodeValue,o,(n.mode&1)!==0)}y&&(i.flags|=4)}else h=(o.nodeType===9?o:o.ownerDocument).createTextNode(h),h[yn]=i,i.stateNode=h}return Yt(i),null;case 13:if(ct(ft),h=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(dt&&wr!==null&&(i.mode&1)!==0&&(i.flags&128)===0)yg(),Pa(),i.flags|=98560,y=!1;else if(y=Gc(i),h!==null&&h.dehydrated!==null){if(n===null){if(!y)throw Error(t(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[yn]=i}else Pa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Yt(i),y=!1}else qr!==null&&(pf(qr),qr=null),y=!0;if(!y)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=o,i):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(ft.current&1)!==0?Rt===0&&(Rt=3):xf())),i.updateQueue!==null&&(i.flags|=4),Yt(i),null);case 4:return Ma(),nf(n,i),n===null&&Xo(i.stateNode.containerInfo),Yt(i),null;case 10:return Rh(i.type._context),Yt(i),null;case 17:return or(i.type)&&$c(),Yt(i),null;case 19:if(ct(ft),y=i.memoizedState,y===null)return Yt(i),null;if(h=(i.flags&128)!==0,_=y.rendering,_===null)if(h)ul(y,!1);else{if(Rt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(_=Zc(n),_!==null){for(i.flags|=128,ul(y,!1),h=_.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=o,o=i.child;o!==null;)y=o,n=h,y.flags&=14680066,_=y.alternate,_===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=_.childLanes,y.lanes=_.lanes,y.child=_.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=_.memoizedProps,y.memoizedState=_.memoizedState,y.updateQueue=_.updateQueue,y.type=_.type,n=_.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),o=o.sibling;return st(ft,ft.current&1|2),i.child}n=n.sibling}y.tail!==null&&ot()>Ua&&(i.flags|=128,h=!0,ul(y,!1),i.lanes=4194304)}else{if(!h)if(n=Zc(_),n!==null){if(i.flags|=128,h=!0,o=n.updateQueue,o!==null&&(i.updateQueue=o,i.flags|=4),ul(y,!0),y.tail===null&&y.tailMode==="hidden"&&!_.alternate&&!dt)return Yt(i),null}else 2*ot()-y.renderingStartTime>Ua&&o!==1073741824&&(i.flags|=128,h=!0,ul(y,!1),i.lanes=4194304);y.isBackwards?(_.sibling=i.child,i.child=_):(o=y.last,o!==null?o.sibling=_:i.child=_,y.last=_)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=ot(),i.sibling=null,o=ft.current,st(ft,h?o&1|2:o&1),i):(Yt(i),null);case 22:case 23:return yf(),h=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(_r&1073741824)!==0&&(Yt(i),i.subtreeFlags&6&&(i.flags|=8192)):Yt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function uk(n,i){switch(Th(i),i.tag){case 1:return or(i.type)&&$c(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Ma(),ct(ar),ct(Kt),Oh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Mh(i),null;case 13:if(ct(ft),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Pa()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ct(ft),null;case 4:return Ma(),null;case 10:return Rh(i.type._context),null;case 22:case 23:return yf(),null;case 24:return null;default:return null}}var lu=!1,Jt=!1,dk=typeof WeakSet=="function"?WeakSet:Set,me=null;function Oa(n,i){var o=n.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(h){yt(n,i,h)}else o.current=null}function sf(n,i,o){try{o()}catch(h){yt(n,i,h)}}var py=!1;function hk(n,i){if(gh=Fn,n=Gp(),lh(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var _=0,j=-1,V=-1,W=0,te=0,re=n,ee=null;t:for(;;){for(var ue;re!==o||m!==0&&re.nodeType!==3||(j=_+m),re!==y||h!==0&&re.nodeType!==3||(V=_+h),re.nodeType===3&&(_+=re.nodeValue.length),(ue=re.firstChild)!==null;)ee=re,re=ue;for(;;){if(re===n)break t;if(ee===o&&++W===m&&(j=_),ee===y&&++te===h&&(V=_),(ue=re.nextSibling)!==null)break;re=ee,ee=re.parentNode}re=ue}o=j===-1||V===-1?null:{start:j,end:V}}else o=null}o=o||{start:0,end:0}}else o=null;for(yh={focusedElem:n,selectionRange:o},Fn=!1,me=i;me!==null;)if(i=me,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,me=n;else for(;me!==null;){i=me;try{var ge=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ve=ge.memoizedProps,wt=ge.memoizedState,B=i.stateNode,F=B.getSnapshotBeforeUpdate(i.elementType===i.type?ve:Hr(i.type,ve),wt);B.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var H=i.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){yt(i,i.return,ne)}if(n=i.sibling,n!==null){n.return=i.return,me=n;break}me=i.return}return ge=py,py=!1,ge}function dl(n,i,o){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&n)===n){var y=m.destroy;m.destroy=void 0,y!==void 0&&sf(i,o,y)}m=m.next}while(m!==h)}}function cu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&n)===n){var h=o.create;o.destroy=h()}o=o.next}while(o!==i)}}function af(n){var i=n.ref;if(i!==null){var o=n.stateNode;switch(n.tag){case 5:n=o;break;default:n=o}typeof i=="function"?i(n):i.current=n}}function gy(n){var i=n.alternate;i!==null&&(n.alternate=null,gy(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[yn],delete i[el],delete i[_h],delete i[Kb],delete i[Qb])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function yy(n){return n.tag===5||n.tag===3||n.tag===4}function xy(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||yy(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function of(n,i,o){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?o.nodeType===8?o.parentNode.insertBefore(n,i):o.insertBefore(n,i):(o.nodeType===8?(i=o.parentNode,i.insertBefore(n,o)):(i=o,i.appendChild(n)),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Uc));else if(h!==4&&(n=n.child,n!==null))for(of(n,i,o),n=n.sibling;n!==null;)of(n,i,o),n=n.sibling}function lf(n,i,o){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(lf(n,i,o),n=n.sibling;n!==null;)lf(n,i,o),n=n.sibling}var zt=null,Wr=!1;function Ds(n,i,o){for(o=o.child;o!==null;)vy(n,i,o),o=o.sibling}function vy(n,i,o){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(xi,o)}catch{}switch(o.tag){case 5:Jt||Oa(o,i);case 6:var h=zt,m=Wr;zt=null,Ds(n,i,o),zt=h,Wr=m,zt!==null&&(Wr?(n=zt,o=o.stateNode,n.nodeType===8?n.parentNode.removeChild(o):n.removeChild(o)):zt.removeChild(o.stateNode));break;case 18:zt!==null&&(Wr?(n=zt,o=o.stateNode,n.nodeType===8?wh(n.parentNode,o):n.nodeType===1&&wh(n,o),Es(n)):wh(zt,o.stateNode));break;case 4:h=zt,m=Wr,zt=o.stateNode.containerInfo,Wr=!0,Ds(n,i,o),zt=h,Wr=m;break;case 0:case 11:case 14:case 15:if(!Jt&&(h=o.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var y=m,_=y.destroy;y=y.tag,_!==void 0&&((y&2)!==0||(y&4)!==0)&&sf(o,i,_),m=m.next}while(m!==h)}Ds(n,i,o);break;case 1:if(!Jt&&(Oa(o,i),h=o.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=o.memoizedProps,h.state=o.memoizedState,h.componentWillUnmount()}catch(j){yt(o,i,j)}Ds(n,i,o);break;case 21:Ds(n,i,o);break;case 22:o.mode&1?(Jt=(h=Jt)||o.memoizedState!==null,Ds(n,i,o),Jt=h):Ds(n,i,o);break;default:Ds(n,i,o)}}function wy(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var o=n.stateNode;o===null&&(o=n.stateNode=new dk),i.forEach(function(h){var m=_k.bind(null,n,h);o.has(h)||(o.add(h),h.then(m,m))})}}function Gr(n,i){var o=i.deletions;if(o!==null)for(var h=0;h<o.length;h++){var m=o[h];try{var y=n,_=i,j=_;e:for(;j!==null;){switch(j.tag){case 5:zt=j.stateNode,Wr=!1;break e;case 3:zt=j.stateNode.containerInfo,Wr=!0;break e;case 4:zt=j.stateNode.containerInfo,Wr=!0;break e}j=j.return}if(zt===null)throw Error(t(160));vy(y,_,m),zt=null,Wr=!1;var V=m.alternate;V!==null&&(V.return=null),m.return=null}catch(W){yt(m,i,W)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)_y(i,n),i=i.sibling}function _y(n,i){var o=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Gr(i,n),wn(n),h&4){try{dl(3,n,n.return),cu(3,n)}catch(ve){yt(n,n.return,ve)}try{dl(5,n,n.return)}catch(ve){yt(n,n.return,ve)}}break;case 1:Gr(i,n),wn(n),h&512&&o!==null&&Oa(o,o.return);break;case 5:if(Gr(i,n),wn(n),h&512&&o!==null&&Oa(o,o.return),n.flags&32){var m=n.stateNode;try{fi(m,"")}catch(ve){yt(n,n.return,ve)}}if(h&4&&(m=n.stateNode,m!=null)){var y=n.memoizedProps,_=o!==null?o.memoizedProps:y,j=n.type,V=n.updateQueue;if(n.updateQueue=null,V!==null)try{j==="input"&&y.type==="radio"&&y.name!=null&&ra(m,y),ia(j,_);var W=ia(j,y);for(_=0;_<V.length;_+=2){var te=V[_],re=V[_+1];te==="style"?sa(m,re):te==="dangerouslySetInnerHTML"?fc(m,re):te==="children"?fi(m,re):Q(m,te,re,W)}switch(j){case"input":hi(m,y);break;case"textarea":hc(m,y);break;case"select":var ee=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var ue=y.value;ue!=null?Fr(m,!!y.multiple,ue,!1):ee!==!!y.multiple&&(y.defaultValue!=null?Fr(m,!!y.multiple,y.defaultValue,!0):Fr(m,!!y.multiple,y.multiple?[]:"",!1))}m[el]=y}catch(ve){yt(n,n.return,ve)}}break;case 6:if(Gr(i,n),wn(n),h&4){if(n.stateNode===null)throw Error(t(162));m=n.stateNode,y=n.memoizedProps;try{m.nodeValue=y}catch(ve){yt(n,n.return,ve)}}break;case 3:if(Gr(i,n),wn(n),h&4&&o!==null&&o.memoizedState.isDehydrated)try{Es(i.containerInfo)}catch(ve){yt(n,n.return,ve)}break;case 4:Gr(i,n),wn(n);break;case 13:Gr(i,n),wn(n),m=n.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(df=ot())),h&4&&wy(n);break;case 22:if(te=o!==null&&o.memoizedState!==null,n.mode&1?(Jt=(W=Jt)||te,Gr(i,n),Jt=W):Gr(i,n),wn(n),h&8192){if(W=n.memoizedState!==null,(n.stateNode.isHidden=W)&&!te&&(n.mode&1)!==0)for(me=n,te=n.child;te!==null;){for(re=me=te;me!==null;){switch(ee=me,ue=ee.child,ee.tag){case 0:case 11:case 14:case 15:dl(4,ee,ee.return);break;case 1:Oa(ee,ee.return);var ge=ee.stateNode;if(typeof ge.componentWillUnmount=="function"){h=ee,o=ee.return;try{i=h,ge.props=i.memoizedProps,ge.state=i.memoizedState,ge.componentWillUnmount()}catch(ve){yt(h,o,ve)}}break;case 5:Oa(ee,ee.return);break;case 22:if(ee.memoizedState!==null){Ey(re);continue}}ue!==null?(ue.return=ee,me=ue):Ey(re)}te=te.sibling}e:for(te=null,re=n;;){if(re.tag===5){if(te===null){te=re;try{m=re.stateNode,W?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(j=re.stateNode,V=re.memoizedProps.style,_=V!=null&&V.hasOwnProperty("display")?V.display:null,j.style.display=ps("display",_))}catch(ve){yt(n,n.return,ve)}}}else if(re.tag===6){if(te===null)try{re.stateNode.nodeValue=W?"":re.memoizedProps}catch(ve){yt(n,n.return,ve)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===n)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===n)break e;for(;re.sibling===null;){if(re.return===null||re.return===n)break e;te===re&&(te=null),re=re.return}te===re&&(te=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:Gr(i,n),wn(n),h&4&&wy(n);break;case 21:break;default:Gr(i,n),wn(n)}}function wn(n){var i=n.flags;if(i&2){try{e:{for(var o=n.return;o!==null;){if(yy(o)){var h=o;break e}o=o.return}throw Error(t(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(fi(m,""),h.flags&=-33);var y=xy(n);lf(n,y,m);break;case 3:case 4:var _=h.stateNode.containerInfo,j=xy(n);of(n,j,_);break;default:throw Error(t(161))}}catch(V){yt(n,n.return,V)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function fk(n,i,o){me=n,by(n)}function by(n,i,o){for(var h=(n.mode&1)!==0;me!==null;){var m=me,y=m.child;if(m.tag===22&&h){var _=m.memoizedState!==null||lu;if(!_){var j=m.alternate,V=j!==null&&j.memoizedState!==null||Jt;j=lu;var W=Jt;if(lu=_,(Jt=V)&&!W)for(me=m;me!==null;)_=me,V=_.child,_.tag===22&&_.memoizedState!==null?Ty(m):V!==null?(V.return=_,me=V):Ty(m);for(;y!==null;)me=y,by(y),y=y.sibling;me=m,lu=j,Jt=W}ky(n)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,me=y):ky(n)}}function ky(n){for(;me!==null;){var i=me;if((i.flags&8772)!==0){var o=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Jt||cu(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!Jt)if(o===null)h.componentDidMount();else{var m=i.elementType===i.type?o.memoizedProps:Hr(i.type,o.memoizedProps);h.componentDidUpdate(m,o.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=i.updateQueue;y!==null&&Eg(i,y,h);break;case 3:var _=i.updateQueue;if(_!==null){if(o=null,i.child!==null)switch(i.child.tag){case 5:o=i.child.stateNode;break;case 1:o=i.child.stateNode}Eg(i,_,o)}break;case 5:var j=i.stateNode;if(o===null&&i.flags&4){o=j;var V=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&o.focus();break;case"img":V.src&&(o.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var W=i.alternate;if(W!==null){var te=W.memoizedState;if(te!==null){var re=te.dehydrated;re!==null&&Es(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Jt||i.flags&512&&af(i)}catch(ee){yt(i,i.return,ee)}}if(i===n){me=null;break}if(o=i.sibling,o!==null){o.return=i.return,me=o;break}me=i.return}}function Ey(n){for(;me!==null;){var i=me;if(i===n){me=null;break}var o=i.sibling;if(o!==null){o.return=i.return,me=o;break}me=i.return}}function Ty(n){for(;me!==null;){var i=me;try{switch(i.tag){case 0:case 11:case 15:var o=i.return;try{cu(4,i)}catch(V){yt(i,o,V)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var m=i.return;try{h.componentDidMount()}catch(V){yt(i,m,V)}}var y=i.return;try{af(i)}catch(V){yt(i,y,V)}break;case 5:var _=i.return;try{af(i)}catch(V){yt(i,_,V)}}}catch(V){yt(i,i.return,V)}if(i===n){me=null;break}var j=i.sibling;if(j!==null){j.return=i.return,me=j;break}me=i.return}}var mk=Math.ceil,uu=fe.ReactCurrentDispatcher,cf=fe.ReactCurrentOwner,Rr=fe.ReactCurrentBatchConfig,Ke=0,Lt=null,It=null,$t=0,_r=0,Fa=As(0),Rt=0,hl=null,Di=0,du=0,uf=0,fl=null,cr=null,df=0,Ua=1/0,Qn=null,hu=!1,hf=null,Ls=null,fu=!1,Ms=null,mu=0,ml=0,ff=null,pu=-1,gu=0;function nr(){return(Ke&6)!==0?ot():pu!==-1?pu:pu=ot()}function Vs(n){return(n.mode&1)===0?1:(Ke&2)!==0&&$t!==0?$t&-$t:Jb.transition!==null?(gu===0&&(gu=Lo()),gu):(n=He,n!==0||(n=window.event,n=n===void 0?16:pa(n.type)),n)}function Kr(n,i,o,h){if(50<ml)throw ml=0,ff=null,Error(t(185));bi(n,o,h),((Ke&2)===0||n!==Lt)&&(n===Lt&&((Ke&2)===0&&(du|=o),Rt===4&&Os(n,$t)),ur(n,h),o===1&&Ke===0&&(i.mode&1)===0&&(Ua=ot()+500,qc&&Rs()))}function ur(n,i){var o=n.callbackNode;_i(n,i);var h=Mn(n,n===Lt?$t:0);if(h===0)o!==null&&la(o),n.callbackNode=null,n.callbackPriority=0;else if(i=h&-h,n.callbackPriority!==i){if(o!=null&&la(o),i===1)n.tag===0?Yb(Ny.bind(null,n)):hg(Ny.bind(null,n)),Wb(function(){(Ke&6)===0&&Rs()}),o=null;else{switch(on(h)){case 1:o=ca;break;case 4:o=Po;break;case 16:o=yi;break;case 536870912:o=ua;break;default:o=yi}o=Ly(o,Iy.bind(null,n))}n.callbackPriority=i,n.callbackNode=o}}function Iy(n,i){if(pu=-1,gu=0,(Ke&6)!==0)throw Error(t(327));var o=n.callbackNode;if(za()&&n.callbackNode!==o)return null;var h=Mn(n,n===Lt?$t:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||i)i=yu(n,h);else{i=h;var m=Ke;Ke|=2;var y=Ay();(Lt!==n||$t!==i)&&(Qn=null,Ua=ot()+500,Mi(n,i));do try{yk();break}catch(j){Sy(n,j)}while(!0);Ch(),uu.current=y,Ke=m,It!==null?i=0:(Lt=null,$t=0,i=Rt)}if(i!==0){if(i===2&&(m=Do(n),m!==0&&(h=m,i=mf(n,m))),i===1)throw o=hl,Mi(n,0),Os(n,h),ur(n,ot()),o;if(i===6)Os(n,h);else{if(m=n.current.alternate,(h&30)===0&&!pk(m)&&(i=yu(n,h),i===2&&(y=Do(n),y!==0&&(h=y,i=mf(n,y))),i===1))throw o=hl,Mi(n,0),Os(n,h),ur(n,ot()),o;switch(n.finishedWork=m,n.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:Vi(n,cr,Qn);break;case 3:if(Os(n,h),(h&130023424)===h&&(i=df+500-ot(),10<i)){if(Mn(n,0)!==0)break;if(m=n.suspendedLanes,(m&h)!==h){nr(),n.pingedLanes|=n.suspendedLanes&m;break}n.timeoutHandle=vh(Vi.bind(null,n,cr,Qn),i);break}Vi(n,cr,Qn);break;case 4:if(Os(n,h),(h&4194240)===h)break;for(i=n.eventTimes,m=-1;0<h;){var _=31-mr(h);y=1<<_,_=i[_],_>m&&(m=_),h&=~y}if(h=m,h=ot()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*mk(h/1960))-h,10<h){n.timeoutHandle=vh(Vi.bind(null,n,cr,Qn),h);break}Vi(n,cr,Qn);break;case 5:Vi(n,cr,Qn);break;default:throw Error(t(329))}}}return ur(n,ot()),n.callbackNode===o?Iy.bind(null,n):null}function mf(n,i){var o=fl;return n.current.memoizedState.isDehydrated&&(Mi(n,i).flags|=256),n=yu(n,i),n!==2&&(i=cr,cr=o,i!==null&&pf(i)),n}function pf(n){cr===null?cr=n:cr.push.apply(cr,n)}function pk(n){for(var i=n;;){if(i.flags&16384){var o=i.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var h=0;h<o.length;h++){var m=o[h],y=m.getSnapshot;m=m.value;try{if(!Br(y(),m))return!1}catch{return!1}}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Os(n,i){for(i&=~uf,i&=~du,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var o=31-mr(i),h=1<<o;n[o]=-1,i&=~h}}function Ny(n){if((Ke&6)!==0)throw Error(t(327));za();var i=Mn(n,0);if((i&1)===0)return ur(n,ot()),null;var o=yu(n,i);if(n.tag!==0&&o===2){var h=Do(n);h!==0&&(i=h,o=mf(n,h))}if(o===1)throw o=hl,Mi(n,0),Os(n,i),ur(n,ot()),o;if(o===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Vi(n,cr,Qn),ur(n,ot()),null}function gf(n,i){var o=Ke;Ke|=1;try{return n(i)}finally{Ke=o,Ke===0&&(Ua=ot()+500,qc&&Rs())}}function Li(n){Ms!==null&&Ms.tag===0&&(Ke&6)===0&&za();var i=Ke;Ke|=1;var o=Rr.transition,h=He;try{if(Rr.transition=null,He=1,n)return n()}finally{He=h,Rr.transition=o,Ke=i,(Ke&6)===0&&Rs()}}function yf(){_r=Fa.current,ct(Fa)}function Mi(n,i){n.finishedWork=null,n.finishedLanes=0;var o=n.timeoutHandle;if(o!==-1&&(n.timeoutHandle=-1,Hb(o)),It!==null)for(o=It.return;o!==null;){var h=o;switch(Th(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&$c();break;case 3:Ma(),ct(ar),ct(Kt),Oh();break;case 5:Mh(h);break;case 4:Ma();break;case 13:ct(ft);break;case 19:ct(ft);break;case 10:Rh(h.type._context);break;case 22:case 23:yf()}o=o.return}if(Lt=n,It=n=Fs(n.current,null),$t=_r=i,Rt=0,hl=null,uf=du=Di=0,cr=fl=null,Ri!==null){for(i=0;i<Ri.length;i++)if(o=Ri[i],h=o.interleaved,h!==null){o.interleaved=null;var m=h.next,y=o.pending;if(y!==null){var _=y.next;y.next=m,h.next=_}o.pending=h}Ri=null}return n}function Sy(n,i){do{var o=It;try{if(Ch(),eu.current=su,tu){for(var h=mt.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}tu=!1}if(ji=0,Dt=Ct=mt=null,al=!1,ol=0,cf.current=null,o===null||o.return===null){Rt=1,hl=i,It=null;break}e:{var y=n,_=o.return,j=o,V=i;if(i=$t,j.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var W=V,te=j,re=te.tag;if((te.mode&1)===0&&(re===0||re===11||re===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var ue=Zg(_);if(ue!==null){ue.flags&=-257,ey(ue,_,j,y,i),ue.mode&1&&Xg(y,W,i),i=ue,V=W;var ge=i.updateQueue;if(ge===null){var ve=new Set;ve.add(V),i.updateQueue=ve}else ge.add(V);break e}else{if((i&1)===0){Xg(y,W,i),xf();break e}V=Error(t(426))}}else if(dt&&j.mode&1){var wt=Zg(_);if(wt!==null){(wt.flags&65536)===0&&(wt.flags|=256),ey(wt,_,j,y,i),Sh(Va(V,j));break e}}y=V=Va(V,j),Rt!==4&&(Rt=2),fl===null?fl=[y]:fl.push(y),y=_;do{switch(y.tag){case 3:y.flags|=65536,i&=-i,y.lanes|=i;var B=Yg(y,V,i);kg(y,B);break e;case 1:j=V;var F=y.type,H=y.stateNode;if((y.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Ls===null||!Ls.has(H)))){y.flags|=65536,i&=-i,y.lanes|=i;var ne=Jg(y,j,i);kg(y,ne);break e}}y=y.return}while(y!==null)}Ry(o)}catch(_e){i=_e,It===o&&o!==null&&(It=o=o.return);continue}break}while(!0)}function Ay(){var n=uu.current;return uu.current=su,n===null?su:n}function xf(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Lt===null||(Di&268435455)===0&&(du&268435455)===0||Os(Lt,$t)}function yu(n,i){var o=Ke;Ke|=2;var h=Ay();(Lt!==n||$t!==i)&&(Qn=null,Mi(n,i));do try{gk();break}catch(m){Sy(n,m)}while(!0);if(Ch(),Ke=o,uu.current=h,It!==null)throw Error(t(261));return Lt=null,$t=0,Rt}function gk(){for(;It!==null;)Cy(It)}function yk(){for(;It!==null&&!gi();)Cy(It)}function Cy(n){var i=Dy(n.alternate,n,_r);n.memoizedProps=n.pendingProps,i===null?Ry(n):It=i,cf.current=null}function Ry(n){var i=n;do{var o=i.alternate;if(n=i.return,(i.flags&32768)===0){if(o=ck(o,i,_r),o!==null){It=o;return}}else{if(o=uk(o,i),o!==null){o.flags&=32767,It=o;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Rt=6,It=null;return}}if(i=i.sibling,i!==null){It=i;return}It=i=n}while(i!==null);Rt===0&&(Rt=5)}function Vi(n,i,o){var h=He,m=Rr.transition;try{Rr.transition=null,He=1,xk(n,i,o,h)}finally{Rr.transition=m,He=h}return null}function xk(n,i,o,h){do za();while(Ms!==null);if((Ke&6)!==0)throw Error(t(327));o=n.finishedWork;var m=n.finishedLanes;if(o===null)return null;if(n.finishedWork=null,n.finishedLanes=0,o===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var y=o.lanes|o.childLanes;if(nh(n,y),n===Lt&&(It=Lt=null,$t=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||fu||(fu=!0,Ly(yi,function(){return za(),null})),y=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||y){y=Rr.transition,Rr.transition=null;var _=He;He=1;var j=Ke;Ke|=4,cf.current=null,hk(n,o),_y(o,n),Ob(yh),Fn=!!gh,yh=gh=null,n.current=o,fk(o),Ln(),Ke=j,He=_,Rr.transition=y}else n.current=o;if(fu&&(fu=!1,Ms=n,mu=m),y=n.pendingLanes,y===0&&(Ls=null),Ec(o.stateNode),ur(n,ot()),i!==null)for(h=n.onRecoverableError,o=0;o<i.length;o++)m=i[o],h(m.value,{componentStack:m.stack,digest:m.digest});if(hu)throw hu=!1,n=hf,hf=null,n;return(mu&1)!==0&&n.tag!==0&&za(),y=n.pendingLanes,(y&1)!==0?n===ff?ml++:(ml=0,ff=n):ml=0,Rs(),null}function za(){if(Ms!==null){var n=on(mu),i=Rr.transition,o=He;try{if(Rr.transition=null,He=16>n?16:n,Ms===null)var h=!1;else{if(n=Ms,Ms=null,mu=0,(Ke&6)!==0)throw Error(t(331));var m=Ke;for(Ke|=4,me=n.current;me!==null;){var y=me,_=y.child;if((me.flags&16)!==0){var j=y.deletions;if(j!==null){for(var V=0;V<j.length;V++){var W=j[V];for(me=W;me!==null;){var te=me;switch(te.tag){case 0:case 11:case 15:dl(8,te,y)}var re=te.child;if(re!==null)re.return=te,me=re;else for(;me!==null;){te=me;var ee=te.sibling,ue=te.return;if(gy(te),te===W){me=null;break}if(ee!==null){ee.return=ue,me=ee;break}me=ue}}}var ge=y.alternate;if(ge!==null){var ve=ge.child;if(ve!==null){ge.child=null;do{var wt=ve.sibling;ve.sibling=null,ve=wt}while(ve!==null)}}me=y}}if((y.subtreeFlags&2064)!==0&&_!==null)_.return=y,me=_;else e:for(;me!==null;){if(y=me,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:dl(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,me=B;break e}me=y.return}}var F=n.current;for(me=F;me!==null;){_=me;var H=_.child;if((_.subtreeFlags&2064)!==0&&H!==null)H.return=_,me=H;else e:for(_=F;me!==null;){if(j=me,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:cu(9,j)}}catch(_e){yt(j,j.return,_e)}if(j===_){me=null;break e}var ne=j.sibling;if(ne!==null){ne.return=j.return,me=ne;break e}me=j.return}}if(Ke=m,Rs(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(xi,n)}catch{}h=!0}return h}finally{He=o,Rr.transition=i}}return!1}function Py(n,i,o){i=Va(o,i),i=Yg(n,i,1),n=js(n,i,1),i=nr(),n!==null&&(bi(n,1,i),ur(n,i))}function yt(n,i,o){if(n.tag===3)Py(n,n,o);else for(;i!==null;){if(i.tag===3){Py(i,n,o);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ls===null||!Ls.has(h))){n=Va(o,n),n=Jg(i,n,1),i=js(i,n,1),n=nr(),i!==null&&(bi(i,1,n),ur(i,n));break}}i=i.return}}function vk(n,i,o){var h=n.pingCache;h!==null&&h.delete(i),i=nr(),n.pingedLanes|=n.suspendedLanes&o,Lt===n&&($t&o)===o&&(Rt===4||Rt===3&&($t&130023424)===$t&&500>ot()-df?Mi(n,0):uf|=o),ur(n,i)}function jy(n,i){i===0&&((n.mode&1)===0?i=1:(i=_s,_s<<=1,(_s&130023424)===0&&(_s=4194304)));var o=nr();n=Wn(n,i),n!==null&&(bi(n,i,o),ur(n,o))}function wk(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),jy(n,o)}function _k(n,i){var o=0;switch(n.tag){case 13:var h=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),jy(n,o)}var Dy;Dy=function(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps||ar.current)lr=!0;else{if((n.lanes&o)===0&&(i.flags&128)===0)return lr=!1,lk(n,i,o);lr=(n.flags&131072)!==0}else lr=!1,dt&&(i.flags&1048576)!==0&&fg(i,Wc,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;ou(n,i),n=i.pendingProps;var m=Aa(i,Kt.current);La(i,o),m=zh(null,i,h,n,m,o);var y=$h();return i.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,or(h)?(y=!0,Bc(i)):y=!1,i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Dh(i),m.updater=iu,i.stateNode=m,m._reactInternals=i,Kh(i,h,n,o),i=Xh(null,i,h,!0,y,o)):(i.tag=0,dt&&y&&Eh(i),rr(null,i,m,o),i=i.child),i;case 16:h=i.elementType;e:{switch(ou(n,i),n=i.pendingProps,m=h._init,h=m(h._payload),i.type=h,m=i.tag=kk(h),n=Hr(h,n),m){case 0:i=Jh(null,i,h,n,o);break e;case 1:i=ay(null,i,h,n,o);break e;case 11:i=ty(null,i,h,n,o);break e;case 14:i=ry(null,i,h,Hr(h.type,n),o);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,m=i.pendingProps,m=i.elementType===h?m:Hr(h,m),Jh(n,i,h,m,o);case 1:return h=i.type,m=i.pendingProps,m=i.elementType===h?m:Hr(h,m),ay(n,i,h,m,o);case 3:e:{if(oy(i),n===null)throw Error(t(387));h=i.pendingProps,y=i.memoizedState,m=y.element,bg(n,i),Xc(i,h,null,o);var _=i.memoizedState;if(h=_.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){m=Va(Error(t(423)),i),i=ly(n,i,h,o,m);break e}else if(h!==m){m=Va(Error(t(424)),i),i=ly(n,i,h,o,m);break e}else for(wr=Ss(i.stateNode.containerInfo.firstChild),vr=i,dt=!0,qr=null,o=wg(i,null,h,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Pa(),h===m){i=Kn(n,i,o);break e}rr(n,i,h,o)}i=i.child}return i;case 5:return Tg(i),n===null&&Nh(i),h=i.type,m=i.pendingProps,y=n!==null?n.memoizedProps:null,_=m.children,xh(h,m)?_=null:y!==null&&xh(h,y)&&(i.flags|=32),iy(n,i),rr(n,i,_,o),i.child;case 6:return n===null&&Nh(i),null;case 13:return cy(n,i,o);case 4:return Lh(i,i.stateNode.containerInfo),h=i.pendingProps,n===null?i.child=ja(i,null,h,o):rr(n,i,h,o),i.child;case 11:return h=i.type,m=i.pendingProps,m=i.elementType===h?m:Hr(h,m),ty(n,i,h,m,o);case 7:return rr(n,i,i.pendingProps,o),i.child;case 8:return rr(n,i,i.pendingProps.children,o),i.child;case 12:return rr(n,i,i.pendingProps.children,o),i.child;case 10:e:{if(h=i.type._context,m=i.pendingProps,y=i.memoizedProps,_=m.value,st(Qc,h._currentValue),h._currentValue=_,y!==null)if(Br(y.value,_)){if(y.children===m.children&&!ar.current){i=Kn(n,i,o);break e}}else for(y=i.child,y!==null&&(y.return=i);y!==null;){var j=y.dependencies;if(j!==null){_=y.child;for(var V=j.firstContext;V!==null;){if(V.context===h){if(y.tag===1){V=Gn(-1,o&-o),V.tag=2;var W=y.updateQueue;if(W!==null){W=W.shared;var te=W.pending;te===null?V.next=V:(V.next=te.next,te.next=V),W.pending=V}}y.lanes|=o,V=y.alternate,V!==null&&(V.lanes|=o),Ph(y.return,o,i),j.lanes|=o;break}V=V.next}}else if(y.tag===10)_=y.type===i.type?null:y.child;else if(y.tag===18){if(_=y.return,_===null)throw Error(t(341));_.lanes|=o,j=_.alternate,j!==null&&(j.lanes|=o),Ph(_,o,i),_=y.sibling}else _=y.child;if(_!==null)_.return=y;else for(_=y;_!==null;){if(_===i){_=null;break}if(y=_.sibling,y!==null){y.return=_.return,_=y;break}_=_.return}y=_}rr(n,i,m.children,o),i=i.child}return i;case 9:return m=i.type,h=i.pendingProps.children,La(i,o),m=Ar(m),h=h(m),i.flags|=1,rr(n,i,h,o),i.child;case 14:return h=i.type,m=Hr(h,i.pendingProps),m=Hr(h.type,m),ry(n,i,h,m,o);case 15:return ny(n,i,i.type,i.pendingProps,o);case 17:return h=i.type,m=i.pendingProps,m=i.elementType===h?m:Hr(h,m),ou(n,i),i.tag=1,or(h)?(n=!0,Bc(i)):n=!1,La(i,o),Kg(i,h,m),Kh(i,h,m,o),Xh(null,i,h,!0,n,o);case 19:return dy(n,i,o);case 22:return sy(n,i,o)}throw Error(t(156,i.tag))};function Ly(n,i){return Ro(n,i)}function bk(n,i,o,h){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(n,i,o,h){return new bk(n,i,o,h)}function vf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function kk(n){if(typeof n=="function")return vf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M)return 11;if(n===we)return 14}return 2}function Fs(n,i){var o=n.alternate;return o===null?(o=Pr(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&14680064,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o}function xu(n,i,o,h,m,y){var _=2;if(h=n,typeof n=="function")vf(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case I:return Oi(o.children,m,y,i);case E:_=8,m|=8;break;case R:return n=Pr(12,o,i,m|2),n.elementType=R,n.lanes=y,n;case A:return n=Pr(13,o,i,m),n.elementType=A,n.lanes=y,n;case ie:return n=Pr(19,o,i,m),n.elementType=ie,n.lanes=y,n;case Me:return vu(o,m,y,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case C:_=10;break e;case S:_=9;break e;case M:_=11;break e;case we:_=14;break e;case Ce:_=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Pr(_,o,i,m),i.elementType=n,i.type=h,i.lanes=y,i}function Oi(n,i,o,h){return n=Pr(7,n,h,i),n.lanes=o,n}function vu(n,i,o,h){return n=Pr(22,n,h,i),n.elementType=Me,n.lanes=o,n.stateNode={isHidden:!1},n}function wf(n,i,o){return n=Pr(6,n,null,i),n.lanes=o,n}function _f(n,i,o){return i=Pr(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Ek(n,i,o,h,m){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mo(0),this.expirationTimes=Mo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mo(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function bf(n,i,o,h,m,y,_,j,V){return n=new Ek(n,i,o,j,V),i===1?(i=1,y===!0&&(i|=8)):i=0,y=Pr(3,null,null,i),n.current=y,y.stateNode=n,y.memoizedState={element:h,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dh(y),n}function Tk(n,i,o){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y,key:h==null?null:""+h,children:n,containerInfo:i,implementation:o}}function My(n){if(!n)return Cs;n=n._reactInternals;e:{if(zr(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(or(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var o=n.type;if(or(o))return ug(n,o,i)}return i}function Vy(n,i,o,h,m,y,_,j,V){return n=bf(o,h,!0,n,m,y,_,j,V),n.context=My(null),o=n.current,h=nr(),m=Vs(o),y=Gn(h,m),y.callback=i??null,js(o,y,m),n.current.lanes=m,bi(n,m,h),ur(n,h),n}function wu(n,i,o,h){var m=i.current,y=nr(),_=Vs(m);return o=My(o),i.context===null?i.context=o:i.pendingContext=o,i=Gn(y,_),i.payload={element:n},h=h===void 0?null:h,h!==null&&(i.callback=h),n=js(m,i,_),n!==null&&(Kr(n,m,_,y),Jc(n,m,_)),_}function _u(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Oy(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function kf(n,i){Oy(n,i),(n=n.alternate)&&Oy(n,i)}function Ik(){return null}var Fy=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ef(n){this._internalRoot=n}bu.prototype.render=Ef.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));wu(n,i,null,null)},bu.prototype.unmount=Ef.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Li(function(){wu(null,n,null,null)}),i[$n]=null}};function bu(n){this._internalRoot=n}bu.prototype.unstable_scheduleHydration=function(n){if(n){var i=Uo();n={blockedOn:null,target:n,priority:i};for(var o=0;o<pr.length&&i!==0&&i<pr[o].priority;o++);pr.splice(o,0,n),o===0&&fa(n)}};function Tf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ku(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Uy(){}function Nk(n,i,o,h,m){if(m){if(typeof h=="function"){var y=h;h=function(){var W=_u(_);y.call(W)}}var _=Vy(i,h,n,0,null,!1,!1,"",Uy);return n._reactRootContainer=_,n[$n]=_.current,Xo(n.nodeType===8?n.parentNode:n),Li(),_}for(;m=n.lastChild;)n.removeChild(m);if(typeof h=="function"){var j=h;h=function(){var W=_u(V);j.call(W)}}var V=bf(n,0,!1,null,null,!1,!1,"",Uy);return n._reactRootContainer=V,n[$n]=V.current,Xo(n.nodeType===8?n.parentNode:n),Li(function(){wu(i,V,o,h)}),V}function Eu(n,i,o,h,m){var y=o._reactRootContainer;if(y){var _=y;if(typeof m=="function"){var j=m;m=function(){var V=_u(_);j.call(V)}}wu(i,_,n,m)}else _=Nk(o,i,n,m,h);return _u(_)}Oo=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var o=Je(i.pendingLanes);o!==0&&(Vo(i,o|1),ur(i,ot()),(Ke&6)===0&&(Ua=ot()+500,Rs()))}break;case 13:Li(function(){var h=Wn(n,1);if(h!==null){var m=nr();Kr(h,n,1,m)}}),kf(n,1)}},da=function(n){if(n.tag===13){var i=Wn(n,134217728);if(i!==null){var o=nr();Kr(i,n,134217728,o)}kf(n,134217728)}},Fo=function(n){if(n.tag===13){var i=Vs(n),o=Wn(n,i);if(o!==null){var h=nr();Kr(o,n,i,h)}kf(n,i)}},Uo=function(){return He},zo=function(n,i){var o=He;try{return He=n,i()}finally{He=o}},Pn=function(n,i,o){switch(i){case"input":if(hi(n,o),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<o.length;i++){var h=o[i];if(h!==n&&h.form===n.form){var m=zc(h);if(!m)throw Error(t(90));tn(h),hi(h,m)}}}break;case"textarea":hc(n,o);break;case"select":i=o.value,i!=null&&Fr(n,!!o.multiple,i,!1)}},pc=gf,gc=Li;var Sk={usingClientEntryPoint:!1,Events:[tl,Na,zc,ys,xs,gf]},pl={findFiberByHostInstance:Ni,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ak={bundleType:pl.bundleType,version:pl.version,rendererPackageName:pl.rendererPackageName,rendererConfig:pl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=kc(n),n===null?null:n.stateNode},findFiberByHostInstance:pl.findFiberByHostInstance||Ik,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tu.isDisabled&&Tu.supportsFiber)try{xi=Tu.inject(Ak),fr=Tu}catch{}}return dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sk,dr.createPortal=function(n,i){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tf(i))throw Error(t(200));return Tk(n,i,null,o)},dr.createRoot=function(n,i){if(!Tf(n))throw Error(t(299));var o=!1,h="",m=Fy;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),i=bf(n,1,!1,null,null,o,!1,h,m),n[$n]=i.current,Xo(n.nodeType===8?n.parentNode:n),new Ef(i)},dr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=kc(i),n=n===null?null:n.stateNode,n},dr.flushSync=function(n){return Li(n)},dr.hydrate=function(n,i,o){if(!ku(i))throw Error(t(200));return Eu(null,n,i,!0,o)},dr.hydrateRoot=function(n,i,o){if(!Tf(n))throw Error(t(405));var h=o!=null&&o.hydratedSources||null,m=!1,y="",_=Fy;if(o!=null&&(o.unstable_strictMode===!0&&(m=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),i=Vy(i,null,n,1,o??null,m,!1,y,_),n[$n]=i.current,Xo(n),h)for(n=0;n<h.length;n++)o=h[n],m=o._getVersion,m=m(o._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[o,m]:i.mutableSourceEagerHydrationData.push(o,m);return new bu(i)},dr.render=function(n,i,o){if(!ku(i))throw Error(t(200));return Eu(null,n,i,!1,o)},dr.unmountComponentAtNode=function(n){if(!ku(n))throw Error(t(40));return n._reactRootContainer?(Li(function(){Eu(null,null,n,!1,function(){n._reactRootContainer=null,n[$n]=null})}),!0):!1},dr.unstable_batchedUpdates=gf,dr.unstable_renderSubtreeIntoContainer=function(n,i,o,h){if(!ku(o))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Eu(n,i,o,!1,h)},dr.version="18.3.1-next-f1338f8080-20240426",dr}var Ky;function Yx(){if(Ky)return Sf.exports;Ky=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Sf.exports=Ok(),Sf.exports}var Qy;function Fk(){if(Qy)return Iu;Qy=1;var r=Yx();return Iu.createRoot=r.createRoot,Iu.hydrateRoot=r.hydrateRoot,Iu}var Uk=Fk(),D=Tm();const zk=Pk(D),$k=Rk({__proto__:null,default:zk},[D]);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Yy="popstate";function Bk(r={}){function e(s,a){let{pathname:l,search:d,hash:f}=s.location;return Xf("",{pathname:l,search:d,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){return typeof a=="string"?a:Dl(a)}return Hk(e,t,null,r)}function ht(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Jr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qk(){return Math.random().toString(36).substring(2,10)}function Jy(r,e){return{usr:r.state,key:r.key,idx:e}}function Xf(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?co(e):e,state:t,key:e&&e.key||s||qk()}}function Dl({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function co(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function Hk(r,e,t,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,d=a.history,f="POP",p=null,g=v();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function v(){return(d.state||{idx:null}).idx}function b(){f="POP";let O=v(),z=O==null?null:O-g;g=O,p&&p({action:f,location:N.location,delta:z})}function k(O,z){f="PUSH";let $=Xf(N.location,O,z);g=v()+1;let Q=Jy($,g),fe=N.createHref($);try{d.pushState(Q,"",fe)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;a.location.assign(fe)}l&&p&&p({action:f,location:N.location,delta:1})}function P(O,z){f="REPLACE";let $=Xf(N.location,O,z);g=v();let Q=Jy($,g),fe=N.createHref($);d.replaceState(Q,"",fe),l&&p&&p({action:f,location:N.location,delta:0})}function L(O){return Wk(O)}let N={get action(){return f},get location(){return r(a,d)},listen(O){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(Yy,b),p=O,()=>{a.removeEventListener(Yy,b),p=null}},createHref(O){return e(a,O)},createURL:L,encodeLocation(O){let z=L(O);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:k,replace:P,go(O){return d.go(O)}};return N}function Wk(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ht(t,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:Dl(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Jx(r,e,t="/"){return Gk(r,e,t,!1)}function Gk(r,e,t,s){let a=typeof e=="string"?co(e):e,l=ts(a.pathname||"/",t);if(l==null)return null;let d=Xx(r);Kk(d);let f=null;for(let p=0;f==null&&p<d.length;++p){let g=iE(l);f=nE(d[p],g,s)}return f}function Xx(r,e=[],t=[],s="",a=!1){let l=(d,f,p=a,g)=>{let v={relativePath:g===void 0?d.path||"":g,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(s)&&p)return;ht(v.relativePath.startsWith(s),`Absolute route path "${v.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(s.length)}let b=Zn([s,v.relativePath]),k=t.concat(v);d.children&&d.children.length>0&&(ht(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Xx(d.children,e,k,b,p)),!(d.path==null&&!d.index)&&e.push({path:b,score:tE(b,d.index),routesMeta:k})};return r.forEach((d,f)=>{if(d.path===""||!d.path?.includes("?"))l(d,f);else for(let p of Zx(d.path))l(d,f,!0,p)}),e}function Zx(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let d=Zx(s.join("/")),f=[];return f.push(...d.map(p=>p===""?l:[l,p].join("/"))),a&&f.push(...d),f.map(p=>r.startsWith("/")&&p===""?"/":p)}function Kk(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:rE(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var Qk=/^:[\w-]+$/,Yk=3,Jk=2,Xk=1,Zk=10,eE=-2,Xy=r=>r==="*";function tE(r,e){let t=r.split("/"),s=t.length;return t.some(Xy)&&(s+=eE),e&&(s+=Jk),t.filter(a=>!Xy(a)).reduce((a,l)=>a+(Qk.test(l)?Yk:l===""?Xk:Zk),s)}function rE(r,e){return r.length===e.length&&r.slice(0,-1).every((s,a)=>s===e[a])?r[r.length-1]-e[e.length-1]:0}function nE(r,e,t=!1){let{routesMeta:s}=r,a={},l="/",d=[];for(let f=0;f<s.length;++f){let p=s[f],g=f===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",b=rd({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),k=p.route;if(!b&&g&&t&&!s[s.length-1].route.index&&(b=rd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!b)return null;Object.assign(a,b.params),d.push({params:a,pathname:Zn([l,b.pathname]),pathnameBase:cE(Zn([l,b.pathnameBase])),route:k}),b.pathnameBase!=="/"&&(l=Zn([l,b.pathnameBase]))}return d}function rd(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=sE(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let l=a[0],d=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:s.reduce((g,{paramName:v,isOptional:b},k)=>{if(v==="*"){let L=f[k]||"";d=l.slice(0,l.length-L.length).replace(/(.)\/+$/,"$1")}const P=f[k];return b&&!P?g[v]=void 0:g[v]=(P||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:d,pattern:r}}function sE(r,e=!1,t=!0){Jr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,p)=>(s.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function iE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function ts(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}var aE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function oE(r,e="/"){let{pathname:t,search:s="",hash:a=""}=typeof r=="string"?co(r):r,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=Zy(t.substring(1),"/"):l=Zy(t,e)):l=e,{pathname:l,search:uE(s),hash:dE(a)}}function Zy(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Rf(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lE(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Im(r){let e=lE(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Nm(r,e,t,s=!1){let a;typeof r=="string"?a=co(r):(a={...r},ht(!a.pathname||!a.pathname.includes("?"),Rf("?","pathname","search",a)),ht(!a.pathname||!a.pathname.includes("#"),Rf("#","pathname","hash",a)),ht(!a.search||!a.search.includes("#"),Rf("#","search","hash",a)));let l=r===""||a.pathname==="",d=l?"/":a.pathname,f;if(d==null)f=t;else{let b=e.length-1;if(!s&&d.startsWith("..")){let k=d.split("/");for(;k[0]==="..";)k.shift(),b-=1;a.pathname=k.join("/")}f=b>=0?e[b]:"/"}let p=oE(a,f),g=d&&d!=="/"&&d.endsWith("/"),v=(l||d===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var Zn=r=>r.join("/").replace(/\/\/+/g,"/"),cE=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),uE=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,dE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,hE=class{constructor(r,e,t,s=!1){this.status=r,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function fE(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function mE(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ev=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function tv(r,e){let t=r;if(typeof t!="string"||!aE.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,a=!1;if(ev)try{let l=new URL(window.location.href),d=t.startsWith("//")?new URL(l.protocol+t):new URL(t),f=ts(d.pathname,e);d.origin===l.origin&&f!=null?t=f+d.search+d.hash:a=!0}catch{Jr(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rv=["POST","PUT","PATCH","DELETE"];new Set(rv);var pE=["GET",...rv];new Set(pE);var uo=D.createContext(null);uo.displayName="DataRouter";var Id=D.createContext(null);Id.displayName="DataRouterState";var gE=D.createContext(!1),nv=D.createContext({isTransitioning:!1});nv.displayName="ViewTransition";var yE=D.createContext(new Map);yE.displayName="Fetchers";var xE=D.createContext(null);xE.displayName="Await";var Er=D.createContext(null);Er.displayName="Navigation";var Yl=D.createContext(null);Yl.displayName="Location";var Rn=D.createContext({outlet:null,matches:[],isDataRoute:!1});Rn.displayName="Route";var Sm=D.createContext(null);Sm.displayName="RouteError";var sv="REACT_ROUTER_ERROR",vE="REDIRECT",wE="ROUTE_ERROR_RESPONSE";function _E(r){if(r.startsWith(`${sv}:${vE}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function bE(r){if(r.startsWith(`${sv}:${wE}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new hE(e.status,e.statusText,e.data)}catch{}}function kE(r,{relative:e}={}){ht(ho(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=D.useContext(Er),{hash:a,pathname:l,search:d}=Jl(r,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:Zn([t,l])),s.createHref({pathname:f,search:d,hash:a})}function ho(){return D.useContext(Yl)!=null}function as(){return ht(ho(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(Yl).location}var iv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function av(r){D.useContext(Er).static||D.useLayoutEffect(r)}function Xi(){let{isDataRoute:r}=D.useContext(Rn);return r?ME():EE()}function EE(){ht(ho(),"useNavigate() may be used only in the context of a <Router> component.");let r=D.useContext(uo),{basename:e,navigator:t}=D.useContext(Er),{matches:s}=D.useContext(Rn),{pathname:a}=as(),l=JSON.stringify(Im(s)),d=D.useRef(!1);return av(()=>{d.current=!0}),D.useCallback((p,g={})=>{if(Jr(d.current,iv),!d.current)return;if(typeof p=="number"){t.go(p);return}let v=Nm(p,JSON.parse(l),a,g.relative==="path");r==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Zn([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,l,a,r])}D.createContext(null);function Jl(r,{relative:e}={}){let{matches:t}=D.useContext(Rn),{pathname:s}=as(),a=JSON.stringify(Im(t));return D.useMemo(()=>Nm(r,JSON.parse(a),s,e==="path"),[r,a,s,e])}function TE(r,e){return ov(r,e)}function ov(r,e,t,s,a){ht(ho(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=D.useContext(Er),{matches:d}=D.useContext(Rn),f=d[d.length-1],p=f?f.params:{},g=f?f.pathname:"/",v=f?f.pathnameBase:"/",b=f&&f.route;{let $=b&&b.path||"";cv(g,!b||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let k=as(),P;if(e){let $=typeof e=="string"?co(e):e;ht(v==="/"||$.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${$.pathname}" was given in the \`location\` prop.`),P=$}else P=k;let L=P.pathname||"/",N=L;if(v!=="/"){let $=v.replace(/^\//,"").split("/");N="/"+L.replace(/^\//,"").split("/").slice($.length).join("/")}let O=Jx(r,{pathname:N});Jr(b||O!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),Jr(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=CE(O&&O.map($=>Object.assign({},$,{params:Object.assign({},p,$.params),pathname:Zn([v,l.encodeLocation?l.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?v:Zn([v,l.encodeLocation?l.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),d,t,s,a);return e&&z?D.createElement(Yl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},z):z}function IE(){let r=LE(),e=fE(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:l},"ErrorBoundary")," or"," ",D.createElement("code",{style:l},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),t?D.createElement("pre",{style:a},t):null,d)}var NE=D.createElement(IE,null),lv=class extends D.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=bE(r.digest);t&&(r=t)}let e=r!==void 0?D.createElement(Rn.Provider,{value:this.props.routeContext},D.createElement(Sm.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?D.createElement(SE,{error:r},e):e}};lv.contextType=gE;var Pf=new WeakMap;function SE({children:r,error:e}){let{basename:t}=D.useContext(Er);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=_E(e.digest);if(s){let a=Pf.get(e);if(a)throw a;let l=tv(s.location,t);if(ev&&!Pf.get(e))if(l.isExternal||s.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:s.replace}));throw Pf.set(e,d),d}return D.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return r}function AE({routeContext:r,match:e,children:t}){let s=D.useContext(uo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(Rn.Provider,{value:r},t)}function CE(r,e=[],t=null,s=null,a=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,d=t?.errors;if(d!=null){let v=l.findIndex(b=>b.route.id&&d?.[b.route.id]!==void 0);ht(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let f=!1,p=-1;if(t)for(let v=0;v<l.length;v++){let b=l[v];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(p=v),b.route.id){let{loaderData:k,errors:P}=t,L=b.route.loader&&!k.hasOwnProperty(b.route.id)&&(!P||P[b.route.id]===void 0);if(b.route.lazy||L){f=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&s?(v,b)=>{s(v,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:mE(t.matches),errorInfo:b})}:void 0;return l.reduceRight((v,b,k)=>{let P,L=!1,N=null,O=null;t&&(P=d&&b.route.id?d[b.route.id]:void 0,N=b.route.errorElement||NE,f&&(p<0&&k===0?(cv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,O=null):p===k&&(L=!0,O=b.route.hydrateFallbackElement||null)));let z=e.concat(l.slice(0,k+1)),$=()=>{let Q;return P?Q=N:L?Q=O:b.route.Component?Q=D.createElement(b.route.Component,null):b.route.element?Q=b.route.element:Q=v,D.createElement(AE,{match:b,routeContext:{outlet:v,matches:z,isDataRoute:t!=null},children:Q})};return t&&(b.route.ErrorBoundary||b.route.errorElement||k===0)?D.createElement(lv,{location:t.location,revalidation:t.revalidation,component:N,error:P,children:$(),routeContext:{outlet:null,matches:z,isDataRoute:!0},onError:g}):$()},null)}function Am(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RE(r){let e=D.useContext(uo);return ht(e,Am(r)),e}function PE(r){let e=D.useContext(Id);return ht(e,Am(r)),e}function jE(r){let e=D.useContext(Rn);return ht(e,Am(r)),e}function Cm(r){let e=jE(r),t=e.matches[e.matches.length-1];return ht(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function DE(){return Cm("useRouteId")}function LE(){let r=D.useContext(Sm),e=PE("useRouteError"),t=Cm("useRouteError");return r!==void 0?r:e.errors?.[t]}function ME(){let{router:r}=RE("useNavigate"),e=Cm("useNavigate"),t=D.useRef(!1);return av(()=>{t.current=!0}),D.useCallback(async(a,l={})=>{Jr(t.current,iv),t.current&&(typeof a=="number"?await r.navigate(a):await r.navigate(a,{fromRouteId:e,...l}))},[r,e])}var e0={};function cv(r,e,t){!e&&!e0[r]&&(e0[r]=!0,Jr(!1,t))}D.memo(VE);function VE({routes:r,future:e,state:t,onError:s}){return ov(r,void 0,t,s,e)}function uv({to:r,replace:e,state:t,relative:s}){ht(ho(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=D.useContext(Er);Jr(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=D.useContext(Rn),{pathname:d}=as(),f=Xi(),p=Nm(r,Im(l),d,s==="path"),g=JSON.stringify(p);return D.useEffect(()=>{f(JSON.parse(g),{replace:e,state:t,relative:s})},[f,g,s,e,t]),null}function br(r){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function OE({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:a,static:l=!1,unstable_useTransitions:d}){ht(!ho(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),p=D.useMemo(()=>({basename:f,navigator:a,static:l,unstable_useTransitions:d,future:{}}),[f,a,l,d]);typeof t=="string"&&(t=co(t));let{pathname:g="/",search:v="",hash:b="",state:k=null,key:P="default"}=t,L=D.useMemo(()=>{let N=ts(g,f);return N==null?null:{location:{pathname:N,search:v,hash:b,state:k,key:P},navigationType:s}},[f,g,v,b,k,P,s]);return Jr(L!=null,`<Router basename="${f}"> is not able to match the URL "${g}${v}${b}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:D.createElement(Er.Provider,{value:p},D.createElement(Yl.Provider,{children:e,value:L}))}function FE({children:r,location:e}){return TE(Zf(r),e)}function Zf(r,e=[]){let t=[];return D.Children.forEach(r,(s,a)=>{if(!D.isValidElement(s))return;let l=[...e,a];if(s.type===D.Fragment){t.push.apply(t,Zf(s.props.children,l));return}ht(s.type===br,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=Zf(s.props.children,l)),t.push(d)}),t}var Bu="get",qu="application/x-www-form-urlencoded";function Nd(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function UE(r){return Nd(r)&&r.tagName.toLowerCase()==="button"}function zE(r){return Nd(r)&&r.tagName.toLowerCase()==="form"}function $E(r){return Nd(r)&&r.tagName.toLowerCase()==="input"}function BE(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function qE(r,e){return r.button===0&&(!e||e==="_self")&&!BE(r)}var Nu=null;function HE(){if(Nu===null)try{new FormData(document.createElement("form"),0),Nu=!1}catch{Nu=!0}return Nu}var WE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jf(r){return r!=null&&!WE.has(r)?(Jr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qu}"`),null):r}function GE(r,e){let t,s,a,l,d;if(zE(r)){let f=r.getAttribute("action");s=f?ts(f,e):null,t=r.getAttribute("method")||Bu,a=jf(r.getAttribute("enctype"))||qu,l=new FormData(r)}else if(UE(r)||$E(r)&&(r.type==="submit"||r.type==="image")){let f=r.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||f.getAttribute("action");if(s=p?ts(p,e):null,t=r.getAttribute("formmethod")||f.getAttribute("method")||Bu,a=jf(r.getAttribute("formenctype"))||jf(f.getAttribute("enctype"))||qu,l=new FormData(f,r),!HE()){let{name:g,type:v,value:b}=r;if(v==="image"){let k=g?`${g}.`:"";l.append(`${k}x`,"0"),l.append(`${k}y`,"0")}else g&&l.append(g,b)}}else{if(Nd(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Bu,s=null,a=qu,d=r}return l&&a==="text/plain"&&(d=l,l=void 0),{action:s,method:t.toLowerCase(),encType:a,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rm(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function KE(r,e,t,s){let a=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${s}`:a.pathname=`${a.pathname}.${s}`:a.pathname==="/"?a.pathname=`_root.${s}`:e&&ts(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${s}`,a}async function QE(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function YE(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function JE(r,e,t){let s=await Promise.all(r.map(async a=>{let l=e.routes[a.route.id];if(l){let d=await QE(l,t);return d.links?d.links():[]}return[]}));return t1(s.flat(1).filter(YE).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function t0(r,e,t,s,a,l){let d=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,f=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,g)=>d(p,g)||f(p,g)):l==="data"?e.filter((p,g)=>{let v=s.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(d(p,g)||f(p,g))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function XE(r,e,{includeHydrateFallback:t}={}){return ZE(r.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function ZE(r){return[...new Set(r)]}function e1(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function t1(r,e){let t=new Set;return new Set(e),r.reduce((s,a)=>{let l=JSON.stringify(e1(a));return t.has(l)||(t.add(l),s.push({key:l,link:a})),s},[])}function dv(){let r=D.useContext(uo);return Rm(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function r1(){let r=D.useContext(Id);return Rm(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Pm=D.createContext(void 0);Pm.displayName="FrameworkContext";function hv(){let r=D.useContext(Pm);return Rm(r,"You must render this element inside a <HydratedRouter> element"),r}function n1(r,e){let t=D.useContext(Pm),[s,a]=D.useState(!1),[l,d]=D.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:b}=e,k=D.useRef(null);D.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let N=z=>{z.forEach($=>{d($.isIntersecting)})},O=new IntersectionObserver(N,{threshold:.5});return k.current&&O.observe(k.current),()=>{O.disconnect()}}},[r]),D.useEffect(()=>{if(s){let N=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(N)}}},[s]);let P=()=>{a(!0)},L=()=>{a(!1),d(!1)};return t?r!=="intent"?[l,k,{}]:[l,k,{onFocus:yl(f,P),onBlur:yl(p,L),onMouseEnter:yl(g,P),onMouseLeave:yl(v,L),onTouchStart:yl(b,P)}]:[!1,k,{}]}function yl(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function s1({page:r,...e}){let{router:t}=dv(),s=D.useMemo(()=>Jx(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?D.createElement(a1,{page:r,matches:s,...e}):null}function i1(r){let{manifest:e,routeModules:t}=hv(),[s,a]=D.useState([]);return D.useEffect(()=>{let l=!1;return JE(r,e,t).then(d=>{l||a(d)}),()=>{l=!0}},[r,e,t]),s}function a1({page:r,matches:e,...t}){let s=as(),{future:a,manifest:l,routeModules:d}=hv(),{basename:f}=dv(),{loaderData:p,matches:g}=r1(),v=D.useMemo(()=>t0(r,e,g,l,s,"data"),[r,e,g,l,s]),b=D.useMemo(()=>t0(r,e,g,l,s,"assets"),[r,e,g,l,s]),k=D.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let N=new Set,O=!1;if(e.forEach($=>{let Q=l.routes[$.route.id];!Q||!Q.hasLoader||(!v.some(fe=>fe.route.id===$.route.id)&&$.route.id in p&&d[$.route.id]?.shouldRevalidate||Q.hasClientLoader?O=!0:N.add($.route.id))}),N.size===0)return[];let z=KE(r,f,a.unstable_trailingSlashAwareDataRequests,"data");return O&&N.size>0&&z.searchParams.set("_routes",e.filter($=>N.has($.route.id)).map($=>$.route.id).join(",")),[z.pathname+z.search]},[f,a.unstable_trailingSlashAwareDataRequests,p,s,l,v,e,r,d]),P=D.useMemo(()=>XE(b,l),[b,l]),L=i1(b);return D.createElement(D.Fragment,null,k.map(N=>D.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),P.map(N=>D.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),L.map(({key:N,link:O})=>D.createElement("link",{key:N,nonce:t.nonce,...O,crossOrigin:O.crossOrigin??t.crossOrigin})))}function o1(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var l1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{l1&&(window.__reactRouterVersion="7.13.0")}catch{}function c1({basename:r,children:e,unstable_useTransitions:t,window:s}){let a=D.useRef();a.current==null&&(a.current=Bk({window:s,v5Compat:!0}));let l=a.current,[d,f]=D.useState({action:l.action,location:l.location}),p=D.useCallback(g=>{t===!1?f(g):D.startTransition(()=>f(g))},[t]);return D.useLayoutEffect(()=>l.listen(p),[l,p]),D.createElement(OE,{basename:r,children:e,location:d.location,navigationType:d.action,navigator:l,unstable_useTransitions:t})}var fv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mv=D.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:a,reloadDocument:l,replace:d,state:f,target:p,to:g,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:k,...P},L){let{basename:N,unstable_useTransitions:O}=D.useContext(Er),z=typeof g=="string"&&fv.test(g),$=tv(g,N);g=$.to;let Q=kE(g,{relative:a}),[fe,oe,Y]=n1(s,P),I=f1(g,{replace:d,state:f,target:p,preventScrollReset:v,relative:a,viewTransition:b,unstable_defaultShouldRevalidate:k,unstable_useTransitions:O});function E(C){e&&e(C),C.defaultPrevented||I(C)}let R=D.createElement("a",{...P,...Y,href:$.absoluteURL||Q,onClick:$.isExternal||l?e:E,ref:o1(L,oe),target:p,"data-discover":!z&&t==="render"?"true":void 0});return fe&&!z?D.createElement(D.Fragment,null,R,D.createElement(s1,{page:Q})):R});mv.displayName="Link";var u1=D.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:a=!1,style:l,to:d,viewTransition:f,children:p,...g},v){let b=Jl(d,{relative:g.relative}),k=as(),P=D.useContext(Id),{navigator:L,basename:N}=D.useContext(Er),O=P!=null&&x1(b)&&f===!0,z=L.encodeLocation?L.encodeLocation(b).pathname:b.pathname,$=k.pathname,Q=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;t||($=$.toLowerCase(),Q=Q?Q.toLowerCase():null,z=z.toLowerCase()),Q&&N&&(Q=ts(Q,N)||Q);const fe=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let oe=$===z||!a&&$.startsWith(z)&&$.charAt(fe)==="/",Y=Q!=null&&(Q===z||!a&&Q.startsWith(z)&&Q.charAt(z.length)==="/"),I={isActive:oe,isPending:Y,isTransitioning:O},E=oe?e:void 0,R;typeof s=="function"?R=s(I):R=[s,oe?"active":null,Y?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let C=typeof l=="function"?l(I):l;return D.createElement(mv,{...g,"aria-current":E,className:R,ref:v,style:C,to:d,viewTransition:f},typeof p=="function"?p(I):p)});u1.displayName="NavLink";var d1=D.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:a,state:l,method:d=Bu,action:f,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:k,...P},L)=>{let{unstable_useTransitions:N}=D.useContext(Er),O=g1(),z=y1(f,{relative:g}),$=d.toLowerCase()==="get"?"get":"post",Q=typeof f=="string"&&fv.test(f),fe=oe=>{if(p&&p(oe),oe.defaultPrevented)return;oe.preventDefault();let Y=oe.nativeEvent.submitter,I=Y?.getAttribute("formmethod")||d,E=()=>O(Y||oe.currentTarget,{fetcherKey:e,method:I,navigate:t,replace:a,state:l,relative:g,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:k});N&&t!==!1?D.startTransition(()=>E()):E()};return D.createElement("form",{ref:L,method:$,action:z,onSubmit:s?p:fe,...P,"data-discover":!Q&&r==="render"?"true":void 0})});d1.displayName="Form";function h1(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pv(r){let e=D.useContext(uo);return ht(e,h1(r)),e}function f1(r,{target:e,replace:t,state:s,preventScrollReset:a,relative:l,viewTransition:d,unstable_defaultShouldRevalidate:f,unstable_useTransitions:p}={}){let g=Xi(),v=as(),b=Jl(r,{relative:l});return D.useCallback(k=>{if(qE(k,e)){k.preventDefault();let P=t!==void 0?t:Dl(v)===Dl(b),L=()=>g(r,{replace:P,state:s,preventScrollReset:a,relative:l,viewTransition:d,unstable_defaultShouldRevalidate:f});p?D.startTransition(()=>L()):L()}},[v,g,b,t,s,e,r,a,l,d,f,p])}var m1=0,p1=()=>`__${String(++m1)}__`;function g1(){let{router:r}=pv("useSubmit"),{basename:e}=D.useContext(Er),t=DE(),s=r.fetch,a=r.navigate;return D.useCallback(async(l,d={})=>{let{action:f,method:p,encType:g,formData:v,body:b}=GE(l,e);if(d.navigate===!1){let k=d.fetcherKey||p1();await s(k,t,d.action||f,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:v,body:b,formMethod:d.method||p,formEncType:d.encType||g,flushSync:d.flushSync})}else await a(d.action||f,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:v,body:b,formMethod:d.method||p,formEncType:d.encType||g,replace:d.replace,state:d.state,fromRouteId:t,flushSync:d.flushSync,viewTransition:d.viewTransition})},[s,a,e,t])}function y1(r,{relative:e}={}){let{basename:t}=D.useContext(Er),s=D.useContext(Rn);ht(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...Jl(r||".",{relative:e})},d=as();if(r==null){l.search=d.search;let f=new URLSearchParams(l.search),p=f.getAll("index");if(p.some(v=>v==="")){f.delete("index"),p.filter(b=>b).forEach(b=>f.append("index",b));let v=f.toString();l.search=v?`?${v}`:""}}return(!r||r===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Zn([t,l.pathname])),Dl(l)}function x1(r,{relative:e}={}){let t=D.useContext(nv);ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=pv("useViewTransitionState"),a=Jl(r,{relative:e});if(!t.isTransitioning)return!1;let l=ts(t.currentLocation.pathname,s)||t.currentLocation.pathname,d=ts(t.nextLocation.pathname,s)||t.nextLocation.pathname;return rd(a.pathname,d)!=null||rd(a.pathname,l)!=null}Yx();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),w1=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),r0=r=>{const e=w1(r);return e.charAt(0).toUpperCase()+e.slice(1)},gv=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=D.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:d,...f},p)=>D.createElement("svg",{ref:p,..._1,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:gv("lucide",a),...f},[...d.map(([g,v])=>D.createElement(g,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=(r,e)=>{const t=D.forwardRef(({className:s,...a},l)=>D.createElement(b1,{ref:l,iconNode:e,className:gv(`lucide-${v1(r0(r))}`,`lucide-${r}`,s),...a}));return t.displayName=r0(r),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],nd=je("arrow-left",k1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],T1=je("arrow-right-left",E1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],N1=je("arrow-right",I1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],n0=je("ban",S1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Ll=je("building-2",A1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],yv=je("calendar",C1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],P1=je("chart-column",R1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],D1=je("chevron-down",j1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],M1=je("chevron-up",L1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],O1=je("circle-alert",V1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],kn=je("circle-check-big",F1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Sd=je("circle-x",U1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Xl=je("clock",z1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Hu=je("credit-card",$1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],to=je("dollar-sign",B1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],xv=je("download",q1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vv=je("eye",H1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],G1=je("file-text",W1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],Ml=je("flag",K1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],wv=je("funnel",Q1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],Df=je("indian-rupee",Y1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],X1=je("key",J1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],eT=je("layout-dashboard",Z1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],rT=je("loader-circle",tT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],sT=je("lock",nT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],_v=je("log-out",iT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Ad=je("mail",aT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],lT=je("map-pin",oT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],uT=je("menu",cT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],jm=je("message-square",dT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Cd=je("moon",hT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Dm=je("phone",fT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Lm=je("plus",mT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Mm=je("refresh-cw",pT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],bv=je("search",gT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xT=je("settings",yT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],s0=je("star",vT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Rd=je("sun",wT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],kv=je("sunset",_T);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ev=je("trash-2",bT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],ET=je("trending-up",kT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Pd=je("triangle-alert",TT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Tv=je("user-check",IT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ST=je("user",NT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Bi=je("users",AT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Iv=je("x",CT),RT=()=>{};var i0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let a=r.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},PT=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const a=r[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],d=r[t++],f=r[t++],p=((a&7)<<18|(l&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],d=r[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|d&63)}}return e.join("")},Sv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<r.length;a+=3){const l=r[a],d=a+1<r.length,f=d?r[a+1]:0,p=a+2<r.length,g=p?r[a+2]:0,v=l>>2,b=(l&3)<<4|f>>4;let k=(f&15)<<2|g>>6,P=g&63;p||(P=64,d||(k=64)),s.push(t[v],t[b],t[k],t[P])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Nv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):PT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],f=a<r.length?t[r.charAt(a)]:0;++a;const g=a<r.length?t[r.charAt(a)]:64;++a;const b=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||f==null||g==null||b==null)throw new jT;const k=l<<2|f>>4;if(s.push(k),g!==64){const P=f<<4&240|g>>2;if(s.push(P),b!==64){const L=g<<6&192|b;s.push(L)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class jT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DT=function(r){const e=Nv(r);return Sv.encodeByteArray(e,!0)},sd=function(r){return DT(r).replace(/\./g,"")},Av=function(r){try{return Sv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=()=>LT().__FIREBASE_DEFAULTS__,VT=()=>{if(typeof process>"u"||typeof i0>"u")return;const r=i0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},OT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Av(r[1]);return e&&JSON.parse(e)},jd=()=>{try{return RT()||MT()||VT()||OT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Cv=r=>jd()?.emulatorHosts?.[r],FT=r=>{const e=Cv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Rv=()=>jd()?.config,Pv=r=>jd()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[sd(JSON.stringify(t)),sd(JSON.stringify(d)),""].join(".")}const Sl={};function $T(){const r={prod:[],emulator:[]};for(const e of Object.keys(Sl))Sl[e]?r.emulator.push(e):r.prod.push(e);return r}function BT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let a0=!1;function Dv(r,e){if(typeof window>"u"||typeof document>"u"||!fo(window.location.host)||Sl[r]===e||Sl[r]||a0)return;Sl[r]=e;function t(k){return`__firebase__banner__${k}`}const s="__firebase__banner",l=$T().prod.length>0;function d(){const k=document.getElementById(s);k&&k.remove()}function f(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function p(k,P){k.setAttribute("width","24"),k.setAttribute("id",P),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function g(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{a0=!0,d()},k}function v(k,P){k.setAttribute("id",P),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function b(){const k=BT(s),P=t("text"),L=document.getElementById(P)||document.createElement("span"),N=t("learnmore"),O=document.getElementById(N)||document.createElement("a"),z=t("preprendIcon"),$=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const Q=k.element;f(Q),v(O,N);const fe=g();p($,z),Q.append($,L,O,fe),document.body.appendChild(Q)}l?(L.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tr())}function HT(){const r=jd()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function KT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QT(){const r=tr();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function YT(){return!HT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JT(){try{return typeof indexedDB=="object"}catch{return!1}}function XT(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="FirebaseError";class os extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=ZT,Object.setPrototypeOf(this,os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zl.prototype.create)}}class Zl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],d=l?eI(l,s):"Error",f=`${this.serviceName}: ${d} (${a}).`;return new os(a,f,s)}}function eI(r,e){return r.replace(tI,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const tI=/\{\$([^}]+)}/g;function rI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function qi(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=r[a],d=e[a];if(o0(l)&&o0(d)){if(!qi(l,d))return!1}else if(l!==d)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function o0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function bl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function kl(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function nI(r,e){const t=new sI(r,e);return t.subscribe.bind(t)}class sI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");iI(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=Lf),a.error===void 0&&(a.error=Lf),a.complete===void 0&&(a.complete=Lf);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Lf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(r){return r&&r._delegate?r._delegate:r}class Hi{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new UT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lI(e))try{this.getOrInitializeService({instanceIdentifier:Ui})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=Ui){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ui){return this.instances.has(e)}getOptions(e=Ui){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&d.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:oI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ui){return this.component?this.component.multipleInstances?e:Ui:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oI(r){return r===Ui?void 0:r}function lI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})($e||($e={}));const uI={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},dI=$e.INFO,hI={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},fI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),a=hI[e];if(a)console[a](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vm{constructor(e){this.name=e,this._logLevel=dI,this._logHandler=fI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const mI=(r,e)=>e.some(t=>r instanceof t);let l0,c0;function pI(){return l0||(l0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gI(){return c0||(c0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lv=new WeakMap,em=new WeakMap,Mv=new WeakMap,Mf=new WeakMap,Om=new WeakMap;function yI(r){const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(Ys(r.result)),a()},d=()=>{s(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Lv.set(t,r)}).catch(()=>{}),Om.set(e,r),e}function xI(r){if(em.has(r))return;const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),a()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});em.set(r,e)}let tm={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return em.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Mv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ys(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function vI(r){tm=r(tm)}function wI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Vf(this),e,...t);return Mv.set(s,e.sort?e.sort():[e]),Ys(s)}:gI().includes(r)?function(...e){return r.apply(Vf(this),e),Ys(Lv.get(this))}:function(...e){return Ys(r.apply(Vf(this),e))}}function _I(r){return typeof r=="function"?wI(r):(r instanceof IDBTransaction&&xI(r),mI(r,pI())?new Proxy(r,tm):r)}function Ys(r){if(r instanceof IDBRequest)return yI(r);if(Mf.has(r))return Mf.get(r);const e=_I(r);return e!==r&&(Mf.set(r,e),Om.set(e,r)),e}const Vf=r=>Om.get(r);function bI(r,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const d=indexedDB.open(r,e),f=Ys(d);return s&&d.addEventListener("upgradeneeded",p=>{s(Ys(d.result),p.oldVersion,p.newVersion,Ys(d.transaction),p)}),t&&d.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const kI=["get","getKey","getAll","getAllKeys","count"],EI=["put","add","delete","clear"],Of=new Map;function u0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Of.get(e))return Of.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=EI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||kI.includes(t)))return;const l=async function(d,...f){const p=this.transaction(d,a?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),a&&p.done]))[0]};return Of.set(e,l),l}vI(r=>({...r,get:(e,t,s)=>u0(e,t)||r.get(e,t,s),has:(e,t)=>!!u0(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(II(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function II(r){return r.getComponent()?.type==="VERSION"}const rm="@firebase/app",d0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Vm("@firebase/app"),NI="@firebase/app-compat",SI="@firebase/analytics-compat",AI="@firebase/analytics",CI="@firebase/app-check-compat",RI="@firebase/app-check",PI="@firebase/auth",jI="@firebase/auth-compat",DI="@firebase/database",LI="@firebase/data-connect",MI="@firebase/database-compat",VI="@firebase/functions",OI="@firebase/functions-compat",FI="@firebase/installations",UI="@firebase/installations-compat",zI="@firebase/messaging",$I="@firebase/messaging-compat",BI="@firebase/performance",qI="@firebase/performance-compat",HI="@firebase/remote-config",WI="@firebase/remote-config-compat",GI="@firebase/storage",KI="@firebase/storage-compat",QI="@firebase/firestore",YI="@firebase/ai",JI="@firebase/firestore-compat",XI="firebase",ZI="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="[DEFAULT]",eN={[rm]:"fire-core",[NI]:"fire-core-compat",[AI]:"fire-analytics",[SI]:"fire-analytics-compat",[RI]:"fire-app-check",[CI]:"fire-app-check-compat",[PI]:"fire-auth",[jI]:"fire-auth-compat",[DI]:"fire-rtdb",[LI]:"fire-data-connect",[MI]:"fire-rtdb-compat",[VI]:"fire-fn",[OI]:"fire-fn-compat",[FI]:"fire-iid",[UI]:"fire-iid-compat",[zI]:"fire-fcm",[$I]:"fire-fcm-compat",[BI]:"fire-perf",[qI]:"fire-perf-compat",[HI]:"fire-rc",[WI]:"fire-rc-compat",[GI]:"fire-gcs",[KI]:"fire-gcs-compat",[QI]:"fire-fst",[JI]:"fire-fst-compat",[YI]:"fire-vertex","fire-js":"fire-js",[XI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=new Map,tN=new Map,sm=new Map;function h0(r,e){try{r.container.addComponent(e)}catch(t){rs.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ro(r){const e=r.name;if(sm.has(e))return rs.debug(`There were multiple attempts to register component ${e}.`),!1;sm.set(e,r);for(const t of Vl.values())h0(t,r);for(const t of tN.values())h0(t,r);return!0}function Fm(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Dr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Js=new Zl("app","Firebase",rN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Js.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=ZI;function Vv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:nm,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Js.create("bad-app-name",{appName:String(a)});if(t||(t=Rv()),!t)throw Js.create("no-options");const l=Vl.get(a);if(l){if(qi(t,l.options)&&qi(s,l.config))return l;throw Js.create("duplicate-app",{appName:a})}const d=new cI(a);for(const p of sm.values())d.addComponent(p);const f=new nN(t,s,d);return Vl.set(a,f),f}function Ov(r=nm){const e=Vl.get(r);if(!e&&r===nm&&Rv())return Vv();if(!e)throw Js.create("no-app",{appName:r});return e}function f0(){return Array.from(Vl.values())}function Xs(r,e,t){let s=eN[r]??r;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rs.warn(d.join(" "));return}ro(new Hi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN="firebase-heartbeat-database",iN=1,Ol="firebase-heartbeat-store";let Ff=null;function Fv(){return Ff||(Ff=bI(sN,iN,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ol)}catch(t){console.warn(t)}}}}).catch(r=>{throw Js.create("idb-open",{originalErrorMessage:r.message})})),Ff}async function aN(r){try{const t=(await Fv()).transaction(Ol),s=await t.objectStore(Ol).get(Uv(r));return await t.done,s}catch(e){if(e instanceof os)rs.warn(e.message);else{const t=Js.create("idb-get",{originalErrorMessage:e?.message});rs.warn(t.message)}}}async function m0(r,e){try{const s=(await Fv()).transaction(Ol,"readwrite");await s.objectStore(Ol).put(e,Uv(r)),await s.done}catch(t){if(t instanceof os)rs.warn(t.message);else{const s=Js.create("idb-set",{originalErrorMessage:t?.message});rs.warn(s.message)}}}function Uv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=1024,lN=30;class cN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dN(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=p0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>lN){const a=hN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){rs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=p0(),{heartbeatsToSend:t,unsentEntries:s}=uN(this._heartbeatsCache.heartbeats),a=sd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return rs.warn(e),""}}}function p0(){return new Date().toISOString().substring(0,10)}function uN(r,e=oN){const t=[];let s=r.slice();for(const a of r){const l=t.find(d=>d.agent===a.agent);if(l){if(l.dates.push(a.date),g0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),g0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class dN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JT()?XT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await aN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return m0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return m0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function g0(r){return sd(JSON.stringify({version:2,heartbeats:r})).length}function hN(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(r){ro(new Hi("platform-logger",e=>new TI(e),"PRIVATE")),ro(new Hi("heartbeat",e=>new cN(e),"PRIVATE")),Xs(rm,d0,r),Xs(rm,d0,"esm2020"),Xs("fire-js","")}fN("");var y0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zs,zv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,E){function R(){}R.prototype=E.prototype,I.F=E.prototype,I.prototype=new R,I.prototype.constructor=I,I.D=function(C,S,M){for(var A=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)A[ie-2]=arguments[ie];return E.prototype[S].apply(C,A)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(I,E,R){R||(R=0);const C=Array(16);if(typeof E=="string")for(var S=0;S<16;++S)C[S]=E.charCodeAt(R++)|E.charCodeAt(R++)<<8|E.charCodeAt(R++)<<16|E.charCodeAt(R++)<<24;else for(S=0;S<16;++S)C[S]=E[R++]|E[R++]<<8|E[R++]<<16|E[R++]<<24;E=I.g[0],R=I.g[1],S=I.g[2];let M=I.g[3],A;A=E+(M^R&(S^M))+C[0]+3614090360&4294967295,E=R+(A<<7&4294967295|A>>>25),A=M+(S^E&(R^S))+C[1]+3905402710&4294967295,M=E+(A<<12&4294967295|A>>>20),A=S+(R^M&(E^R))+C[2]+606105819&4294967295,S=M+(A<<17&4294967295|A>>>15),A=R+(E^S&(M^E))+C[3]+3250441966&4294967295,R=S+(A<<22&4294967295|A>>>10),A=E+(M^R&(S^M))+C[4]+4118548399&4294967295,E=R+(A<<7&4294967295|A>>>25),A=M+(S^E&(R^S))+C[5]+1200080426&4294967295,M=E+(A<<12&4294967295|A>>>20),A=S+(R^M&(E^R))+C[6]+2821735955&4294967295,S=M+(A<<17&4294967295|A>>>15),A=R+(E^S&(M^E))+C[7]+4249261313&4294967295,R=S+(A<<22&4294967295|A>>>10),A=E+(M^R&(S^M))+C[8]+1770035416&4294967295,E=R+(A<<7&4294967295|A>>>25),A=M+(S^E&(R^S))+C[9]+2336552879&4294967295,M=E+(A<<12&4294967295|A>>>20),A=S+(R^M&(E^R))+C[10]+4294925233&4294967295,S=M+(A<<17&4294967295|A>>>15),A=R+(E^S&(M^E))+C[11]+2304563134&4294967295,R=S+(A<<22&4294967295|A>>>10),A=E+(M^R&(S^M))+C[12]+1804603682&4294967295,E=R+(A<<7&4294967295|A>>>25),A=M+(S^E&(R^S))+C[13]+4254626195&4294967295,M=E+(A<<12&4294967295|A>>>20),A=S+(R^M&(E^R))+C[14]+2792965006&4294967295,S=M+(A<<17&4294967295|A>>>15),A=R+(E^S&(M^E))+C[15]+1236535329&4294967295,R=S+(A<<22&4294967295|A>>>10),A=E+(S^M&(R^S))+C[1]+4129170786&4294967295,E=R+(A<<5&4294967295|A>>>27),A=M+(R^S&(E^R))+C[6]+3225465664&4294967295,M=E+(A<<9&4294967295|A>>>23),A=S+(E^R&(M^E))+C[11]+643717713&4294967295,S=M+(A<<14&4294967295|A>>>18),A=R+(M^E&(S^M))+C[0]+3921069994&4294967295,R=S+(A<<20&4294967295|A>>>12),A=E+(S^M&(R^S))+C[5]+3593408605&4294967295,E=R+(A<<5&4294967295|A>>>27),A=M+(R^S&(E^R))+C[10]+38016083&4294967295,M=E+(A<<9&4294967295|A>>>23),A=S+(E^R&(M^E))+C[15]+3634488961&4294967295,S=M+(A<<14&4294967295|A>>>18),A=R+(M^E&(S^M))+C[4]+3889429448&4294967295,R=S+(A<<20&4294967295|A>>>12),A=E+(S^M&(R^S))+C[9]+568446438&4294967295,E=R+(A<<5&4294967295|A>>>27),A=M+(R^S&(E^R))+C[14]+3275163606&4294967295,M=E+(A<<9&4294967295|A>>>23),A=S+(E^R&(M^E))+C[3]+4107603335&4294967295,S=M+(A<<14&4294967295|A>>>18),A=R+(M^E&(S^M))+C[8]+1163531501&4294967295,R=S+(A<<20&4294967295|A>>>12),A=E+(S^M&(R^S))+C[13]+2850285829&4294967295,E=R+(A<<5&4294967295|A>>>27),A=M+(R^S&(E^R))+C[2]+4243563512&4294967295,M=E+(A<<9&4294967295|A>>>23),A=S+(E^R&(M^E))+C[7]+1735328473&4294967295,S=M+(A<<14&4294967295|A>>>18),A=R+(M^E&(S^M))+C[12]+2368359562&4294967295,R=S+(A<<20&4294967295|A>>>12),A=E+(R^S^M)+C[5]+4294588738&4294967295,E=R+(A<<4&4294967295|A>>>28),A=M+(E^R^S)+C[8]+2272392833&4294967295,M=E+(A<<11&4294967295|A>>>21),A=S+(M^E^R)+C[11]+1839030562&4294967295,S=M+(A<<16&4294967295|A>>>16),A=R+(S^M^E)+C[14]+4259657740&4294967295,R=S+(A<<23&4294967295|A>>>9),A=E+(R^S^M)+C[1]+2763975236&4294967295,E=R+(A<<4&4294967295|A>>>28),A=M+(E^R^S)+C[4]+1272893353&4294967295,M=E+(A<<11&4294967295|A>>>21),A=S+(M^E^R)+C[7]+4139469664&4294967295,S=M+(A<<16&4294967295|A>>>16),A=R+(S^M^E)+C[10]+3200236656&4294967295,R=S+(A<<23&4294967295|A>>>9),A=E+(R^S^M)+C[13]+681279174&4294967295,E=R+(A<<4&4294967295|A>>>28),A=M+(E^R^S)+C[0]+3936430074&4294967295,M=E+(A<<11&4294967295|A>>>21),A=S+(M^E^R)+C[3]+3572445317&4294967295,S=M+(A<<16&4294967295|A>>>16),A=R+(S^M^E)+C[6]+76029189&4294967295,R=S+(A<<23&4294967295|A>>>9),A=E+(R^S^M)+C[9]+3654602809&4294967295,E=R+(A<<4&4294967295|A>>>28),A=M+(E^R^S)+C[12]+3873151461&4294967295,M=E+(A<<11&4294967295|A>>>21),A=S+(M^E^R)+C[15]+530742520&4294967295,S=M+(A<<16&4294967295|A>>>16),A=R+(S^M^E)+C[2]+3299628645&4294967295,R=S+(A<<23&4294967295|A>>>9),A=E+(S^(R|~M))+C[0]+4096336452&4294967295,E=R+(A<<6&4294967295|A>>>26),A=M+(R^(E|~S))+C[7]+1126891415&4294967295,M=E+(A<<10&4294967295|A>>>22),A=S+(E^(M|~R))+C[14]+2878612391&4294967295,S=M+(A<<15&4294967295|A>>>17),A=R+(M^(S|~E))+C[5]+4237533241&4294967295,R=S+(A<<21&4294967295|A>>>11),A=E+(S^(R|~M))+C[12]+1700485571&4294967295,E=R+(A<<6&4294967295|A>>>26),A=M+(R^(E|~S))+C[3]+2399980690&4294967295,M=E+(A<<10&4294967295|A>>>22),A=S+(E^(M|~R))+C[10]+4293915773&4294967295,S=M+(A<<15&4294967295|A>>>17),A=R+(M^(S|~E))+C[1]+2240044497&4294967295,R=S+(A<<21&4294967295|A>>>11),A=E+(S^(R|~M))+C[8]+1873313359&4294967295,E=R+(A<<6&4294967295|A>>>26),A=M+(R^(E|~S))+C[15]+4264355552&4294967295,M=E+(A<<10&4294967295|A>>>22),A=S+(E^(M|~R))+C[6]+2734768916&4294967295,S=M+(A<<15&4294967295|A>>>17),A=R+(M^(S|~E))+C[13]+1309151649&4294967295,R=S+(A<<21&4294967295|A>>>11),A=E+(S^(R|~M))+C[4]+4149444226&4294967295,E=R+(A<<6&4294967295|A>>>26),A=M+(R^(E|~S))+C[11]+3174756917&4294967295,M=E+(A<<10&4294967295|A>>>22),A=S+(E^(M|~R))+C[2]+718787259&4294967295,S=M+(A<<15&4294967295|A>>>17),A=R+(M^(S|~E))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+E&4294967295,I.g[1]=I.g[1]+(S+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+M&4294967295}s.prototype.v=function(I,E){E===void 0&&(E=I.length);const R=E-this.blockSize,C=this.C;let S=this.h,M=0;for(;M<E;){if(S==0)for(;M<=R;)a(this,I,M),M+=this.blockSize;if(typeof I=="string"){for(;M<E;)if(C[S++]=I.charCodeAt(M++),S==this.blockSize){a(this,C),S=0;break}}else for(;M<E;)if(C[S++]=I[M++],S==this.blockSize){a(this,C),S=0;break}}this.h=S,this.o+=E},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var E=1;E<I.length-8;++E)I[E]=0;E=this.o*8;for(var R=I.length-8;R<I.length;++R)I[R]=E&255,E/=256;for(this.v(I),I=Array(16),E=0,R=0;R<4;++R)for(let C=0;C<32;C+=8)I[E++]=this.g[R]>>>C&255;return I};function l(I,E){var R=f;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=E(I)}function d(I,E){this.h=E;const R=[];let C=!0;for(let S=I.length-1;S>=0;S--){const M=I[S]|0;C&&M==E||(R[S]=M,C=!1)}this.g=R}var f={};function p(I){return-128<=I&&I<128?l(I,function(E){return new d([E|0],E<0?-1:0)}):new d([I|0],I<0?-1:0)}function g(I){if(isNaN(I)||!isFinite(I))return b;if(I<0)return O(g(-I));const E=[];let R=1;for(let C=0;I>=R;C++)E[C]=I/R|0,R*=4294967296;return new d(E,0)}function v(I,E){if(I.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(I.charAt(0)=="-")return O(v(I.substring(1),E));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=g(Math.pow(E,8));let C=b;for(let M=0;M<I.length;M+=8){var S=Math.min(8,I.length-M);const A=parseInt(I.substring(M,M+S),E);S<8?(S=g(Math.pow(E,S)),C=C.j(S).add(g(A))):(C=C.j(R),C=C.add(g(A)))}return C}var b=p(0),k=p(1),P=p(16777216);r=d.prototype,r.m=function(){if(N(this))return-O(this).m();let I=0,E=1;for(let R=0;R<this.g.length;R++){const C=this.i(R);I+=(C>=0?C:4294967296+C)*E,E*=4294967296}return I},r.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(L(this))return"0";if(N(this))return"-"+O(this).toString(I);const E=g(Math.pow(I,6));var R=this;let C="";for(;;){const S=fe(R,E).g;R=z(R,S.j(E));let M=((R.g.length>0?R.g[0]:R.h)>>>0).toString(I);if(R=S,L(R))return M+C;for(;M.length<6;)M="0"+M;C=M+C}},r.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function L(I){if(I.h!=0)return!1;for(let E=0;E<I.g.length;E++)if(I.g[E]!=0)return!1;return!0}function N(I){return I.h==-1}r.l=function(I){return I=z(this,I),N(I)?-1:L(I)?0:1};function O(I){const E=I.g.length,R=[];for(let C=0;C<E;C++)R[C]=~I.g[C];return new d(R,~I.h).add(k)}r.abs=function(){return N(this)?O(this):this},r.add=function(I){const E=Math.max(this.g.length,I.g.length),R=[];let C=0;for(let S=0;S<=E;S++){let M=C+(this.i(S)&65535)+(I.i(S)&65535),A=(M>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);C=A>>>16,M&=65535,A&=65535,R[S]=A<<16|M}return new d(R,R[R.length-1]&-2147483648?-1:0)};function z(I,E){return I.add(O(E))}r.j=function(I){if(L(this)||L(I))return b;if(N(this))return N(I)?O(this).j(O(I)):O(O(this).j(I));if(N(I))return O(this.j(O(I)));if(this.l(P)<0&&I.l(P)<0)return g(this.m()*I.m());const E=this.g.length+I.g.length,R=[];for(var C=0;C<2*E;C++)R[C]=0;for(C=0;C<this.g.length;C++)for(let S=0;S<I.g.length;S++){const M=this.i(C)>>>16,A=this.i(C)&65535,ie=I.i(S)>>>16,we=I.i(S)&65535;R[2*C+2*S]+=A*we,$(R,2*C+2*S),R[2*C+2*S+1]+=M*we,$(R,2*C+2*S+1),R[2*C+2*S+1]+=A*ie,$(R,2*C+2*S+1),R[2*C+2*S+2]+=M*ie,$(R,2*C+2*S+2)}for(I=0;I<E;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=E;I<2*E;I++)R[I]=0;return new d(R,0)};function $(I,E){for(;(I[E]&65535)!=I[E];)I[E+1]+=I[E]>>>16,I[E]&=65535,E++}function Q(I,E){this.g=I,this.h=E}function fe(I,E){if(L(E))throw Error("division by zero");if(L(I))return new Q(b,b);if(N(I))return E=fe(O(I),E),new Q(O(E.g),O(E.h));if(N(E))return E=fe(I,O(E)),new Q(O(E.g),E.h);if(I.g.length>30){if(N(I)||N(E))throw Error("slowDivide_ only works with positive integers.");for(var R=k,C=E;C.l(I)<=0;)R=oe(R),C=oe(C);var S=Y(R,1),M=Y(C,1);for(C=Y(C,2),R=Y(R,2);!L(C);){var A=M.add(C);A.l(I)<=0&&(S=S.add(R),M=A),C=Y(C,1),R=Y(R,1)}return E=z(I,S.j(E)),new Q(S,E)}for(S=b;I.l(E)>=0;){for(R=Math.max(1,Math.floor(I.m()/E.m())),C=Math.ceil(Math.log(R)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),M=g(R),A=M.j(E);N(A)||A.l(I)>0;)R-=C,M=g(R),A=M.j(E);L(M)&&(M=k),S=S.add(M),I=z(I,A)}return new Q(S,I)}r.B=function(I){return fe(this,I).h},r.and=function(I){const E=Math.max(this.g.length,I.g.length),R=[];for(let C=0;C<E;C++)R[C]=this.i(C)&I.i(C);return new d(R,this.h&I.h)},r.or=function(I){const E=Math.max(this.g.length,I.g.length),R=[];for(let C=0;C<E;C++)R[C]=this.i(C)|I.i(C);return new d(R,this.h|I.h)},r.xor=function(I){const E=Math.max(this.g.length,I.g.length),R=[];for(let C=0;C<E;C++)R[C]=this.i(C)^I.i(C);return new d(R,this.h^I.h)};function oe(I){const E=I.g.length+1,R=[];for(let C=0;C<E;C++)R[C]=I.i(C)<<1|I.i(C-1)>>>31;return new d(R,I.h)}function Y(I,E){const R=E>>5;E%=32;const C=I.g.length-R,S=[];for(let M=0;M<C;M++)S[M]=E>0?I.i(M+R)>>>E|I.i(M+R+1)<<32-E:I.i(M+R);return new d(S,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,zv=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=v,Zs=d}).apply(typeof y0<"u"?y0:typeof self<"u"?self:typeof window<"u"?window:{});var Su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $v,El,Bv,Wu,im,qv,Hv,Wv;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Su=="object"&&Su];for(var x=0;x<u.length;++x){var w=u[x];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function a(u,x){if(x)e:{var w=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var q=u[T];if(!(q in w))break e;w=w[q]}u=u[u.length-1],T=w[u],x=x(T),x!=T&&x!=null&&e(w,u,{configurable:!0,writable:!0,value:x})}}a("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(u){return u||function(x){var w=[],T;for(T in x)Object.prototype.hasOwnProperty.call(x,T)&&w.push([T,x[T]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function f(u){var x=typeof u;return x=="object"&&u!=null||x=="function"}function p(u,x,w){return u.call.apply(u.bind,arguments)}function g(u,x,w){return g=p,g.apply(null,arguments)}function v(u,x){var w=Array.prototype.slice.call(arguments,1);return function(){var T=w.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function b(u,x){function w(){}w.prototype=x.prototype,u.Z=x.prototype,u.prototype=new w,u.prototype.constructor=u,u.Ob=function(T,q,G){for(var ae=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)ae[Le-2]=arguments[Le];return x.prototype[q].apply(T,ae)}}var k=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function P(u){const x=u.length;if(x>0){const w=Array(x);for(let T=0;T<x;T++)w[T]=u[T];return w}return[]}function L(u,x){for(let T=1;T<arguments.length;T++){const q=arguments[T];var w=typeof q;if(w=w!="object"?w:q?Array.isArray(q)?"array":w:"null",w=="array"||w=="object"&&typeof q.length=="number"){w=u.length||0;const G=q.length||0;u.length=w+G;for(let ae=0;ae<G;ae++)u[w+ae]=q[ae]}else u.push(q)}}class N{constructor(x,w){this.i=x,this.j=w,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function O(u){d.setTimeout(()=>{throw u},0)}function z(){var u=I;let x=null;return u.g&&(x=u.g,u.g=u.g.next,u.g||(u.h=null),x.next=null),x}class ${constructor(){this.h=this.g=null}add(x,w){const T=Q.get();T.set(x,w),this.h?this.h.next=T:this.g=T,this.h=T}}var Q=new N(()=>new fe,u=>u.reset());class fe{constructor(){this.next=this.g=this.h=null}set(x,w){this.h=x,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,Y=!1,I=new $,E=()=>{const u=Promise.resolve(void 0);oe=()=>{u.then(R)}};function R(){for(var u;u=z();){try{u.h.call(u.g)}catch(w){O(w)}var x=Q;x.j(u),x.h<100&&(x.h++,u.next=x.g,x.g=u)}Y=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(u,x){this.type=u,this.g=this.target=x,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,x=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};d.addEventListener("test",w,x),d.removeEventListener("test",w,x)}catch{}return u})();function A(u){return/^[\s\xa0]*$/.test(u)}function ie(u,x){S.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,x)}b(ie,S),ie.prototype.init=function(u,x){const w=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=x,x=u.relatedTarget,x||(w=="mouseover"?x=u.fromElement:w=="mouseout"&&(x=u.toElement)),this.relatedTarget=x,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var we="closure_listenable_"+(Math.random()*1e6|0),Ce=0;function Me(u,x,w,T,q){this.listener=u,this.proxy=null,this.src=x,this.type=w,this.capture=!!T,this.ha=q,this.key=++Ce,this.da=this.fa=!1}function K(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function de(u,x,w){for(const T in u)x.call(w,u[T],T,u)}function le(u,x){for(const w in u)x.call(void 0,u[w],w,u)}function U(u){const x={};for(const w in u)x[w]=u[w];return x}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(u,x){let w,T;for(let q=1;q<arguments.length;q++){T=arguments[q];for(w in T)u[w]=T[w];for(let G=0;G<J.length;G++)w=J[G],Object.prototype.hasOwnProperty.call(T,w)&&(u[w]=T[w])}}function pe(u){this.src=u,this.g={},this.h=0}pe.prototype.add=function(u,x,w,T,q){const G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);const ae=Oe(u,x,T,q);return ae>-1?(x=u[ae],w||(x.fa=!1)):(x=new Me(x,this.src,G,!!T,q),x.fa=w,u.push(x)),x};function Ve(u,x){const w=x.type;if(w in u.g){var T=u.g[w],q=Array.prototype.indexOf.call(T,x,void 0),G;(G=q>=0)&&Array.prototype.splice.call(T,q,1),G&&(K(x),u.g[w].length==0&&(delete u.g[w],u.h--))}}function Oe(u,x,w,T){for(let q=0;q<u.length;++q){const G=u[q];if(!G.da&&G.listener==x&&G.capture==!!w&&G.ha==T)return q}return-1}var Ie="closure_lm_"+(Math.random()*1e6|0),ze={};function Qe(u,x,w,T,q){if(Array.isArray(x)){for(let G=0;G<x.length;G++)Qe(u,x[G],w,T,q);return null}return w=ko(w),u&&u[we]?u.J(x,w,f(T)?!!T.capture:!1,q):kt(u,x,w,!1,T,q)}function kt(u,x,w,T,q,G){if(!x)throw Error("Invalid event type");const ae=f(q)?!!q.capture:!!q;let Le=ra(u);if(Le||(u[Ie]=Le=new pe(u)),w=Le.add(x,w,T,ae,G),w.proxy)return w;if(T=en(),w.proxy=T,T.src=u,T.listener=w,u.addEventListener)M||(q=ae),q===void 0&&(q=!1),u.addEventListener(x.toString(),T,q);else if(u.attachEvent)u.attachEvent(ta(x.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return w}function en(){function u(w){return x.call(u.src,u.listener,w)}const x=dc;return u}function tn(u,x,w,T,q){if(Array.isArray(x))for(var G=0;G<x.length;G++)tn(u,x[G],w,T,q);else T=f(T)?!!T.capture:!!T,w=ko(w),u&&u[we]?(u=u.i,G=String(x).toString(),G in u.g&&(x=u.g[G],w=Oe(x,w,T,q),w>-1&&(K(x[w]),Array.prototype.splice.call(x,w,1),x.length==0&&(delete u.g[G],u.h--)))):u&&(u=ra(u))&&(x=u.g[x.toString()],u=-1,x&&(u=Oe(x,w,T,q)),(w=u>-1?x[u]:null)&&ds(w))}function ds(u){if(typeof u!="number"&&u&&!u.da){var x=u.src;if(x&&x[we])Ve(x.i,u);else{var w=u.type,T=u.proxy;x.removeEventListener?x.removeEventListener(w,T,u.capture):x.detachEvent?x.detachEvent(ta(w),T):x.addListener&&x.removeListener&&x.removeListener(T),(w=ra(x))?(Ve(w,u),w.h==0&&(w.src=null,x[Ie]=null)):K(u)}}}function ta(u){return u in ze?ze[u]:ze[u]="on"+u}function dc(u,x){if(u.da)u=!0;else{x=new ie(x,this);const w=u.listener,T=u.ha||u.src;u.fa&&ds(u),u=w.call(T,x)}return u}function ra(u){return u=u[Ie],u instanceof pe?u:null}var hi="__closure_events_fn_"+(Math.random()*1e9>>>0);function ko(u){return typeof u=="function"?u:(u[hi]||(u[hi]=function(x){return u.handleEvent(x)}),u[hi])}function Et(){C.call(this),this.i=new pe(this),this.M=this,this.G=null}b(Et,C),Et.prototype[we]=!0,Et.prototype.removeEventListener=function(u,x,w,T){tn(this,u,x,w,T)};function xt(u,x){var w,T=u.G;if(T)for(w=[];T;T=T.G)w.push(T);if(u=u.M,T=x.type||x,typeof x=="string")x=new S(x,u);else if(x instanceof S)x.target=x.target||u;else{var q=x;x=new S(T,u),se(x,q)}q=!0;let G,ae;if(w)for(ae=w.length-1;ae>=0;ae--)G=x.g=w[ae],q=Fr(G,T,!0,x)&&q;if(G=x.g=u,q=Fr(G,T,!0,x)&&q,q=Fr(G,T,!1,x)&&q,w)for(ae=0;ae<w.length;ae++)G=x.g=w[ae],q=Fr(G,T,!1,x)&&q}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var u=this.i;for(const x in u.g){const w=u.g[x];for(let T=0;T<w.length;T++)K(w[T]);delete u.g[x],u.h--}}this.G=null},Et.prototype.J=function(u,x,w,T){return this.i.add(String(u),x,!1,w,T)},Et.prototype.K=function(u,x,w,T){return this.i.add(String(u),x,!0,w,T)};function Fr(u,x,w,T){if(x=u.i.g[String(x)],!x)return!0;x=x.concat();let q=!0;for(let G=0;G<x.length;++G){const ae=x[G];if(ae&&!ae.da&&ae.capture==w){const Le=ae.listener,vt=ae.ha||ae.src;ae.fa&&Ve(u.i,ae),q=Le.call(vt,T)!==!1&&q}}return q&&!T.defaultPrevented}function Eo(u,x){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:d.setTimeout(u,x||0)}function To(u){u.g=Eo(()=>{u.g=null,u.i&&(u.i=!1,To(u))},u.l);const x=u.h;u.h=null,u.m.apply(null,x)}class hc extends C{constructor(x,w){super(),this.m=x,this.l=w,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:To(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hs(u){C.call(this),this.h=u,this.g={}}b(hs,C);var Io=[];function na(u){de(u.g,function(x,w){this.g.hasOwnProperty(w)&&ds(x)},u),u.g={}}hs.prototype.N=function(){hs.Z.N.call(this),na(this)},hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fs=d.JSON.stringify,fc=d.JSON.parse,fi=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function ms(){}function mc(){}var ps={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function sa(){S.call(this,"d")}b(sa,S);function No(){S.call(this,"c")}b(No,S);var Ur={},ia=null;function gs(){return ia=ia||new Et}Ur.Ia="serverreachability";function aa(u){S.call(this,Ur.Ia,u)}b(aa,S);function Pn(u){const x=gs();xt(x,new aa(x))}Ur.STAT_EVENT="statevent";function jn(u,x){S.call(this,Ur.STAT_EVENT,u),this.stat=x}b(jn,S);function gt(u){const x=gs();xt(x,new jn(x,u))}Ur.Ja="timingevent";function So(u,x){S.call(this,Ur.Ja,u),this.size=x}b(So,S);function ys(u,x){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},x)}function xs(){this.g=!0}xs.prototype.ua=function(){this.g=!1};function pc(u,x,w,T,q,G){u.info(function(){if(u.g)if(G){var ae="",Le=G.split("&");for(let et=0;et<Le.length;et++){var vt=Le[et].split("=");if(vt.length>1){const Tt=vt[0];vt=vt[1];const xr=Tt.split("_");ae=xr.length>=2&&xr[1]=="type"?ae+(Tt+"="+vt+"&"):ae+(Tt+"=redacted&")}}}else ae=null;else ae=G;return"XMLHTTP REQ ("+T+") [attempt "+q+"]: "+x+`
`+w+`
`+ae})}function gc(u,x,w,T,q,G,ae){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+q+"]: "+x+`
`+w+`
`+G+" "+ae})}function rn(u,x,w,T){u.info(function(){return"XMLHTTP TEXT ("+x+"): "+mi(u,w)+(T?" "+T:"")})}function yc(u,x){u.info(function(){return"TIMEOUT: "+x})}xs.prototype.info=function(){};function mi(u,x){if(!u.g)return x;if(!x)return null;try{const G=JSON.parse(x);if(G){for(u=0;u<G.length;u++)if(Array.isArray(G[u])){var w=G[u];if(!(w.length<2)){var T=w[1];if(Array.isArray(T)&&!(T.length<1)){var q=T[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ae=1;ae<T.length;ae++)T[ae]=""}}}}return fs(G)}catch{return x}}var vs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ws={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xc;function Dn(){}b(Dn,ms),Dn.prototype.g=function(){return new XMLHttpRequest},xc=new Dn;function nn(u){return encodeURIComponent(String(u))}function oa(u){var x=1;u=u.split(":");const w=[];for(;x>0&&u.length;)w.push(u.shift()),x--;return u.length&&w.push(u.join(":")),w}function Tr(u,x,w,T){this.j=u,this.i=x,this.l=w,this.S=T||1,this.V=new hs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vc}function vc(){this.i=null,this.g="",this.h=!1}var wc={},Ao={};function zr(u,x,w){u.M=1,u.A=Mn(Ir(x)),u.u=w,u.R=!0,Co(u,null)}function Co(u,x){u.F=Date.now(),pi(u),u.B=Ir(u.A);var w=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),Uo(w.i,"t",T),u.C=0,w=u.j.L,u.h=new vc,u.g=Cc(u.j,w?x:null,!u.u),u.P>0&&(u.O=new hc(g(u.Y,u,u.g),u.P)),x=u.V,w=u.g,T=u.ba;var q="readystatechange";Array.isArray(q)||(q&&(Io[0]=q.toString()),q=Io);for(let G=0;G<q.length;G++){const ae=Qe(w,q[G],T||x.handleEvent,!1,x.h||x);if(!ae)break;x.g[ae.key]=ae}x=u.J?U(u.J):{},u.u?(u.v||(u.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,x)):(u.v="GET",u.g.ea(u.B,u.v,null,x)),Pn(),pc(u.i,u.v,u.B,u.l,u.S,u.u)}Tr.prototype.ba=function(u){u=u.target;const x=this.O;x&&dn(u)==3?x.j():this.Y(u)},Tr.prototype.Y=function(u){try{if(u==this.g)e:{const Le=dn(this.g),vt=this.g.ya(),et=this.g.ca();if(!(Le<3)&&(Le!=3||this.g&&(this.h.h||this.g.la()||Sc(this.g)))){this.K||Le!=4||vt==7||(vt==8||et<=0?Pn(3):Pn(2)),la(this);var x=this.g.ca();this.X=x;var w=_c(this);if(this.o=x==200,gc(this.i,this.v,this.B,this.l,this.S,Le,x),this.o){if(this.U&&!this.L){t:{if(this.g){var T,q=this.g;if((T=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(T)){var G=T;break t}}G=null}if(u=G)rn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ot(this,u);else{this.o=!1,this.m=3,gt(12),Ln(this),gi(this);break e}}if(this.R){u=!0;let Tt;for(;!this.K&&this.C<w.length;)if(Tt=kc(this,w),Tt==Ao){Le==4&&(this.m=4,gt(14),u=!1),rn(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==wc){this.m=4,gt(15),rn(this.i,this.l,w,"[Invalid Chunk]"),u=!1;break}else rn(this.i,this.l,Tt,null),ot(this,Tt);if(bc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||w.length!=0||this.h.h||(this.m=1,gt(16),u=!1),this.o=this.o&&u,!u)rn(this.i,this.l,w,"[Invalid Chunked Response]"),Ln(this),gi(this);else if(w.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Ti(ae),ae.P=!0,gt(11))}}else rn(this.i,this.l,w,null),ot(this,w);Le==4&&Ln(this),this.o&&!this.K&&(Le==4?xa(this.j,this):(this.o=!1,pi(this)))}else $o(this.g),x==400&&w.indexOf("Unknown SID")>0?(this.m=3,gt(12)):(this.m=0,gt(13)),Ln(this),gi(this)}}}catch{}finally{}};function _c(u){if(!bc(u))return u.g.la();const x=Sc(u.g);if(x==="")return"";let w="";const T=x.length,q=dn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Ln(u),gi(u),"";u.h.i=new d.TextDecoder}for(let G=0;G<T;G++)u.h.h=!0,w+=u.h.i.decode(x[G],{stream:!(q&&G==T-1)});return x.length=0,u.h.g+=w,u.C=0,u.h.g}function bc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function kc(u,x){var w=u.C,T=x.indexOf(`
`,w);return T==-1?Ao:(w=Number(x.substring(w,T)),isNaN(w)?wc:(T+=1,T+w>x.length?Ao:(x=x.slice(T,T+w),u.C=T+w,x)))}Tr.prototype.cancel=function(){this.K=!0,Ln(this)};function pi(u){u.T=Date.now()+u.H,Ro(u,u.H)}function Ro(u,x){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ys(g(u.aa,u),x)}function la(u){u.D&&(d.clearTimeout(u.D),u.D=null)}Tr.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(yc(this.i,this.B),this.M!=2&&(Pn(),gt(17)),Ln(this),this.m=2,gi(this)):Ro(this,this.T-u)};function gi(u){u.j.I==0||u.K||xa(u.j,u)}function Ln(u){la(u);var x=u.O;x&&typeof x.dispose=="function"&&x.dispose(),u.O=null,na(u.V),u.g&&(x=u.g,u.g=null,x.abort(),x.dispose())}function ot(u,x){try{var w=u.j;if(w.I!=0&&(w.g==u||jo(w.h,u))){if(!u.L&&jo(w.h,u)&&w.I==3){try{var T=w.Ba.g.parse(x)}catch{T=null}if(Array.isArray(T)&&T.length==3){var q=T;if(q[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<u.F)ya(w),gr(w);else break e;mn(w),gt(18)}}else w.xa=q[1],0<w.xa-w.K&&q[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=ys(g(w.Va,w),6e3));yi(w.h)<=1&&w.ta&&(w.ta=void 0)}else yr(w,11)}else if((u.L||w.g==u)&&ya(w),!A(x))for(q=w.Ba.g.parse(x),x=0;x<q.length;x++){let et=q[x];const Tt=et[0];if(!(Tt<=w.K))if(w.K=Tt,et=et[1],w.I==2)if(et[0]=="c"){w.M=et[1],w.ba=et[2];const xr=et[3];xr!=null&&(w.ka=xr,w.j.info("VER="+w.ka));const zn=et[4];zn!=null&&(w.za=zn,w.j.info("SVER="+w.za));const pn=et[5];pn!=null&&typeof pn=="number"&&pn>0&&(T=1.5*pn,w.O=T,w.j.info("backChannelRequestTimeoutMs_="+T)),T=w;const gn=u.g;if(gn){const _a=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_a){var G=T.h;G.g||_a.indexOf("spdy")==-1&&_a.indexOf("quic")==-1&&_a.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(ua(G,G.h),G.h=null))}if(T.G){const Ho=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(T.wa=Ho,Je(T.J,T.G,Ho))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-u.F,w.j.info("Handshake RTT: "+w.T+"ms")),T=w;var ae=u;if(T.na=qo(T,T.L?T.ba:null,T.W),ae.L){xi(T.h,ae);var Le=ae,vt=T.O;vt&&(Le.H=vt),Le.D&&(la(Le),pi(Le)),T.g=ae}else Gt(T);w.i.length>0&&Un(w)}else et[0]!="stop"&&et[0]!="close"||yr(w,7);else w.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?yr(w,7):pa(w):et[0]!="noop"&&w.l&&w.l.qa(et),w.A=0)}}Pn(4)}catch{}}var rh=class{constructor(u,x){this.g=u,this.map=x}};function ca(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Po(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function yi(u){return u.h?1:u.g?u.g.size:0}function jo(u,x){return u.h?u.h==x:u.g?u.g.has(x):!1}function ua(u,x){u.g?u.g.add(x):u.h=x}function xi(u,x){u.h&&u.h==x?u.h=null:u.g&&u.g.has(x)&&u.g.delete(x)}ca.prototype.cancel=function(){if(this.i=fr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function fr(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let x=u.i;for(const w of u.g.values())x=x.concat(w.G);return x}return P(u.i)}var Ec=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mr(u,x){if(u){u=u.split("&");for(let w=0;w<u.length;w++){const T=u[w].indexOf("=");let q,G=null;T>=0?(q=u[w].substring(0,T),G=u[w].substring(T+1)):q=u[w],x(q,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function sn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;u instanceof sn?(this.l=u.l,vi(this,u.j),this.o=u.o,this.g=u.g,an(this,u.u),this.h=u.h,_s(this,zo(u.i)),this.m=u.m):u&&(x=String(u).match(Ec))?(this.l=!1,vi(this,x[1]||"",!0),this.o=wi(x[2]||""),this.g=wi(x[3]||"",!0),an(this,x[4]),this.h=wi(x[5]||"",!0),_s(this,x[6]||"",!0),this.m=wi(x[7]||"")):(this.l=!1,this.i=new He(null,this.l))}sn.prototype.toString=function(){const u=[];var x=this.j;x&&u.push(_i(x,Lo,!0),":");var w=this.g;return(w||x=="file")&&(u.push("//"),(x=this.o)&&u.push(_i(x,Lo,!0),"@"),u.push(nn(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&u.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(_i(w,w.charAt(0)=="/"?bi:Mo,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",_i(w,Vo)),u.join("")},sn.prototype.resolve=function(u){const x=Ir(this);let w=!!u.j;w?vi(x,u.j):w=!!u.o,w?x.o=u.o:w=!!u.g,w?x.g=u.g:w=u.u!=null;var T=u.h;if(w)an(x,u.u);else if(w=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var q=x.h.lastIndexOf("/");q!=-1&&(T=x.h.slice(0,q+1)+T)}if(q=T,q==".."||q==".")T="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){T=q.lastIndexOf("/",0)==0,q=q.split("/");const G=[];for(let ae=0;ae<q.length;){const Le=q[ae++];Le=="."?T&&ae==q.length&&G.push(""):Le==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),T&&ae==q.length&&G.push("")):(G.push(Le),T=!0)}T=G.join("/")}else T=q}return w?x.h=T:w=u.i.toString()!=="",w?_s(x,zo(u.i)):w=!!u.m,w&&(x.m=u.m),x};function Ir(u){return new sn(u)}function vi(u,x,w){u.j=w?wi(x,!0):x,u.j&&(u.j=u.j.replace(/:$/,""))}function an(u,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);u.u=x}else u.u=null}function _s(u,x,w){x instanceof He?(u.i=x,ha(u.i,u.l)):(w||(x=_i(x,nh)),u.i=new He(x,u.l))}function Je(u,x,w){u.i.set(x,w)}function Mn(u){return Je(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function wi(u,x){return u?x?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function _i(u,x,w){return typeof u=="string"?(u=encodeURI(u).replace(x,Do),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Do(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Lo=/[#\/\?@]/g,Mo=/[#\?:]/g,bi=/[#\?]/g,nh=/[#\?@]/g,Vo=/#/g;function He(u,x){this.h=this.g=null,this.i=u||null,this.j=!!x}function on(u){u.g||(u.g=new Map,u.h=0,u.i&&mr(u.i,function(x,w){u.add(decodeURIComponent(x.replace(/\+/g," ")),w)}))}r=He.prototype,r.add=function(u,x){on(this),this.i=null,u=ln(this,u);let w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(x),this.h+=1,this};function Oo(u,x){on(u),x=ln(u,x),u.g.has(x)&&(u.i=null,u.h-=u.g.get(x).length,u.g.delete(x))}function da(u,x){return on(u),x=ln(u,x),u.g.has(x)}r.forEach=function(u,x){on(this),this.g.forEach(function(w,T){w.forEach(function(q){u.call(x,q,T,this)},this)},this)};function Fo(u,x){on(u);let w=[];if(typeof x=="string")da(u,x)&&(w=w.concat(u.g.get(ln(u,x))));else for(u=Array.from(u.g.values()),x=0;x<u.length;x++)w=w.concat(u[x]);return w}r.set=function(u,x){return on(this),this.i=null,u=ln(this,u),da(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[x]),this.h+=1,this},r.get=function(u,x){return u?(u=Fo(this,u),u.length>0?String(u[0]):x):x};function Uo(u,x,w){Oo(u,x),w.length>0&&(u.i=null,u.g.set(ln(u,x),P(w)),u.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],x=Array.from(this.g.keys());for(let T=0;T<x.length;T++){var w=x[T];const q=nn(w);w=Fo(this,w);for(let G=0;G<w.length;G++){let ae=q;w[G]!==""&&(ae+="="+nn(w[G])),u.push(ae)}}return this.i=u.join("&")};function zo(u){const x=new He;return x.i=u.i,u.g&&(x.g=new Map(u.g),x.h=u.h),x}function ln(u,x){return x=String(x),u.j&&(x=x.toLowerCase()),x}function ha(u,x){x&&!u.j&&(on(u),u.i=null,u.g.forEach(function(w,T){const q=T.toLowerCase();T!=q&&(Oo(this,T),Uo(this,q,w))},u)),u.j=x}function cn(u,x){const w=new xs;if(d.Image){const T=new Image;T.onload=v(Ft,w,"TestLoadImage: loaded",!0,x,T),T.onerror=v(Ft,w,"TestLoadImage: error",!1,x,T),T.onabort=v(Ft,w,"TestLoadImage: abort",!1,x,T),T.ontimeout=v(Ft,w,"TestLoadImage: timeout",!1,x,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else x(!1)}function un(u,x){const w=new xs,T=new AbortController,q=setTimeout(()=>{T.abort(),Ft(w,"TestPingServer: timeout",!1,x)},1e4);fetch(u,{signal:T.signal}).then(G=>{clearTimeout(q),G.ok?Ft(w,"TestPingServer: ok",!0,x):Ft(w,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(q),Ft(w,"TestPingServer: error",!1,x)})}function Ft(u,x,w,T,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),T(w)}catch{}}function ki(){this.g=new fi}function Vn(u){this.i=u.Sb||null,this.h=u.ab||!1}b(Vn,ms),Vn.prototype.g=function(){return new pr(this.i,this.h)};function pr(u,x){Et.call(this),this.H=u,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(pr,Et),r=pr.prototype,r.open=function(u,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=x,this.readyState=1,$r(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(x.body=u),(this.H||d).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bs(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,$r(this)),this.g&&(this.readyState=3,$r(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tc(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Tc(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var x=u.value?u.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!u.done}))&&(this.response=this.responseText+=x)}u.done?bs(this):$r(this),this.readyState==3&&Tc(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,bs(this))},r.Na=function(u){this.g&&(this.response=u,bs(this))},r.ga=function(){this.g&&bs(this)};function bs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,$r(u)}r.setRequestHeader=function(u,x){this.A.append(u,x)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],x=this.h.entries();for(var w=x.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=x.next();return u.join(`\r
`)};function $r(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(pr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ic(u){let x="";return de(u,function(w,T){x+=T,x+=":",x+=w,x+=`\r
`}),x}function fa(u,x,w){e:{for(T in w){var T=!1;break e}T=!0}T||(w=Ic(w),typeof u=="string"?w!=null&&nn(w):Je(u,x,w))}function rt(u){Et.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(rt,Et);var Nc=/^https?$/i,sh=["POST","PUT"];r=rt.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,x,w,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);x=x?x.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xc.g(),this.g.onreadystatechange=k(g(this.Ca,this));try{this.B=!0,this.g.open(x,String(u),!0),this.B=!1}catch(G){ks(this,G);return}if(u=w||"",w=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var q in T)w.set(q,T[q]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const G of T.keys())w.set(G,T.get(G));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(w.keys()).find(G=>G.toLowerCase()=="content-type"),q=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(sh,x,void 0)>=0)||T||q||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ae]of w)this.g.setRequestHeader(G,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(G){ks(this,G)}};function ks(u,x){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=x,u.o=5,Es(u),Fn(u)}function Es(u){u.A||(u.A=!0,xt(u,"complete"),xt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,xt(this,"complete"),xt(this,"abort"),Fn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fn(this,!0)),rt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?On(this):this.Xa())},r.Xa=function(){On(this)};function On(u){if(u.h&&typeof l<"u"){if(u.v&&dn(u)==4)setTimeout(u.Ca.bind(u),0);else if(xt(u,"readystatechange"),dn(u)==4){u.h=!1;try{const G=u.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var w;if(!(w=x)){var T;if(T=G===0){let ae=String(u.D).match(Ec)[1]||null;!ae&&d.self&&d.self.location&&(ae=d.self.location.protocol.slice(0,-1)),T=!Nc.test(ae?ae.toLowerCase():"")}w=T}if(w)xt(u,"complete"),xt(u,"success");else{u.o=6;try{var q=dn(u)>2?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.ca()+"]",Es(u)}}finally{Fn(u)}}}}function Fn(u,x){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const w=u.g;u.g=null,x||xt(u,"ready");try{w.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function dn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return dn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var x=this.g.responseText;return u&&x.indexOf(u)==0&&(x=x.substring(u.length)),fc(x)}};function Sc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function $o(u){const x={};u=(u.g&&dn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(A(u[T]))continue;var w=oa(u[T]);const q=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const G=x[q]||[];x[q]=G,G.push(w)}le(x,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function hn(u,x,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||x}function ma(u){this.za=0,this.i=[],this.j=new xs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=hn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=hn("baseRetryDelayMs",5e3,u),this.Za=hn("retryDelaySeedMs",1e4,u),this.Ta=hn("forwardChannelMaxRetries",2,u),this.va=hn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new ca(u&&u.concurrentRequestLimit),this.Ba=new ki,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ma.prototype,r.ka=8,r.I=1,r.connect=function(u,x,w,T){gt(0),this.W=u,this.H=x||{},w&&T!==void 0&&(this.H.OSID=w,this.H.OAID=T),this.F=this.X,this.J=qo(this,null,this.W),Un(this)};function pa(u){if(ga(u),u.I==3){var x=u.V++,w=Ir(u.J);if(Je(w,"SID",u.M),Je(w,"RID",x),Je(w,"TYPE","terminate"),fn(u,w),x=new Tr(u,u.j,x),x.M=2,x.A=Mn(Ir(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(x.A.toString(),"")}catch{}!w&&d.Image&&(new Image().src=x.A,w=!0),w||(x.g=Cc(x.j,null),x.g.ea(x.A)),x.F=Date.now(),pi(x)}Ii(u)}function gr(u){u.g&&(Ti(u),u.g.cancel(),u.g=null)}function ga(u){gr(u),u.v&&(d.clearTimeout(u.v),u.v=null),ya(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function Un(u){if(!Po(u.h)&&!u.m){u.m=!0;var x=u.Ea;oe||E(),Y||(oe(),Y=!0),I.add(x,u),u.D=0}}function Ac(u,x){return yi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=x.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ys(g(u.Ea,u,x),va(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const q=new Tr(this,this.j,u);let G=this.o;if(this.U&&(G?(G=U(G),se(G,this.U)):G=this.U),this.u!==null||this.R||(q.J=G,G=null),this.S)e:{for(var x=0,w=0;w<this.i.length;w++){t:{var T=this.i[w];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(x+=T,x>4096){x=w;break e}if(x===4096||w===this.i.length-1){x=w+1;break e}}x=1e3}else x=1e3;x=Bo(this,q,x),w=Ir(this.J),Je(w,"RID",u),Je(w,"CVER",22),this.G&&Je(w,"X-HTTP-Session-Id",this.G),fn(this,w),G&&(this.R?x="headers="+nn(Ic(G))+"&"+x:this.u&&fa(w,this.u,G)),ua(this.h,q),this.Ra&&Je(w,"TYPE","init"),this.S?(Je(w,"$req",x),Je(w,"SID","null"),q.U=!0,zr(q,w,null)):zr(q,w,x),this.I=2}}else this.I==3&&(u?Ei(this,u):this.i.length==0||Po(this.h)||Ei(this))};function Ei(u,x){var w;x?w=x.l:w=u.V++;const T=Ir(u.J);Je(T,"SID",u.M),Je(T,"RID",w),Je(T,"AID",u.K),fn(u,T),u.u&&u.o&&fa(T,u.u,u.o),w=new Tr(u,u.j,w,u.D+1),u.u===null&&(w.J=u.o),x&&(u.i=x.G.concat(u.i)),x=Bo(u,w,1e3),w.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ua(u.h,w),zr(w,T,x)}function fn(u,x){u.H&&de(u.H,function(w,T){Je(x,T,w)}),u.l&&de({},function(w,T){Je(x,T,w)})}function Bo(u,x,w){w=Math.min(u.i.length,w);const T=u.l?g(u.l.Ka,u.l,u):null;e:{var q=u.i;let Le=-1;for(;;){const vt=["count="+w];Le==-1?w>0?(Le=q[0].g,vt.push("ofs="+Le)):Le=0:vt.push("ofs="+Le);let et=!0;for(let Tt=0;Tt<w;Tt++){var G=q[Tt].g;const xr=q[Tt].map;if(G-=Le,G<0)Le=Math.max(0,q[Tt].g-100),et=!1;else try{G="req"+G+"_"||"";try{var ae=xr instanceof Map?xr:Object.entries(xr);for(const[zn,pn]of ae){let gn=pn;f(pn)&&(gn=fs(pn)),vt.push(G+zn+"="+encodeURIComponent(gn))}}catch(zn){throw vt.push(G+"type="+encodeURIComponent("_badmap")),zn}}catch{T&&T(xr)}}if(et){ae=vt.join("&");break e}}ae=void 0}return u=u.i.splice(0,w),x.G=u,ae}function Gt(u){if(!u.g&&!u.v){u.Y=1;var x=u.Da;oe||E(),Y||(oe(),Y=!0),I.add(x,u),u.A=0}}function mn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ys(g(u.Da,u),va(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Ts(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ys(g(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,gt(10),gr(this),Ts(this))};function Ti(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function Ts(u){u.g=new Tr(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var x=Ir(u.na);Je(x,"RID","rpc"),Je(x,"SID",u.M),Je(x,"AID",u.K),Je(x,"CI",u.F?"0":"1"),!u.F&&u.ia&&Je(x,"TO",u.ia),Je(x,"TYPE","xmlhttp"),fn(u,x),u.u&&u.o&&fa(x,u.u,u.o),u.O&&(u.g.H=u.O);var w=u.g;u=u.ba,w.M=1,w.A=Mn(Ir(x)),w.u=null,w.R=!0,Co(w,u)}r.Va=function(){this.C!=null&&(this.C=null,gr(this),mn(this),gt(19))};function ya(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function xa(u,x){var w=null;if(u.g==x){ya(u),Ti(u),u.g=null;var T=2}else if(jo(u.h,x))w=x.G,xi(u.h,x),T=1;else return;if(u.I!=0){if(x.o)if(T==1){w=x.u?x.u.length:0,x=Date.now()-x.F;var q=u.D;T=gs(),xt(T,new So(T,w)),Un(u)}else Gt(u);else if(q=x.m,q==3||q==0&&x.X>0||!(T==1&&Ac(u,x)||T==2&&mn(u)))switch(w&&w.length>0&&(x=u.h,x.i=x.i.concat(w)),q){case 1:yr(u,5);break;case 4:yr(u,10);break;case 3:yr(u,6);break;default:yr(u,2)}}}function va(u,x){let w=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(w*=2),w*x}function yr(u,x){if(u.j.info("Error code "+x),x==2){var w=g(u.bb,u),T=u.Ua;const q=!T;T=new sn(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||vi(T,"https"),Mn(T),q?cn(T.toString(),w):un(T.toString(),w)}else gt(2);u.I=0,u.l&&u.l.pa(x),Ii(u),ga(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Ii(u){if(u.I=0,u.ja=[],u.l){const x=fr(u.h);(x.length!=0||u.i.length!=0)&&(L(u.ja,x),L(u.ja,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.oa()}}function qo(u,x,w){var T=w instanceof sn?Ir(w):new sn(w);if(T.g!="")x&&(T.g=x+"."+T.g),an(T,T.u);else{var q=d.location;T=q.protocol,x=x?x+"."+q.hostname:q.hostname,q=+q.port;const G=new sn(null);T&&vi(G,T),x&&(G.g=x),q&&an(G,q),w&&(G.h=w),T=G}return w=u.G,x=u.wa,w&&x&&Je(T,w,x),Je(T,"VER",u.ka),fn(u,T),T}function Cc(u,x,w){if(x&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=u.Aa&&!u.ma?new rt(new Vn({ab:w})):new rt(u.ma),x.Fa(u.L),x}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rc(){}r=Rc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function wa(){}wa.prototype.g=function(u,x){return new Ut(u,x)};function Ut(u,x){Et.call(this),this.g=new ma(x),this.l=u,this.h=x&&x.messageUrlParams||null,u=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(u?u["X-WebChannel-Content-Type"]=x.messageContentType:u={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(u?u["X-WebChannel-Client-Profile"]=x.sa:u={"X-WebChannel-Client-Profile":x.sa}),this.g.U=u,(u=x&&x.Qb)&&!A(u)&&(this.g.u=u),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!A(x)&&(this.g.G=x,u=this.h,u!==null&&x in u&&(u=this.h,x in u&&delete u[x])),this.j=new Is(this)}b(Ut,Et),Ut.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){pa(this.g)},Ut.prototype.o=function(u){var x=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.v&&(w={},w.__data__=fs(u),u=w);x.i.push(new rh(x.Ya++,u)),x.I==3&&Un(x)},Ut.prototype.N=function(){this.g.l=null,delete this.j,pa(this.g),delete this.g,Ut.Z.N.call(this)};function Pc(u){sa.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var x=u.__sm__;if(x){e:{for(const w in x){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,x=x!==null&&u in x?x[u]:void 0),this.data=x}else this.data=u}b(Pc,sa);function jc(){No.call(this),this.status=1}b(jc,No);function Is(u){this.g=u}b(Is,Rc),Is.prototype.ra=function(){xt(this.g,"a")},Is.prototype.qa=function(u){xt(this.g,new Pc(u))},Is.prototype.pa=function(u){xt(this.g,new jc)},Is.prototype.oa=function(){xt(this.g,"b")},wa.prototype.createWebChannel=wa.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,Wv=function(){return new wa},Hv=function(){return gs()},qv=Ur,im={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vs.NO_ERROR=0,vs.TIMEOUT=8,vs.HTTP_ERROR=6,Wu=vs,ws.COMPLETE="complete",Bv=ws,mc.EventType=ps,ps.OPEN="a",ps.CLOSE="b",ps.ERROR="c",ps.MESSAGE="d",Et.prototype.listen=Et.prototype.J,El=mc,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,$v=rt}).apply(typeof Su<"u"?Su:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let po="12.8.0";function mN(r){po=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=new Vm("@firebase/firestore");function qa(){return Wi.logLevel}function he(r,...e){if(Wi.logLevel<=$e.DEBUG){const t=e.map(Um);Wi.debug(`Firestore (${po}): ${r}`,...t)}}function ns(r,...e){if(Wi.logLevel<=$e.ERROR){const t=e.map(Um);Wi.error(`Firestore (${po}): ${r}`,...t)}}function no(r,...e){if(Wi.logLevel<=$e.WARN){const t=e.map(Um);Wi.warn(`Firestore (${po}): ${r}`,...t)}}function Um(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Gv(r,s,t)}function Gv(r,e,t){let s=`FIRESTORE (${po}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ns(s),new Error(s)}function Ze(r,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,r||Gv(e,a,s)}function Pe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends os{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Zt.UNAUTHENTICATED)))}shutdown(){}}class gN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class yN{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0,42304);let s=this.i;const a=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new En;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new En,e.enqueueRetryable((()=>a(this.currentUser)))};const d=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},f=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new En)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ze(typeof s.accessToken=="string",31837,{l:s}),new Kv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class xN{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class vN{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new xN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class x0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ze(this.o===void 0,3512);const s=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new x0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new x0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=_N(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function Be(r,e){return r<e?-1:r>e?1:0}function am(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const a=r.charAt(s),l=e.charAt(s);if(a!==l)return Uf(a)===Uf(l)?Be(a,l):Uf(a)?1:-1}return Be(r.length,e.length)}const bN=55296,kN=57343;function Uf(r){const e=r.charCodeAt(0);return e>=bN&&e<=kN}function so(r,e,t){return r.length===e.length&&r.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="__name__";class bn{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ae(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return bn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bn?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=bn.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Be(e.length,t.length)}static compareSegments(e,t){const s=bn.isNumericId(e),a=bn.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?bn.extractNumericId(e).compare(bn.extractNumericId(t)):am(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zs.fromString(e.substring(4,e.length-2))}}class it extends bn{construct(e,t,s){return new it(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new it(t)}static emptyPath(){return new it([])}}const EN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends bn{construct(e,t,s){return new Ht(e,t,s)}static isValidIdentifier(e){return EN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===v0}static keyField(){return new Ht([v0])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new ce(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new ce(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,a+=2}else f==="`"?(d=!d,a++):f!=="."||d?(s+=f,a++):(l(),a++)}if(l(),d)throw new ce(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(t)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(it.fromString(e))}static fromName(e){return new ke(it.fromString(e).popFirst(5))}static empty(){return new ke(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new it(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(r,e,t){if(!t)throw new ce(X.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function TN(r,e,t,s){if(e===!0&&s===!0)throw new ce(X.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function w0(r){if(!ke.isDocumentKey(r))throw new ce(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function _0(r){if(ke.isDocumentKey(r))throw new ce(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Yv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Dd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function Or(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ce(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Dd(r);throw new ce(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function IN(r,e){if(e<=0)throw new ce(X.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(r,e){const t={typeString:r};return e&&(t.value=e),t}function tc(r,e){if(!Yv(r))throw new ce(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const d=r[s];if(a&&typeof d!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ce(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=-62135596800,k0=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*k0);return new at(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<b0)throw new ce(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/k0}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tc(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-b0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:At("string",at._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new at(0,0))}static max(){return new De(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=-1;function NN(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=De.fromTimestamp(s===1e9?new at(t+1,0):new at(t,s));return new ti(a,ke.empty(),e)}function SN(r){return new ti(r.readTime,r.key,Fl)}class ti{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ti(De.min(),ke.empty(),Fl)}static max(){return new ti(De.max(),ke.empty(),Fl)}}function AN(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ke.comparator(r.documentKey,e.documentKey),t!==0?t:Be(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(r){if(r.code!==X.FAILED_PRECONDITION||r.message!==CN)throw r;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.reject(t)}static resolve(e){return new Z(((t,s)=>{t(e)}))}static reject(e){return new Z(((t,s)=>{s(e)}))}static waitFor(e){return new Z(((t,s)=>{let a=0,l=0,d=!1;e.forEach((f=>{++a,f.next((()=>{++l,d&&l===a&&t()}),(p=>s(p)))})),d=!0,l===a&&t()}))}static or(e){let t=Z.resolve(!1);for(const s of e)t=t.next((a=>a?Z.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new Z(((s,a)=>{const l=e.length,d=new Array(l);let f=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{d[g]=v,++f,f===l&&s(d)}),(v=>a(v)))}}))}static doWhile(e,t){return new Z(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function PN(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function yo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ld.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=-1;function Md(r){return r==null}function id(r){return r===0&&1/r==-1/0}function jN(r){return typeof r=="number"&&Number.isInteger(r)&&!id(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="";function DN(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=E0(e)),e=LN(r.get(t),e);return E0(e)}function LN(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case Jv:t+="";break;default:t+=l}}return t}function E0(r){return r+Jv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function oi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function MN(r,e){const t=[];for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.push(e(r[s],s,r));return t}function Xv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||Bt.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Au(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Au(this.root,e,this.comparator,!1)}getReverseIterator(){return new Au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Au(this.root,e,this.comparator,!0)}}class Au{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Bt.RED,this.left=a??Bt.EMPTY,this.right=l??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Bt(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Bt.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new Bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new I0(this.data.getIterator())}getIteratorFrom(e){return new I0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new jt(this.comparator);return t.data=e,t}}class I0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new kr([])}unionWith(e){let t=new jt(Ht.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new kr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return so(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Zv("Invalid base64 string: "+l):l}})(e);return new Wt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let d=0;d<a.length;++d)l+=String.fromCharCode(a[d]);return l})(e);return new Wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const VN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ri(r){if(Ze(!!r,39018),typeof r=="string"){let e=0;const t=VN.exec(r);if(Ze(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_t(r.seconds),nanos:_t(r.nanos)}}function _t(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ni(r){return typeof r=="string"?Wt.fromBase64String(r):Wt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="server_timestamp",tw="__type__",rw="__previous_value__",nw="__local_write_time__";function Bm(r){return(r?.mapValue?.fields||{})[tw]?.stringValue===ew}function Vd(r){const e=r.mapValue.fields[rw];return Bm(e)?Vd(e):e}function Ul(r){const e=ri(r.mapValue.fields[nw].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,t,s,a,l,d,f,p,g,v,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=b}}const ad="(default)";class zl{constructor(e,t){this.projectId=e,this.database=t||ad}static empty(){return new zl("","")}get isDefaultDatabase(){return this.database===ad}isEqual(e){return e instanceof zl&&e.projectId===this.projectId&&e.database===this.database}}function FN(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ce(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="__type__",UN="__max__",Cu={mapValue:{}},iw="__vector__",od="value";function si(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Bm(r)?4:$N(r)?9007199254740991:zN(r)?10:11:Ae(28295,{value:r})}function Cn(r,e){if(r===e)return!0;const t=si(r);if(t!==si(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ul(r).isEqual(Ul(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const d=ri(a.timestampValue),f=ri(l.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return ni(a.bytesValue).isEqual(ni(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return _t(a.geoPointValue.latitude)===_t(l.geoPointValue.latitude)&&_t(a.geoPointValue.longitude)===_t(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return _t(a.integerValue)===_t(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const d=_t(a.doubleValue),f=_t(l.doubleValue);return d===f?id(d)===id(f):isNaN(d)&&isNaN(f)}return!1})(r,e);case 9:return so(r.arrayValue.values||[],e.arrayValue.values||[],Cn);case 10:case 11:return(function(a,l){const d=a.mapValue.fields||{},f=l.mapValue.fields||{};if(T0(d)!==T0(f))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(f[p]===void 0||!Cn(d[p],f[p])))return!1;return!0})(r,e);default:return Ae(52216,{left:r})}}function $l(r,e){return(r.values||[]).find((t=>Cn(t,e)))!==void 0}function io(r,e){if(r===e)return 0;const t=si(r),s=si(e);if(t!==s)return Be(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(r.booleanValue,e.booleanValue);case 2:return(function(l,d){const f=_t(l.integerValue||l.doubleValue),p=_t(d.integerValue||d.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(r,e);case 3:return N0(r.timestampValue,e.timestampValue);case 4:return N0(Ul(r),Ul(e));case 5:return am(r.stringValue,e.stringValue);case 6:return(function(l,d){const f=ni(l),p=ni(d);return f.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(l,d){const f=l.split("/"),p=d.split("/");for(let g=0;g<f.length&&g<p.length;g++){const v=Be(f[g],p[g]);if(v!==0)return v}return Be(f.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,d){const f=Be(_t(l.latitude),_t(d.latitude));return f!==0?f:Be(_t(l.longitude),_t(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return S0(r.arrayValue,e.arrayValue);case 10:return(function(l,d){const f=l.fields||{},p=d.fields||{},g=f[od]?.arrayValue,v=p[od]?.arrayValue,b=Be(g?.values?.length||0,v?.values?.length||0);return b!==0?b:S0(g,v)})(r.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Cu.mapValue&&d===Cu.mapValue)return 0;if(l===Cu.mapValue)return 1;if(d===Cu.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),g=d.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let b=0;b<p.length&&b<v.length;++b){const k=am(p[b],v[b]);if(k!==0)return k;const P=io(f[p[b]],g[v[b]]);if(P!==0)return P}return Be(p.length,v.length)})(r.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function N0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Be(r,e);const t=ri(r),s=ri(e),a=Be(t.seconds,s.seconds);return a!==0?a:Be(t.nanos,s.nanos)}function S0(r,e){const t=r.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=io(t[a],s[a]);if(l)return l}return Be(t.length,s.length)}function ao(r){return om(r)}function om(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=ri(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ni(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ke.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=om(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const d of s)l?l=!1:a+=",",a+=`${d}:${om(t.fields[d])}`;return a+"}"})(r.mapValue):Ae(61005,{value:r})}function Gu(r){switch(si(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vd(r);return e?16+Gu(e):16;case 5:return 2*r.stringValue.length;case 6:return ni(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+Gu(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let a=0;return oi(s.fields,((l,d)=>{a+=l.length+Gu(d)})),a})(r.mapValue);default:throw Ae(13486,{value:r})}}function A0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function lm(r){return!!r&&"integerValue"in r}function qm(r){return!!r&&"arrayValue"in r}function C0(r){return!!r&&"nullValue"in r}function R0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Ku(r){return!!r&&"mapValue"in r}function zN(r){return(r?.mapValue?.fields||{})[sw]?.stringValue===iw}function Al(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return oi(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Al(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Al(r.arrayValue.values[t]);return e}return{...r}}function $N(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===UN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.value=e}static empty(){return new sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Ku(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Al(t)}setAll(e){let t=Ht.emptyPath(),s={},a=[];e.forEach(((d,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,s,a),s={},a=[],t=f.popLast()}d?s[f.lastSegment()]=Al(d):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Ku(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Cn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Ku(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){oi(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new sr(Al(this.value))}}function aw(r){const e=[];return oi(r.fields,((t,s)=>{const a=new Ht([t]);if(Ku(s)){const l=aw(s.mapValue).fields;if(l.length===0)e.push(a);else for(const d of l)e.push(a.child(d))}else e.push(a)})),new kr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,t,s,a,l,d,f){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=d,this.documentState=f}static newInvalidDocument(e){return new er(e,0,De.min(),De.min(),De.min(),sr.empty(),0)}static newFoundDocument(e,t,s,a){return new er(e,1,t,De.min(),s,a,0)}static newNoDocument(e,t){return new er(e,2,t,De.min(),De.min(),sr.empty(),0)}static newUnknownDocument(e,t){return new er(e,3,t,De.min(),De.min(),sr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t){this.position=e,this.inclusive=t}}function P0(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const l=e[a],d=r.position[a];if(l.field.isKeyField()?s=ke.comparator(ke.fromName(d.referenceValue),t.key):s=io(d,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function j0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Cn(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,t="asc"){this.field=e,this.dir=t}}function BN(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{}class St extends ow{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new HN(e,t,s):t==="array-contains"?new KN(e,s):t==="in"?new QN(e,s):t==="not-in"?new YN(e,s):t==="array-contains-any"?new JN(e,s):new St(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new WN(e,s):new GN(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(io(t,this.value)):t!==null&&si(this.value)===si(t)&&this.matchesComparison(io(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xr extends ow{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Xr(e,t)}matches(e){return lw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lw(r){return r.op==="and"}function cw(r){return qN(r)&&lw(r)}function qN(r){for(const e of r.filters)if(e instanceof Xr)return!1;return!0}function cm(r){if(r instanceof St)return r.field.canonicalString()+r.op.toString()+ao(r.value);if(cw(r))return r.filters.map((e=>cm(e))).join(",");{const e=r.filters.map((t=>cm(t))).join(",");return`${r.op}(${e})`}}function uw(r,e){return r instanceof St?(function(s,a){return a instanceof St&&s.op===a.op&&s.field.isEqual(a.field)&&Cn(s.value,a.value)})(r,e):r instanceof Xr?(function(s,a){return a instanceof Xr&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,d,f)=>l&&uw(d,a.filters[f])),!0):!1})(r,e):void Ae(19439)}function dw(r){return r instanceof St?(function(t){return`${t.field.canonicalString()} ${t.op} ${ao(t.value)}`})(r):r instanceof Xr?(function(t){return t.op.toString()+" {"+t.getFilters().map(dw).join(" ,")+"}"})(r):"Filter"}class HN extends St{constructor(e,t,s){super(e,t,s),this.key=ke.fromName(s.referenceValue)}matches(e){const t=ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class WN extends St{constructor(e,t){super(e,"in",t),this.keys=hw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class GN extends St{constructor(e,t){super(e,"not-in",t),this.keys=hw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function hw(r,e){return(e.arrayValue?.values||[]).map((t=>ke.fromName(t.referenceValue)))}class KN extends St{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qm(t)&&$l(t.arrayValue,this.value)}}class QN extends St{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&$l(this.value.arrayValue,t)}}class YN extends St{constructor(e,t){super(e,"not-in",t)}matches(e){if($l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!$l(this.value.arrayValue,t)}}class JN extends St{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>$l(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,t=null,s=[],a=[],l=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=d,this.endAt=f,this.Te=null}}function D0(r,e=null,t=[],s=[],a=null,l=null,d=null){return new XN(r,e,t,s,a,l,d)}function Hm(r){const e=Pe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>cm(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Md(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>ao(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>ao(s))).join(",")),e.Te=t}return e.Te}function Wm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!BN(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!uw(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!j0(r.startAt,e.startAt)&&j0(r.endAt,e.endAt)}function um(r){return ke.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,t=null,s=[],a=[],l=null,d="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=d,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function ZN(r,e,t,s,a,l,d,f){return new xo(r,e,t,s,a,l,d,f)}function Gm(r){return new xo(r)}function L0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function eS(r){return ke.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function fw(r){return r.collectionGroup!==null}function Cl(r){const e=Pe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new jt(Ht.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Bl(l,s))})),t.has(Ht.keyField().canonicalString())||e.Ie.push(new Bl(Ht.keyField(),s))}return e.Ie}function Tn(r){const e=Pe(r);return e.Ee||(e.Ee=mw(e,Cl(r))),e.Ee}function tS(r){const e=Pe(r);return e.Re||(e.Re=mw(e,r.explicitOrderBy)),e.Re}function mw(r,e){if(r.limitType==="F")return D0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Bl(a.field,l)}));const t=r.endAt?new ld(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new ld(r.startAt.position,r.startAt.inclusive):null;return D0(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function dm(r,e){const t=r.filters.concat([e]);return new xo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function rS(r,e){const t=r.explicitOrderBy.concat([e]);return new xo(r.path,r.collectionGroup,t,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function cd(r,e,t){return new xo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Od(r,e){return Wm(Tn(r),Tn(e))&&r.limitType===e.limitType}function pw(r){return`${Hm(Tn(r))}|lt:${r.limitType}`}function Ha(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>dw(a))).join(", ")}]`),Md(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>ao(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>ao(a))).join(",")),`Target(${s})`})(Tn(r))}; limitType=${r.limitType})`}function Fd(r,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ke.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,a){for(const l of Cl(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(s,a){return!(s.startAt&&!(function(d,f,p){const g=P0(d,f,p);return d.inclusive?g<=0:g<0})(s.startAt,Cl(s),a)||s.endAt&&!(function(d,f,p){const g=P0(d,f,p);return d.inclusive?g>=0:g>0})(s.endAt,Cl(s),a))})(r,e)}function nS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function gw(r){return(e,t)=>{let s=!1;for(const a of Cl(r)){const l=sS(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function sS(r,e,t){const s=r.field.isKeyField()?ke.comparator(e.key,t.key):(function(l,d,f){const p=d.data.field(l),g=f.data.field(l);return p!==null&&g!==null?io(p,g):Ae(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){oi(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return Xv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=new pt(ke.comparator);function ss(){return iS}const yw=new pt(ke.comparator);function Tl(...r){let e=yw;for(const t of r)e=e.insert(t.key,t);return e}function xw(r){let e=yw;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function zi(){return Rl()}function vw(){return Rl()}function Rl(){return new Zi((r=>r.toString()),((r,e)=>r.isEqual(e)))}const aS=new pt(ke.comparator),oS=new jt(ke.comparator);function qe(...r){let e=oS;for(const t of r)e=e.add(t);return e}const lS=new jt(Be);function cS(){return lS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:id(e)?"-0":e}}function ww(r){return{integerValue:""+r}}function uS(r,e){return jN(e)?ww(e):Km(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(){this._=void 0}}function dS(r,e,t){return r instanceof ql?(function(a,l){const d={fields:{[tw]:{stringValue:ew},[nw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Bm(l)&&(l=Vd(l)),l&&(d.fields[rw]=l),{mapValue:d}})(t,e):r instanceof Hl?bw(r,e):r instanceof Wl?kw(r,e):(function(a,l){const d=_w(a,l),f=M0(d)+M0(a.Ae);return lm(d)&&lm(a.Ae)?ww(f):Km(a.serializer,f)})(r,e)}function hS(r,e,t){return r instanceof Hl?bw(r,e):r instanceof Wl?kw(r,e):t}function _w(r,e){return r instanceof ud?(function(s){return lm(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class ql extends Ud{}class Hl extends Ud{constructor(e){super(),this.elements=e}}function bw(r,e){const t=Ew(e);for(const s of r.elements)t.some((a=>Cn(a,s)))||t.push(s);return{arrayValue:{values:t}}}class Wl extends Ud{constructor(e){super(),this.elements=e}}function kw(r,e){let t=Ew(e);for(const s of r.elements)t=t.filter((a=>!Cn(a,s)));return{arrayValue:{values:t}}}class ud extends Ud{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function M0(r){return _t(r.integerValue||r.doubleValue)}function Ew(r){return qm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,t){this.field=e,this.transform=t}}function mS(r,e){return r.field.isEqual(e.field)&&(function(s,a){return s instanceof Hl&&a instanceof Hl||s instanceof Wl&&a instanceof Wl?so(s.elements,a.elements,Cn):s instanceof ud&&a instanceof ud?Cn(s.Ae,a.Ae):s instanceof ql&&a instanceof ql})(r.transform,e.transform)}class pS{constructor(e,t){this.version=e,this.transformResults=t}}class Mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class zd{}function Tw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Qm(r.key,Mr.none()):new rc(r.key,r.data,Mr.none());{const t=r.data,s=sr.empty();let a=new jt(Ht.comparator);for(let l of e.fields)if(!a.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?s.delete(l):s.set(l,d),a=a.add(l)}return new li(r.key,s,new kr(a.toArray()),Mr.none())}}function gS(r,e,t){r instanceof rc?(function(a,l,d){const f=a.value.clone(),p=O0(a.fieldTransforms,l,d.transformResults);f.setAll(p),l.convertToFoundDocument(d.version,f).setHasCommittedMutations()})(r,e,t):r instanceof li?(function(a,l,d){if(!Qu(a.precondition,l))return void l.convertToUnknownDocument(d.version);const f=O0(a.fieldTransforms,l,d.transformResults),p=l.data;p.setAll(Iw(a)),p.setAll(f),l.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,t):(function(a,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Pl(r,e,t,s){return r instanceof rc?(function(l,d,f,p){if(!Qu(l.precondition,d))return f;const g=l.value.clone(),v=F0(l.fieldTransforms,p,d);return g.setAll(v),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null})(r,e,t,s):r instanceof li?(function(l,d,f,p){if(!Qu(l.precondition,d))return f;const g=F0(l.fieldTransforms,p,d),v=d.data;return v.setAll(Iw(l)),v.setAll(g),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(r,e,t,s):(function(l,d,f){return Qu(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f})(r,e,t)}function yS(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),l=_w(s.transform,a||null);l!=null&&(t===null&&(t=sr.empty()),t.set(s.field,l))}return t||null}function V0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&so(s,a,((l,d)=>mS(l,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class rc extends zd{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class li extends zd{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Iw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function O0(r,e,t){const s=new Map;Ze(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let a=0;a<t.length;a++){const l=r[a],d=l.transform,f=e.data.field(l.field);s.set(l.field,hS(d,f,t[a]))}return s}function F0(r,e,t){const s=new Map;for(const a of r){const l=a.transform,d=t.data.field(a.field);s.set(a.field,dS(l,d,e))}return s}class Qm extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xS extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&gS(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Pl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Pl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=vw();return this.mutations.forEach((a=>{const l=e.get(a.key),d=l.overlayedDocument;let f=this.applyToLocalView(d,l.mutatedFields);f=t.has(a.key)?null:f;const p=Tw(d,f);p!==null&&s.set(a.key,p),d.isValidDocument()||d.convertToNoDocument(De.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),qe())}isEqual(e){return this.batchId===e.batchId&&so(this.mutations,e.mutations,((t,s)=>V0(t,s)))&&so(this.baseMutations,e.baseMutations,((t,s)=>V0(t,s)))}}class Ym{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){Ze(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return aS})();const l=e.mutations;for(let d=0;d<l.length;d++)a=a.insert(l[d].key,s[d].version);return new Ym(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,t,s){this.alias=e,this.aggregateType=t,this.fieldPath=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,We;function kS(r){switch(r){case X.OK:return Ae(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function Nw(r){if(r===void 0)return ns("GRPC error has no .code"),X.UNKNOWN;switch(r){case Nt.OK:return X.OK;case Nt.CANCELLED:return X.CANCELLED;case Nt.UNKNOWN:return X.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return X.INTERNAL;case Nt.UNAVAILABLE:return X.UNAVAILABLE;case Nt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Nt.NOT_FOUND:return X.NOT_FOUND;case Nt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Nt.ABORTED:return X.ABORTED;case Nt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Nt.DATA_LOSS:return X.DATA_LOSS;default:return Ae(39323,{code:r})}}(We=Nt||(Nt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=new Zs([4294967295,4294967295],0);function U0(r){const e=ES().encode(r),t=new zv;return t.update(e),new Uint8Array(t.digest())}function z0(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Zs([t,s],0),new Zs([a,l],0)]}class Jm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Il(`Invalid padding: ${t}`);if(s<0)throw new Il(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Il(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Il(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Zs.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(Zs.fromNumber(s)));return a.compare(TS)===1&&(a=new Zs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=U0(e),[s,a]=z0(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(s,a,l);if(!this.we(d))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new Jm(l,a,t);return s.forEach((f=>d.insert(f))),d}insert(e){if(this.ge===0)return;const t=U0(e),[s,a]=z0(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(s,a,l);this.be(d)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Il extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,nc.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new $d(De.min(),a,new pt(Be),ss(),qe())}}class nc{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new nc(s,t,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t,s,a){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=a}}class Sw{constructor(e,t){this.targetId=e,this.Ce=t}}class Aw{constructor(e,t,s=Wt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class $0{constructor(){this.ve=0,this.Fe=B0(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),t=qe(),s=qe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Ae(38017,{changeType:l})}})),new nc(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=B0()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class IS{constructor(e){this.Ge=e,this.ze=new Map,this.je=ss(),this.He=Ru(),this.Je=Ru(),this.Ze=new pt(Be)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(um(l))if(s===0){const d=new ke(l.path);this.et(t,d,er.newNoDocument(d,De.min()))}else Ze(s===1,20013,{expectedCount:s});else{const d=this._t(t);if(d!==s){const f=this.ut(e),p=f?this.ct(f,e,d):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let d,f;try{d=ni(s).toUint8Array()}catch(p){if(p instanceof Zv)return no("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Jm(d,a,l)}catch(p){return no(p instanceof Il?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const d=this.Ge.ht(),f=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,d)=>{const f=this.ot(d);if(f){if(l.current&&um(f.target)){const p=new ke(f.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,er.newNoDocument(p,e))}l.Be&&(t.set(d,l.ke()),l.Ke())}}));let s=qe();this.Je.forEach(((l,d)=>{let f=!0;d.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,d)=>d.setReadTime(e)));const a=new $d(e,t,this.Ze,this.je,s);return this.je=ss(),this.He=Ru(),this.Je=Ru(),this.Ze=new pt(Be),a}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new $0,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new jt(Be),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new jt(Be),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ru(){return new pt(ke.comparator)}function B0(){return new pt(ke.comparator)}const NS={asc:"ASCENDING",desc:"DESCENDING"},SS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AS={and:"AND",or:"OR"};class CS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hm(r,e){return r.useProto3Json||Md(e)?e:{value:e}}function dd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function RS(r,e){return dd(r,e.toTimestamp())}function In(r){return Ze(!!r,49232),De.fromTimestamp((function(t){const s=ri(t);return new at(s.seconds,s.nanos)})(r))}function Xm(r,e){return fm(r,e).canonicalString()}function fm(r,e){const t=(function(a){return new it(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Rw(r){const e=it.fromString(r);return Ze(Vw(e),10190,{key:e.toString()}),e}function mm(r,e){return Xm(r.databaseId,e.path)}function zf(r,e){const t=Rw(e);if(t.get(1)!==r.databaseId.projectId)throw new ce(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ce(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ke(jw(t))}function Pw(r,e){return Xm(r.databaseId,e)}function PS(r){const e=Rw(r);return e.length===4?it.emptyPath():jw(e)}function pm(r){return new it(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function jw(r){return Ze(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function q0(r,e,t){return{name:mm(r,e),fields:t.value.mapValue.fields}}function jS(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ae(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(Ze(v===void 0||typeof v=="string",58123),Wt.fromBase64String(v||"")):(Ze(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Wt.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&(function(g){const v=g.code===void 0?X.UNKNOWN:Nw(g.code);return new ce(v,g.message||"")})(d);t=new Aw(s,a,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=zf(r,s.document.name),l=In(s.document.updateTime),d=s.document.createTime?In(s.document.createTime):De.min(),f=new sr({mapValue:{fields:s.document.fields}}),p=er.newFoundDocument(a,l,d,f),g=s.targetIds||[],v=s.removedTargetIds||[];t=new Yu(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=zf(r,s.document),l=s.readTime?In(s.readTime):De.min(),d=er.newNoDocument(a,l),f=s.removedTargetIds||[];t=new Yu([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=zf(r,s.document),l=s.removedTargetIds||[];t=new Yu([],l,a,null)}else{if(!("filter"in e))return Ae(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,d=new bS(a,l),f=s.targetId;t=new Sw(f,d)}}return t}function DS(r,e){let t;if(e instanceof rc)t={update:q0(r,e.key,e.value)};else if(e instanceof Qm)t={delete:mm(r,e.key)};else if(e instanceof li)t={update:q0(r,e.key,e.data),updateMask:BS(e.fieldMask)};else{if(!(e instanceof xS))return Ae(16599,{dt:e.type});t={verify:mm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,d){const f=d.transform;if(f instanceof ql)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Hl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Wl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ud)return{fieldPath:d.field.canonicalString(),increment:f.Ae};throw Ae(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:RS(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)})(r,e.precondition)),t}function LS(r,e){return r&&r.length>0?(Ze(e!==void 0,14353),r.map((t=>(function(a,l){let d=a.updateTime?In(a.updateTime):In(l);return d.isEqual(De.min())&&(d=In(l)),new pS(d,a.transformResults||[])})(t,e)))):[]}function MS(r,e){return{documents:[Pw(r,e.path)]}}function Dw(r,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Pw(r,a);const l=(function(g){if(g.length!==0)return Mw(Xr.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(g){if(g.length!==0)return g.map((v=>(function(k){return{field:qs(k.field),direction:US(k.dir)}})(v)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=hm(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function VS(r,e,t,s){const{ft:a,parent:l}=Dw(r,e),d={},f=[];let p=0;return t.forEach((g=>{const v="aggregate_"+p++;d[v]=g.alias,g.aggregateType==="count"?f.push({alias:v,count:{}}):g.aggregateType==="avg"?f.push({alias:v,avg:{field:qs(g.fieldPath)}}):g.aggregateType==="sum"&&f.push({alias:v,sum:{field:qs(g.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:f,structuredQuery:a.structuredQuery},parent:a.parent},gt:d,parent:l}}function OS(r){let e=PS(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){Ze(s===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(b){const k=Lw(b);return k instanceof Xr&&cw(k)?k.getFilters():[k]})(t.where));let d=[];t.orderBy&&(d=(function(b){return b.map((k=>(function(L){return new Bl(Wa(L.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(k)))})(t.orderBy));let f=null;t.limit&&(f=(function(b){let k;return k=typeof b=="object"?b.value:b,Md(k)?null:k})(t.limit));let p=null;t.startAt&&(p=(function(b){const k=!!b.before,P=b.values||[];return new ld(P,k)})(t.startAt));let g=null;return t.endAt&&(g=(function(b){const k=!b.before,P=b.values||[];return new ld(P,k)})(t.endAt)),ZN(e,a,d,l,f,"F",p,g)}function FS(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Lw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Wa(t.unaryFilter.field);return St.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Wa(t.unaryFilter.field);return St.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Wa(t.unaryFilter.field);return St.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Wa(t.unaryFilter.field);return St.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(r):r.fieldFilter!==void 0?(function(t){return St.create(Wa(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Xr.create(t.compositeFilter.filters.map((s=>Lw(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(r):Ae(30097,{filter:r})}function US(r){return NS[r]}function zS(r){return SS[r]}function $S(r){return AS[r]}function qs(r){return{fieldPath:r.canonicalString()}}function Wa(r){return Ht.fromServerFormat(r.fieldPath)}function Mw(r){return r instanceof St?(function(t){if(t.op==="=="){if(R0(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NAN"}};if(C0(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(R0(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NOT_NAN"}};if(C0(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qs(t.field),op:zS(t.op),value:t.value}}})(r):r instanceof Xr?(function(t){const s=t.getFilters().map((a=>Mw(a)));return s.length===1?s[0]:{compositeFilter:{op:$S(t.op),filters:s}}})(r):Ae(54877,{filter:r})}function BS(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Vw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function Ow(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,t,s,a,l=De.min(),d=De.min(),f=Wt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.yt=e}}function HS(r){const e=OS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?cd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.Sn=new GS}addToCollectionParentIndex(e,t){return this.Sn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(ti.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(ti.min())}updateCollectionGroup(e,t,s){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class GS{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new jt(it.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new jt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fw=41943040;class hr{static withCacheSize(e){return new hr(e,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hr.DEFAULT_COLLECTION_PERCENTILE=10,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hr.DEFAULT=new hr(Fw,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hr.DISABLED=new hr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new oo(0)}static ar(){return new oo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="LruGarbageCollector",KS=1048576;function G0([r,e],[t,s]){const a=Be(r,t);return a===0?Be(e,s):a}class QS{constructor(e){this.Pr=e,this.buffer=new jt(G0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();G0(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class YS{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){he(W0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){yo(t)?he(W0,"Ignoring IndexedDB error during garbage collection: ",t):await go(t)}await this.Ar(3e5)}))}}class JS{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(Ld.ce);const s=new QS(t);return this.Vr.forEachTarget(e,(a=>s.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>s.Er(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(H0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),H0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,a,l,d,f,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,d=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(s=b,f=Date.now(),this.removeTargets(e,s,t)))).next((b=>(l=b,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(g=Date.now(),qa()<=$e.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-v}ms
	Determined least recently used ${a} in `+(f-d)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${b} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b}))))}}function XS(r,e){return new JS(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(){this.changes=new Zi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,er.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Z.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&Pl(s.mutation,a,kr.empty(),at.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,qe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=qe()){const a=zi();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let d=Tl();return l.forEach(((f,p)=>{d=d.insert(f,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=zi();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,qe())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((d,f)=>{t.set(d,f)}))}))}computeViews(e,t,s,a){let l=ss();const d=Rl(),f=(function(){return Rl()})();return t.forEach(((p,g)=>{const v=s.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof li)?l=l.insert(g.key,g):v!==void 0?(d.set(g.key,v.mutation.getFieldMask()),Pl(v.mutation,g,v.mutation.getFieldMask(),at.now())):d.set(g.key,kr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>d.set(g,v))),t.forEach(((g,v)=>f.set(g,new eA(v,d.get(g)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Rl();let a=new pt(((d,f)=>d-f)),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const f of d)f.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=s.get(p)||kr.empty();v=f.applyToLocalView(g,v),s.set(p,v);const b=(a.get(f.batchId)||qe()).add(p);a=a.insert(f.batchId,b)}))})).next((()=>{const d=[],f=a.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),g=p.key,v=p.value,b=vw();v.forEach((k=>{if(!l.has(k)){const P=Tw(t.get(k),s.get(k));P!==null&&b.set(k,P),l=l.add(k)}})),d.push(this.documentOverlayCache.saveOverlays(e,g,b))}return Z.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return eS(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const d=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):Z.resolve(zi());let f=Fl,p=l;return d.next((g=>Z.forEach(g,((v,b)=>(f<b.largestBatchId&&(f=b.largestBatchId),l.get(v)?Z.resolve():this.remoteDocumentCache.getEntry(e,v).next((k=>{p=p.insert(v,k)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,qe()))).next((v=>({batchId:f,changes:xw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ke(t)).next((s=>{let a=Tl();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let d=Tl();return this.indexManager.getCollectionParents(e,l).next((f=>Z.forEach(f,(p=>{const g=(function(b,k){return new xo(k,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,s,a).next((v=>{v.forEach(((b,k)=>{d=d.insert(b,k)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((d=>{l.forEach(((p,g)=>{const v=g.getKey();d.get(v)===null&&(d=d.insert(v,er.newInvalidDocument(v)))}));let f=Tl();return d.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&Pl(v.mutation,g,kr.empty(),at.now()),Fd(t,g)&&(f=f.insert(p,g))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Z.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:In(a.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:HS(a.bundledQuery),readTime:In(a.readTime)}})(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.overlays=new pt(ke.comparator),this.Lr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const s=zi();return Z.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.bt(e,t,l)})),Z.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.Lr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(s)),Z.resolve()}getOverlaysForCollection(e,t,s){const a=zi(),l=t.length+1,d=new ke(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const p=f.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>s&&a.set(p.getKey(),p)}return Z.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new pt(((g,v)=>g-v));const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let v=l.get(g.largestBatchId);v===null&&(v=zi(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const f=zi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>f.set(g,v))),!(f.size()>=a)););return Z.resolve(f)}bt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const d=this.Lr.get(a.largestBatchId).delete(s.key);this.Lr.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new wS(t,s));let l=this.Lr.get(t);l===void 0&&(l=qe(),this.Lr.set(t,l)),this.Lr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(){this.kr=new jt(Vt.Kr),this.qr=new jt(Vt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new Vt(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Vt(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new ke(new it([])),s=new Vt(t,e),a=new Vt(t,e+1),l=[];return this.qr.forEachInRange([s,a],(d=>{this.Wr(d),l.push(d.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ke(new it([])),s=new Vt(t,e),a=new Vt(t,e+1);let l=qe();return this.qr.forEachInRange([s,a],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new Vt(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Vt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ke.comparator(e.key,t.key)||Be(e.Hr,t.Hr)}static Ur(e,t){return Be(e.Hr,t.Hr)||ke.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new jt(Vt.Kr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new vS(l,t,s,a);this.mutationQueue.push(d);for(const f of a)this.Jr=this.Jr.add(new Vt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Z.resolve(d)}lookupMutationBatch(e,t){return Z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Xr(s),l=a<0?0:a;return Z.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?$m:this.Yn-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Vt(t,0),a=new Vt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([s,a],(d=>{const f=this.Zr(d.Hr);l.push(f)})),Z.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new jt(Be);return t.forEach((a=>{const l=new Vt(a,0),d=new Vt(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,d],(f=>{s=s.add(f.Hr)}))})),Z.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;ke.isDocumentKey(l)||(l=l.child(""));const d=new Vt(new ke(l),0);let f=new jt(Be);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===a&&(f=f.add(p.Hr)),!0)}),d),Z.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((s=>{const a=this.Zr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ze(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return Z.forEach(t.mutations,(a=>{const l=new Vt(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new Vt(t,0),a=this.Jr.firstAfterOrEqual(s);return Z.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.ti=e,this.docs=(function(){return new pt(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,d=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Z.resolve(s?s.document.mutableCopy():er.newInvalidDocument(t))}getEntries(e,t){let s=ss();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():er.newInvalidDocument(a))})),Z.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=ss();const d=t.path,f=new ke(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||AN(SN(v),s)<=0||(a.has(v.key)||Fd(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return Z.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Ae(9500)}ni(e,t){return Z.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new oA(this)}getSize(e){return Z.resolve(this.size)}}class oA extends ZS{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(s)})),Z.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.persistence=e,this.ri=new Zi((t=>Hm(t)),Wm),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.ii=0,this.si=new Zm,this.targetCount=0,this.oi=oo._r()}forEachTarget(e,t){return this.ri.forEach(((s,a)=>t(a))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),Z.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new oo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.lr(t),Z.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.ri.forEach(((d,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ri.delete(d),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),Z.waitFor(l).next((()=>a))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return Z.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),Z.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((d=>{l.push(a.markPotentiallyOrphaned(e,d))})),Z.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return Z.resolve(s)}containsKey(e,t){return Z.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,t){this._i={},this.overlays={},this.ai=new Ld(0),this.ui=!1,this.ui=!0,this.ci=new sA,this.referenceDelegate=e(this),this.li=new lA(this),this.indexManager=new WS,this.remoteDocumentCache=(function(a){return new aA(a)})((s=>this.referenceDelegate.hi(s))),this.serializer=new qS(t),this.Pi=new rA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new iA(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){he("MemoryPersistence","Starting transaction:",e);const a=new cA(this.ai.next());return this.referenceDelegate.Ti(),s(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return Z.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class cA extends RN{constructor(e){super(),this.currentSequenceNumber=e}}class ep{constructor(e){this.persistence=e,this.Ri=new Zm,this.Ai=null}static Vi(e){return new ep(e)}get di(){if(this.Ai)return this.Ai;throw Ae(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),Z.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.di,(s=>{const a=ke.fromPath(s);return this.mi(e,a).next((l=>{l||t.removeEntry(a,De.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Z.or([()=>Z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class hd{constructor(e,t){this.persistence=e,this.fi=new Zi((s=>DN(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=XS(this,t)}static Vi(e,t){return new hd(e,t)}Ti(){}Ii(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return Z.forEach(this.fi,((s,a)=>this.wr(e,s,a).next((l=>l?Z.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(d=>this.wr(e,d,t).next((f=>{f||(s++,l.removeEntry(d,De.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Z.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Gu(e.data.value)),t}wr(e,t,s){return Z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return Z.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=a}static Es(e,t){let s=qe(),a=qe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new tp(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return YT()?8:PN(tr())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.gs(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ps(e,t,a,s).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new uA;return this.ys(e,t,d).next((f=>{if(l.result=f,this.As)return this.ws(e,t,d,f.size)}))})).next((()=>l.result))}ws(e,t,s,a){return s.documentReadCount<this.Vs?(qa()<=$e.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Ha(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(qa()<=$e.DEBUG&&he("QueryEngine","Query:",Ha(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.ds*a?(qa()<=$e.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Ha(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(t))):Z.resolve())}gs(e,t){if(L0(t))return Z.resolve(null);let s=Tn(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=cd(t,null,"F"),s=Tn(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const d=qe(...l);return this.fs.getDocuments(e,d).next((f=>this.indexManager.getMinOffset(e,s).next((p=>{const g=this.bs(t,f);return this.Ss(t,g,d,p.readTime)?this.gs(e,cd(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,s,a){return L0(t)||a.isEqual(De.min())?Z.resolve(null):this.fs.getDocuments(e,s).next((l=>{const d=this.bs(t,l);return this.Ss(t,d,s,a)?Z.resolve(null):(qa()<=$e.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ha(t)),this.Ds(e,d,t,NN(a,Fl)).next((f=>f)))}))}bs(e,t){let s=new jt(gw(e));return t.forEach(((a,l)=>{Fd(e,l)&&(s=s.add(l))})),s}Ss(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,s){return qa()<=$e.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Ha(t)),this.fs.getDocumentsMatchingQuery(e,t,ti.min(),s)}Ds(e,t,s,a){return this.fs.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="LocalStore",hA=3e8;class fA{constructor(e,t,s,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new pt(Be),this.Fs=new Zi((l=>Hm(l)),Wm),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function mA(r,e,t,s){return new fA(r,e,t,s)}async function zw(r,e){const t=Pe(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const d=[],f=[];let p=qe();for(const g of a){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){f.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((g=>({Ns:g,removedBatchIds:d,addedBatchIds:f})))}))}))}function pA(r,e){const t=Pe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,p,g,v){const b=g.batch,k=b.keys();let P=Z.resolve();return k.forEach((L=>{P=P.next((()=>v.getEntry(p,L))).next((N=>{const O=g.docVersions.get(L);Ze(O!==null,48541),N.version.compareTo(O)<0&&(b.applyToRemoteDocument(N,g),N.isValidDocument()&&(N.setReadTime(g.commitVersion),v.addEntry(N)))}))})),P.next((()=>f.mutationQueue.removeMutationBatch(p,b)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let p=qe();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(p=p.add(f.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function $w(r){const e=Pe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function gA(r,e){const t=Pe(r),s=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const f=[];e.targetChanges.forEach(((v,b)=>{const k=a.get(b);if(!k)return;f.push(t.li.removeMatchingKeys(l,v.removedDocuments,b).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,b))));let P=k.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?P=P.withResumeToken(Wt.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):v.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(v.resumeToken,s)),a=a.insert(b,P),(function(N,O,z){return N.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=hA?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(k,P,v)&&f.push(t.li.updateTargetData(l,P))}));let p=ss(),g=qe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(yA(l,d,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!s.isEqual(De.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((b=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(v)}return Z.waitFor(f).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=a,l)))}function yA(r,e,t){let s=qe(),a=qe();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let d=ss();return t.forEach(((f,p)=>{const g=l.get(f);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(f)),p.isNoDocument()&&p.version.isEqual(De.min())?(e.removeEntry(f,p.readTime),d=d.insert(f,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),d=d.insert(f,p)):he(rp,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",p.version)})),{Bs:d,Ls:a}}))}function xA(r,e){const t=Pe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=$m),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function vA(r,e){const t=Pe(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.li.getTargetData(s,e).next((l=>l?(a=l,Z.resolve(a)):t.li.allocateTargetId(s).next((d=>(a=new Qs(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.vs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function gm(r,e,t){const s=Pe(r),a=s.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(d=>s.persistence.referenceDelegate.removeTarget(d,a)))}catch(d){if(!yo(d))throw d;he(rp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.vs=s.vs.remove(e),s.Fs.delete(a.target)}function K0(r,e,t){const s=Pe(r);let a=De.min(),l=qe();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,g,v){const b=Pe(p),k=b.Fs.get(v);return k!==void 0?Z.resolve(b.vs.get(k)):b.li.getTargetData(g,v)})(s,d,Tn(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(d,f.targetId).next((p=>{l=p}))})).next((()=>s.Cs.getDocumentsMatchingQuery(d,e,t?a:De.min(),t?l:qe()))).next((f=>(wA(s,nS(e),f),{documents:f,ks:l})))))}function wA(r,e,t){let s=r.Ms.get(e)||De.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Ms.set(e,s)}class Q0{constructor(){this.activeTargetIds=cS()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _A{constructor(){this.vo=new Q0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Q0,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="ConnectivityMonitor";class J0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){he(Y0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){he(Y0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu=null;function ym(){return Pu===null?Pu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Pu++,"0x"+Pu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="RestConnection",kA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class EA{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.$o=this.databaseId.database===ad?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,t,s,a,l){const d=ym(),f=this.Qo(e,t.toUriEncodedString());he($f,`Sending RPC '${e}' ${d}:`,f,s);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,l);const{host:g}=new URL(f),v=fo(g);return this.zo(e,f,p,s,v).then((b=>(he($f,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw no($f,`RPC '${e}' ${d} failed with error: `,b,"url: ",f,"request:",s),b}))}jo(e,t,s,a,l,d){return this.Wo(e,t,s,a,l)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+po})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const s=kA[e];let a=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection",xl=(r,e,t)=>{r.listen(e,(s=>{try{t(s)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Ka extends EA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ka.c_){const e=Hv();xl(e,qv.STAT_EVENT,(t=>{t.stat===im.PROXY?he(Xt,"STAT_EVENT: detected buffering proxy"):t.stat===im.NOPROXY&&he(Xt,"STAT_EVENT: detected no buffering proxy")})),Ka.c_=!0}}zo(e,t,s,a,l){const d=ym();return new Promise(((f,p)=>{const g=new $v;g.setWithCredentials(!0),g.listenOnce(Bv.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Wu.NO_ERROR:const b=g.getResponseJson();he(Xt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),f(b);break;case Wu.TIMEOUT:he(Xt,`RPC '${e}' ${d} timed out`),p(new ce(X.DEADLINE_EXCEEDED,"Request time out"));break;case Wu.HTTP_ERROR:const k=g.getStatus();if(he(Xt,`RPC '${e}' ${d} failed with status:`,k,"response text:",g.getResponseText()),k>0){let P=g.getResponseJson();Array.isArray(P)&&(P=P[0]);const L=P?.error;if(L&&L.status&&L.message){const N=(function(z){const $=z.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf($)>=0?$:X.UNKNOWN})(L.status);p(new ce(N,L.message))}else p(new ce(X.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ce(X.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:d,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{he(Xt,`RPC '${e}' ${d} completed.`)}}));const v=JSON.stringify(a);he(Xt,`RPC '${e}' ${d} sending request:`,a),g.send(t,"POST",v,s,15)}))}T_(e,t,s){const a=ym(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,s),f.encodeInitMessageHeaders=!0;const g=l.join("");he(Xt,`Creating RPC '${e}' stream ${a}: ${g}`,f);const v=d.createWebChannel(g,f);this.I_(v);let b=!1,k=!1;const P=new TA({Ho:L=>{k?he(Xt,`Not sending because RPC '${e}' stream ${a} is closed:`,L):(b||(he(Xt,`Opening RPC '${e}' stream ${a} transport.`),v.open(),b=!0),he(Xt,`RPC '${e}' stream ${a} sending:`,L),v.send(L))},Jo:()=>v.close()});return xl(v,El.EventType.OPEN,(()=>{k||(he(Xt,`RPC '${e}' stream ${a} transport opened.`),P.i_())})),xl(v,El.EventType.CLOSE,(()=>{k||(k=!0,he(Xt,`RPC '${e}' stream ${a} transport closed`),P.o_(),this.E_(v))})),xl(v,El.EventType.ERROR,(L=>{k||(k=!0,no(Xt,`RPC '${e}' stream ${a} transport errored. Name:`,L.name,"Message:",L.message),P.o_(new ce(X.UNAVAILABLE,"The operation could not be completed")))})),xl(v,El.EventType.MESSAGE,(L=>{if(!k){const N=L.data[0];Ze(!!N,16349);const O=N,z=O?.error||O[0]?.error;if(z){he(Xt,`RPC '${e}' stream ${a} received error:`,z);const $=z.status;let Q=(function(Y){const I=Nt[Y];if(I!==void 0)return Nw(I)})($),fe=z.message;Q===void 0&&(Q=X.INTERNAL,fe="Unknown error status: "+$+" with message "+z.message),k=!0,P.o_(new ce(Q,fe)),v.close()}else he(Xt,`RPC '${e}' stream ${a} received:`,N),P.__(N)}})),Ka.u_(),setTimeout((()=>{P.s_()}),0),P}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Wv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(r){return new Ka(r)}function Bf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(r){return new CS(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ka.c_=!1;class Bw{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&he("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="PersistentStream";class qw{constructor(e,t,s,a,l,d,f,p){this.Ci=e,this.b_=s,this.S_=a,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Bw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(ns(t.toString()),ns("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new ce(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(X0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(he(X0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class NA extends qw{constructor(e,t,s,a,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,d),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=jS(this.serializer,e),s=(function(l){if(!("targetChange"in l))return De.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?De.min():d.readTime?In(d.readTime):De.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=pm(this.serializer),t.addTarget=(function(l,d){let f;const p=d.target;if(f=um(p)?{documents:MS(l,p)}:{query:Dw(l,p).ft},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=Cw(l,d.resumeToken);const g=hm(l,d.expectedCount);g!==null&&(f.expectedCount=g)}else if(d.snapshotVersion.compareTo(De.min())>0){f.readTime=dd(l,d.snapshotVersion.toTimestamp());const g=hm(l,d.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,e);const s=FS(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=pm(this.serializer),t.removeTarget=e,this.K_(t)}}class SA extends qw{constructor(e,t,s,a,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,d),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=LS(e.writeResults,e.commitTime),s=In(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=pm(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>DS(this.serializer,s)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{}class CA extends AA{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ce(X.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Wo(e,fm(t,s),a,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ce(X.UNKNOWN,l.toString())}))}jo(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.jo(e,fm(t,s),a,d,f,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ce(X.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function RA(r,e,t,s){return new CA(r,e,t,s)}class PA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ns(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="RemoteStore";class jA{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((d=>{s.enqueueAndForget((async()=>{ea(this)&&(he(Gi,"Restarting streams for network reachability change."),await(async function(p){const g=Pe(p);g.Ea.add(4),await sc(g),g.Va.set("Unknown"),g.Ea.delete(4),await qd(g)})(this))}))})),this.Va=new PA(s,a)}}async function qd(r){if(ea(r))for(const e of r.Ra)await e(!0)}async function sc(r){for(const e of r.Ra)await e(!1)}function Hw(r,e){const t=Pe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ap(t)?ip(t):vo(t).O_()&&sp(t,e))}function np(r,e){const t=Pe(r),s=vo(t);t.Ia.delete(e),s.O_()&&Ww(t,e),t.Ia.size===0&&(s.O_()?s.L_():ea(t)&&t.Va.set("Unknown"))}function sp(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vo(r).Z_(e)}function Ww(r,e){r.da.$e(e),vo(r).X_(e)}function ip(r){r.da=new IS({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),vo(r).start(),r.Va.ua()}function ap(r){return ea(r)&&!vo(r).x_()&&r.Ia.size>0}function ea(r){return Pe(r).Ea.size===0}function Gw(r){r.da=void 0}async function DA(r){r.Va.set("Online")}async function LA(r){r.Ia.forEach(((e,t)=>{sp(r,e)}))}async function MA(r,e){Gw(r),ap(r)?(r.Va.ha(e),ip(r)):r.Va.set("Unknown")}async function VA(r,e,t){if(r.Va.set("Online"),e instanceof Aw&&e.state===2&&e.cause)try{await(async function(a,l){const d=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,d),a.Ia.delete(f),a.da.removeTarget(f))})(r,e)}catch(s){he(Gi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await fd(r,s)}else if(e instanceof Yu?r.da.Xe(e):e instanceof Sw?r.da.st(e):r.da.tt(e),!t.isEqual(De.min()))try{const s=await $w(r.localStore);t.compareTo(s)>=0&&await(function(l,d){const f=l.da.Tt(d);return f.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,d))}})),f.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Wt.EMPTY_BYTE_STRING,v.snapshotVersion)),Ww(l,p);const b=new Qs(v.target,p,g,v.sequenceNumber);sp(l,b)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){he(Gi,"Failed to raise snapshot:",s),await fd(r,s)}}async function fd(r,e,t){if(!yo(e))throw e;r.Ea.add(1),await sc(r),r.Va.set("Offline"),t||(t=()=>$w(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{he(Gi,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await qd(r)}))}function Kw(r,e){return e().catch((t=>fd(r,t,e)))}async function Hd(r){const e=Pe(r),t=ii(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$m;for(;OA(e);)try{const a=await xA(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,FA(e,a)}catch(a){await fd(e,a)}Qw(e)&&Yw(e)}function OA(r){return ea(r)&&r.Ta.length<10}function FA(r,e){r.Ta.push(e);const t=ii(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function Qw(r){return ea(r)&&!ii(r).x_()&&r.Ta.length>0}function Yw(r){ii(r).start()}async function UA(r){ii(r).ra()}async function zA(r){const e=ii(r);for(const t of r.Ta)e.ea(t.mutations)}async function $A(r,e,t){const s=r.Ta.shift(),a=Ym.from(s,e,t);await Kw(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Hd(r)}async function BA(r,e){e&&ii(r).Y_&&await(async function(s,a){if((function(d){return kS(d)&&d!==X.ABORTED})(a.code)){const l=s.Ta.shift();ii(s).B_(),await Kw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Hd(s)}})(r,e),Qw(r)&&Yw(r)}async function Z0(r,e){const t=Pe(r);t.asyncQueue.verifyOperationInProgress(),he(Gi,"RemoteStore received new credentials");const s=ea(t);t.Ea.add(3),await sc(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await qd(t)}async function qA(r,e){const t=Pe(r);e?(t.Ea.delete(2),await qd(t)):e||(t.Ea.add(2),await sc(t),t.Va.set("Unknown"))}function vo(r){return r.ma||(r.ma=(function(t,s,a){const l=Pe(t);return l.sa(),new NA(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:DA.bind(null,r),Yo:LA.bind(null,r),t_:MA.bind(null,r),J_:VA.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),ap(r)?ip(r):r.Va.set("Unknown")):(await r.ma.stop(),Gw(r))}))),r.ma}function ii(r){return r.fa||(r.fa=(function(t,s,a){const l=Pe(t);return l.sa(),new SA(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:UA.bind(null,r),t_:BA.bind(null,r),ta:zA.bind(null,r),na:$A.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Hd(r)):(await r.fa.stop(),r.Ta.length>0&&(he(Gi,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new En,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const d=Date.now()+s,f=new op(e,t,d,a,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lp(r,e){if(ns("AsyncQueue",`${e}: ${r}`),yo(r))return new ce(X.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{static emptySet(e){return new Qa(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ke.comparator(t.key,s.key):(t,s)=>ke.comparator(t.key,s.key),this.keyedMap=Tl(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Qa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.ga=new pt(ke.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class lo{constructor(e,t,s,a,l,d,f,p,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,a,l){const d=[];return t.forEach((f=>{d.push({type:0,doc:f})})),new lo(e,t,Qa.emptySet(t),d,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class WA{constructor(){this.queries=tx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=Pe(t),l=a.queries;a.queries=tx(),l.forEach(((d,f)=>{for(const p of f.ba)p.onError(s)}))})(this,new ce(X.ABORTED,"Firestore shutting down"))}}function tx(){return new Zi((r=>pw(r)),Od)}async function Jw(r,e){const t=Pe(r);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(s=2):(l=new HA,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(d){const f=lp(d,`Initialization of query '${Ha(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&cp(t)}async function Xw(r,e){const t=Pe(r),s=e.query;let a=3;const l=t.queries.get(s);if(l){const d=l.ba.indexOf(e);d>=0&&(l.ba.splice(d,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function GA(r,e){const t=Pe(r);let s=!1;for(const a of e){const l=a.query,d=t.queries.get(l);if(d){for(const f of d.ba)f.Fa(a)&&(s=!0);d.wa=a}}s&&cp(t)}function KA(r,e,t){const s=Pe(r),a=s.queries.get(e);if(a)for(const l of a.ba)l.onError(t);s.queries.delete(e)}function cp(r){r.Ca.forEach((e=>{e.next()}))}var xm,rx;(rx=xm||(xm={})).Ma="default",rx.Cache="cache";class Zw{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new lo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e){this.key=e}}class t_{constructor(e){this.key=e}}class QA{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=qe(),this.mutatedKeys=qe(),this.eu=gw(e),this.tu=new Qa(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new ex,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,d=a,f=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,b)=>{const k=a.get(v),P=Fd(this.query,b)?b:null,L=!!k&&this.mutatedKeys.has(k.key),N=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let O=!1;k&&P?k.data.isEqual(P.data)?L!==N&&(s.track({type:3,doc:P}),O=!0):this.su(k,P)||(s.track({type:2,doc:P}),O=!0,(p&&this.eu(P,p)>0||g&&this.eu(P,g)<0)&&(f=!0)):!k&&P?(s.track({type:0,doc:P}),O=!0):k&&!P&&(s.track({type:1,doc:k}),O=!0,(p||g)&&(f=!0)),O&&(P?(d=d.add(P),l=N?l.add(v):l.delete(v)):(d=d.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const v=this.query.limitType==="F"?d.last():d.first();d=d.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:d,iu:s,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((v,b)=>(function(P,L){const N=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:O})}};return N(P)-N(L)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(s),a=a??!1;const f=t&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,g=p!==this.Xa;return this.Xa=p,d.length!==0||g?{snapshot:new lo(this.query,e.tu,l,d,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ex,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=qe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new t_(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new e_(s))})),t}cu(e){this.Za=e.ks,this.Ya=qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return lo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const up="SyncEngine";class YA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class JA{constructor(e){this.key=e,this.hu=!1}}class XA{constructor(e,t,s,a,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Zi((f=>pw(f)),Od),this.Iu=new Map,this.Eu=new Set,this.Ru=new pt(ke.comparator),this.Au=new Map,this.Vu=new Zm,this.du={},this.mu=new Map,this.fu=oo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ZA(r,e,t=!0){const s=o_(r);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await r_(s,e,t,!0),a}async function e2(r,e){const t=o_(r);await r_(t,e,!0,!1)}async function r_(r,e,t,s){const a=await vA(r.localStore,Tn(e)),l=a.targetId,d=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await t2(r,e,l,d==="current",a.resumeToken)),r.isPrimaryClient&&t&&Hw(r.remoteStore,a),f}async function t2(r,e,t,s,a){r.pu=(b,k,P)=>(async function(N,O,z,$){let Q=O.view.ru(z);Q.Ss&&(Q=await K0(N.localStore,O.query,!1).then((({documents:I})=>O.view.ru(I,Q))));const fe=$&&$.targetChanges.get(O.targetId),oe=$&&$.targetMismatches.get(O.targetId)!=null,Y=O.view.applyChanges(Q,N.isPrimaryClient,fe,oe);return sx(N,O.targetId,Y.au),Y.snapshot})(r,b,k,P);const l=await K0(r.localStore,e,!0),d=new QA(e,l.ks),f=d.ru(l.documents),p=nc.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",a),g=d.applyChanges(f,r.isPrimaryClient,p);sx(r,t,g.au);const v=new YA(e,t,d);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),g.snapshot}async function r2(r,e,t){const s=Pe(r),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((d=>!Od(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await gm(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&np(s.remoteStore,a.targetId),vm(s,a.targetId)})).catch(go)):(vm(s,a.targetId),await gm(s.localStore,a.targetId,!0))}async function n2(r,e){const t=Pe(r),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),np(t.remoteStore,s.targetId))}async function s2(r,e,t){const s=d2(r);try{const a=await(function(d,f){const p=Pe(d),g=at.now(),v=f.reduce(((P,L)=>P.add(L.key)),qe());let b,k;return p.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let L=ss(),N=qe();return p.xs.getEntries(P,v).next((O=>{L=O,L.forEach(((z,$)=>{$.isValidDocument()||(N=N.add(z))}))})).next((()=>p.localDocuments.getOverlayedDocuments(P,L))).next((O=>{b=O;const z=[];for(const $ of f){const Q=yS($,b.get($.key).overlayedDocument);Q!=null&&z.push(new li($.key,Q,aw(Q.value.mapValue),Mr.exists(!0)))}return p.mutationQueue.addMutationBatch(P,g,z,f)})).next((O=>{k=O;const z=O.applyToLocalDocumentSet(b,N);return p.documentOverlayCache.saveOverlays(P,O.batchId,z)}))})).then((()=>({batchId:k.batchId,changes:xw(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(d,f,p){let g=d.du[d.currentUser.toKey()];g||(g=new pt(Be)),g=g.insert(f,p),d.du[d.currentUser.toKey()]=g})(s,a.batchId,t),await ic(s,a.changes),await Hd(s.remoteStore)}catch(a){const l=lp(a,"Failed to persist write");t.reject(l)}}async function n_(r,e){const t=Pe(r);try{const s=await gA(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const d=t.Au.get(l);d&&(Ze(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?d.hu=!0:a.modifiedDocuments.size>0?Ze(d.hu,14607):a.removedDocuments.size>0&&(Ze(d.hu,42227),d.hu=!1))})),await ic(t,s,e)}catch(s){await go(s)}}function nx(r,e,t){const s=Pe(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((l,d)=>{const f=d.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(d,f){const p=Pe(d);p.onlineState=f;let g=!1;p.queries.forEach(((v,b)=>{for(const k of b.ba)k.va(f)&&(g=!0)})),g&&cp(p)})(s.eventManager,e),a.length&&s.Pu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function i2(r,e,t){const s=Pe(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let d=new pt(ke.comparator);d=d.insert(l,er.newNoDocument(l,De.min()));const f=qe().add(l),p=new $d(De.min(),new Map,new pt(Be),d,f);await n_(s,p),s.Ru=s.Ru.remove(l),s.Au.delete(e),dp(s)}else await gm(s.localStore,e,!1).then((()=>vm(s,e,t))).catch(go)}async function a2(r,e){const t=Pe(r),s=e.batch.batchId;try{const a=await pA(t.localStore,e);i_(t,s,null),s_(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ic(t,a)}catch(a){await go(a)}}async function o2(r,e,t){const s=Pe(r);try{const a=await(function(d,f){const p=Pe(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,f).next((b=>(Ze(b!==null,37113),v=b.keys(),p.mutationQueue.removeMutationBatch(g,b)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(s.localStore,e);i_(s,e,t),s_(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ic(s,a)}catch(a){await go(a)}}function s_(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function i_(r,e,t){const s=Pe(r);let a=s.du[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.du[s.currentUser.toKey()]=a}}function vm(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((s=>{r.Vu.containsKey(s)||a_(r,s)}))}function a_(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(np(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),dp(r))}function sx(r,e,t){for(const s of t)s instanceof e_?(r.Vu.addReference(s.key,e),l2(r,s)):s instanceof t_?(he(up,"Document no longer in limbo: "+s.key),r.Vu.removeReference(s.key,e),r.Vu.containsKey(s.key)||a_(r,s.key)):Ae(19791,{wu:s})}function l2(r,e){const t=e.key,s=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(s)||(he(up,"New document in limbo: "+t),r.Eu.add(s),dp(r))}function dp(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ke(it.fromString(e)),s=r.fu.next();r.Au.set(s,new JA(t)),r.Ru=r.Ru.insert(t,s),Hw(r.remoteStore,new Qs(Tn(Gm(t.path)),s,"TargetPurposeLimboResolution",Ld.ce))}}async function ic(r,e,t){const s=Pe(r),a=[],l=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,p)=>{d.push(s.pu(p,e,t).then((g=>{if((g||t)&&s.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){a.push(g);const v=tp.Es(p.targetId,g);l.push(v)}})))})),await Promise.all(d),s.Pu.J_(a),await(async function(p,g){const v=Pe(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>Z.forEach(g,(k=>Z.forEach(k.Ts,(P=>v.persistence.referenceDelegate.addReference(b,k.targetId,P))).next((()=>Z.forEach(k.Is,(P=>v.persistence.referenceDelegate.removeReference(b,k.targetId,P)))))))))}catch(b){if(!yo(b))throw b;he(rp,"Failed to update sequence numbers: "+b)}for(const b of g){const k=b.targetId;if(!b.fromCache){const P=v.vs.get(k),L=P.snapshotVersion,N=P.withLastLimboFreeSnapshotVersion(L);v.vs=v.vs.insert(k,N)}}})(s.localStore,l))}async function c2(r,e){const t=Pe(r);if(!t.currentUser.isEqual(e)){he(up,"User change. New user:",e.toKey());const s=await zw(t.localStore,e);t.currentUser=e,(function(l,d){l.mu.forEach((f=>{f.forEach((p=>{p.reject(new ce(X.CANCELLED,d))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ic(t,s.Ns)}}function u2(r,e){const t=Pe(r),s=t.Au.get(e);if(s&&s.hu)return qe().add(s.key);{let a=qe();const l=t.Iu.get(e);if(!l)return a;for(const d of l){const f=t.Tu.get(d);a=a.unionWith(f.view.nu)}return a}}function o_(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=n_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=u2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i2.bind(null,e),e.Pu.J_=GA.bind(null,e.eventManager),e.Pu.yu=KA.bind(null,e.eventManager),e}function d2(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=a2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=o2.bind(null,e),e}class md{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return mA(this.persistence,new dA,e.initialUser,this.serializer)}Cu(e){return new Uw(ep.Vi,this.serializer)}Du(e){return new _A}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}md.provider={build:()=>new md};class h2 extends md{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ze(this.persistence.referenceDelegate instanceof hd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new YS(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hr.withCacheSize(this.cacheSizeBytes):hr.DEFAULT;return new Uw((s=>hd.Vi(s,t)),this.serializer)}}class wm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>nx(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=c2.bind(null,this.syncEngine),await qA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new WA})()}createDatastore(e){const t=Bd(e.databaseInfo.databaseId),s=IA(e.databaseInfo);return RA(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,d,f){return new jA(s,a,l,d,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>nx(this.syncEngine,t,0)),(function(){return J0.v()?new J0:new bA})())}createSyncEngine(e,t){return(function(a,l,d,f,p,g,v){const b=new XA(a,l,d,f,p,g);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Pe(t);he(Gi,"RemoteStore shutting down."),s.Ea.add(5),await sc(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}wm.provider={build:()=>new wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ns("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="FirestoreClient";class f2{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=a,this.user=Zt.UNAUTHENTICATED,this.clientId=zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async d=>{he(ai,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(he(ai,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new En;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=lp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function qf(r,e){r.asyncQueue.verifyOperationInProgress(),he(ai,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async a=>{s.isEqual(a)||(await zw(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function ix(r,e){r.asyncQueue.verifyOperationInProgress();const t=await m2(r);he(ai,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>Z0(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,a)=>Z0(e.remoteStore,a))),r._onlineComponents=e}async function m2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he(ai,"Using user provided OfflineComponentProvider");try{await qf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===X.FAILED_PRECONDITION||a.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;no("Error using user provided cache. Falling back to memory cache: "+t),await qf(r,new md)}}else he(ai,"Using default OfflineComponentProvider"),await qf(r,new h2(void 0));return r._offlineComponents}async function hp(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he(ai,"Using user provided OnlineComponentProvider"),await ix(r,r._uninitializedComponentsProvider._online)):(he(ai,"Using default OnlineComponentProvider"),await ix(r,new wm))),r._onlineComponents}function p2(r){return hp(r).then((e=>e.syncEngine))}function g2(r){return hp(r).then((e=>e.datastore))}async function c_(r){const e=await hp(r),t=e.eventManager;return t.onListen=ZA.bind(null,e.syncEngine),t.onUnlisten=r2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=e2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=n2.bind(null,e.syncEngine),t}function y2(r,e,t={}){const s=new En;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,f,p,g){const v=new l_({next:k=>{v.Nu(),d.enqueueAndForget((()=>Xw(l,b)));const P=k.docs.has(f);!P&&k.fromCache?g.reject(new ce(X.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&k.fromCache&&p&&p.source==="server"?g.reject(new ce(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(k)},error:k=>g.reject(k)}),b=new Zw(Gm(f.path),v,{includeMetadataChanges:!0,Ka:!0});return Jw(l,b)})(await c_(r),r.asyncQueue,e,t,s))),s.promise}function x2(r,e,t={}){const s=new En;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,f,p,g){const v=new l_({next:k=>{v.Nu(),d.enqueueAndForget((()=>Xw(l,b))),k.fromCache&&p.source==="server"?g.reject(new ce(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(k)},error:k=>g.reject(k)}),b=new Zw(f,v,{includeMetadataChanges:!0,Ka:!0});return Jw(l,b)})(await c_(r),r.asyncQueue,e,t,s))),s.promise}function v2(r,e,t){const s=new En;return r.asyncQueue.enqueueAndForget((async()=>{try{const a=await g2(r);s.resolve((async function(d,f,p){const g=Pe(d),{request:v,gt:b,parent:k}=VS(g.serializer,tS(f),p);g.connection.Ko||delete v.parent;const P=(await g.jo("RunAggregationQuery",g.serializer.databaseId,k,v,1)).filter((N=>!!N.result));Ze(P.length===1,64727);const L=P[0].result?.aggregateFields;return Object.keys(L).reduce(((N,O)=>(N[b[O]]=L[O],N)),{})})(a,e,t))}catch(a){s.reject(a)}})),s.promise}function w2(r,e){const t=new En;return r.asyncQueue.enqueueAndForget((async()=>s2(await p2(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="ComponentProvider",ax=new Map;function b2(r,e,t,s,a){return new ON(r,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,u_(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="firestore.googleapis.com",ox=!0;class lx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=d_,this.ssl=ox}else this.host=e.host,this.ssl=e.ssl??ox;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Fw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KS)throw new ce(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=u_(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new pN;switch(s.type){case"firstParty":return new vN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=ax.get(t);s&&(he(_2,"Removing Datastore"),ax.delete(t),s.terminate())})(this),Promise.resolve()}}function k2(r,e,t,s={}){r=Or(r,Wd);const a=fo(e),l=r._getSettings(),d={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;a&&(jv(`https://${f}`),Dv("Firestore",!0)),l.host!==d_&&l.host!==f&&no("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:f,ssl:a,emulatorOptions:s};if(!qi(p,d)&&(r._setSettings(p),s.mockUserToken)){let g,v;if(typeof s.mockUserToken=="string")g=s.mockUserToken,v=Zt.MOCK_USER;else{g=zT(s.mockUserToken,r._app?.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new ce(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Zt(b)}r._authCredentials=new gN(new Kv(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ci(this.firestore,e,this._query)}}class bt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}toJSON(){return{type:bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(tc(t,bt._jsonSchema))return new bt(e,s||null,new ke(it.fromString(t.referencePath)))}}bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:At("string",bt._jsonSchemaVersion),referencePath:At("string")};class ei extends ci{constructor(e,t,s){super(e,t,Gm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new ke(e))}withConverter(e){return new ei(this.firestore,e,this._path)}}function Xe(r,e,...t){if(r=Ot(r),Qv("collection","path",e),r instanceof Wd){const s=it.fromString(e,...t);return _0(s),new ei(r,null,s)}{if(!(r instanceof bt||r instanceof ei))throw new ce(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(it.fromString(e,...t));return _0(s),new ei(r.firestore,null,s)}}function ut(r,e,...t){if(r=Ot(r),arguments.length===1&&(e=zm.newId()),Qv("doc","path",e),r instanceof Wd){const s=it.fromString(e,...t);return w0(s),new bt(r,null,new ke(s))}{if(!(r instanceof bt||r instanceof ei))throw new ce(X.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(it.fromString(e,...t));return w0(s),new bt(r.firestore,r instanceof ei?r.converter:null,new ke(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="AsyncQueue";class ux{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Bw(this,"async_queue_retry"),this._c=()=>{const s=Bf();s&&he(cx,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Bf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Bf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new En;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!yo(e))throw e;he(cx,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ns("INTERNAL UNHANDLED ERROR: ",dx(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=op.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Ae(47125,{Pc:dx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function dx(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class ui extends Wd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new ux,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ux(e),this._firestoreClient=void 0,await e}}}function E2(r,e){const t=typeof r=="object"?r:Ov(),s=typeof r=="string"?r:ad,a=Fm(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=FT("firestore");l&&k2(a,...l)}return a}function Gd(r){if(r._terminated)throw new ce(X.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||T2(r),r._firestoreClient}function T2(r){const e=r._freezeSettings(),t=b2(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new f2(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lr(Wt.fromBase64String(e))}catch(t){throw new ce(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lr(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tc(e,Lr._jsonSchema))return Lr.fromBase64String(e.bytes)}}Lr._jsonSchemaVersion="firestore/bytes/1.0",Lr._jsonSchema={type:At("string",Lr._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Nn._jsonSchemaVersion}}static fromJSON(e){if(tc(e,Nn._jsonSchema))return new Nn(e.latitude,e.longitude)}}Nn._jsonSchemaVersion="firestore/geoPoint/1.0",Nn._jsonSchema={type:At("string",Nn._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tc(e,Yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Yr(e.vectorValues);throw new ce(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yr._jsonSchemaVersion="firestore/vectorValue/1.0",Yr._jsonSchema={type:At("string",Yr._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=/^__.*__$/;class N2{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new li(e,this.data,this.fieldMask,t,this.fieldTransforms):new rc(e,this.data,t,this.fieldTransforms)}}class h_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new li(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function f_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{dataSource:r})}}class mp{constructor(e,t,s,a,l,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new mp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const t=this.path?.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return pd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(f_(this.dataSource)&&I2.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class S2{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Bd(e)}createContext(e,t,s,a=!1){return new mp({dataSource:e,methodName:t,targetDoc:s,path:Ht.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qd(r){const e=r._freezeSettings(),t=Bd(r._databaseId);return new S2(r._databaseId,!!e.ignoreUndefinedProperties,t)}function m_(r,e,t,s,a,l={}){const d=r.createContext(l.merge||l.mergeFields?2:0,e,t,a);gp("Data must be an object, but it was:",d,s);const f=p_(s,d);let p,g;if(l.merge)p=new kr(d.fieldMask),g=d.fieldTransforms;else if(l.mergeFields){const v=[];for(const b of l.mergeFields){const k=Ki(e,b,t);if(!d.contains(k))throw new ce(X.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);x_(v,k)||v.push(k)}p=new kr(v),g=d.fieldTransforms.filter((b=>p.covers(b.field)))}else p=null,g=d.fieldTransforms;return new N2(new sr(f),p,g)}class Yd extends Kd{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yd}}class pp extends Kd{_toFieldTransform(e){return new fS(e.path,new ql)}isEqual(e){return e instanceof pp}}function A2(r,e,t,s){const a=r.createContext(1,e,t);gp("Data must be an object, but it was:",a,s);const l=[],d=sr.empty();oi(s,((p,g)=>{const v=y_(e,p,t);g=Ot(g);const b=a.childContextForFieldPath(v);if(g instanceof Yd)l.push(v);else{const k=ac(g,b);k!=null&&(l.push(v),d.set(v,k))}}));const f=new kr(l);return new h_(d,f,a.fieldTransforms)}function C2(r,e,t,s,a,l){const d=r.createContext(1,e,t),f=[Ki(e,s,t)],p=[a];if(l.length%2!=0)throw new ce(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<l.length;k+=2)f.push(Ki(e,l[k])),p.push(l[k+1]);const g=[],v=sr.empty();for(let k=f.length-1;k>=0;--k)if(!x_(g,f[k])){const P=f[k];let L=p[k];L=Ot(L);const N=d.childContextForFieldPath(P);if(L instanceof Yd)g.push(P);else{const O=ac(L,N);O!=null&&(g.push(P),v.set(P,O))}}const b=new kr(g);return new h_(v,b,d.fieldTransforms)}function R2(r,e,t,s=!1){return ac(t,r.createContext(s?4:3,e))}function ac(r,e){if(g_(r=Ot(r)))return gp("Unsupported field value:",e,r),p_(r,e);if(r instanceof Kd)return(function(s,a){if(!f_(a.dataSource))throw a.createError(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,a){const l=[];let d=0;for(const f of s){let p=ac(f,a.childContextForArray(d));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),d++}return{arrayValue:{values:l}}})(r,e)}return(function(s,a){if((s=Ot(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return uS(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=at.fromDate(s);return{timestampValue:dd(a.serializer,l)}}if(s instanceof at){const l=new at(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:dd(a.serializer,l)}}if(s instanceof Nn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Lr)return{bytesValue:Cw(a.serializer,s._byteString)};if(s instanceof bt){const l=a.databaseId,d=s.firestore._databaseId;if(!d.isEqual(l))throw a.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Xm(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Yr)return(function(d,f){const p=d instanceof Yr?d.toArray():d;return{mapValue:{fields:{[sw]:{stringValue:iw},[od]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw f.createError("VectorValues must only contain numeric values.");return Km(f.serializer,v)}))}}}}}})(s,a);if(Ow(s))return s._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Dd(s)}`)})(r,e)}function p_(r,e){const t={};return Xv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oi(r,((s,a)=>{const l=ac(a,e.childContextForField(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function g_(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof at||r instanceof Nn||r instanceof Lr||r instanceof bt||r instanceof Kd||r instanceof Yr||Ow(r))}function gp(r,e,t){if(!g_(t)||!Yv(t)){const s=Dd(t);throw s==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+s)}}function Ki(r,e,t){if((e=Ot(e))instanceof fp)return e._internalPath;if(typeof e=="string")return y_(r,e);throw pd("Field path arguments must be of type string or ",r,!1,void 0,t)}const P2=new RegExp("[~\\*/\\[\\]]");function y_(r,e,t){if(e.search(P2)>=0)throw pd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new fp(...e.split("."))._internalPath}catch{throw pd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function pd(r,e,t,s,a){const l=s&&!s.isEmpty(),d=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||d)&&(p+=" (found",l&&(p+=` in field ${s}`),d&&(p+=` in document ${a}`),p+=")"),new ce(X.INVALID_ARGUMENT,f+r+p)}function x_(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{convertValue(e,t="none"){switch(si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return oi(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[od].arrayValue?.values?.map((s=>_t(s.doubleValue)));return new Yr(t)}convertGeoPoint(e){return new Nn(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Vd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ul(e));default:return null}}convertTimestamp(e){const t=ri(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=it.fromString(e);Ze(Vw(s),9688,{name:e});const a=new zl(s.get(1),s.get(3)),l=new ke(s.popFirst(5));return a.isEqual(t)||ns(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp extends j2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,t)}}function Vr(){return new pp("serverTimestamp")}const hx="@firebase/firestore",fx="4.10.0";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class L2{constructor(e,t,s){this._userDataWriter=t,this._data=s,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new sr({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new M2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Ki("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class M2 extends v_{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ce(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xp{}class vp extends xp{}function tt(r,e,...t){let s=[];e instanceof xp&&s.push(e),s=s.concat(t),(function(l){const d=l.filter((p=>p instanceof wp)).length,f=l.filter((p=>p instanceof Jd)).length;if(d>1||d>0&&f>0)throw new ce(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)r=a._apply(r);return r}class Jd extends vp{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Jd(e,t,s)}_apply(e){const t=this._parse(e);return w_(e._query,t),new ci(e.firestore,e.converter,dm(e._query,t))}_parse(e){const t=Qd(e.firestore);return(function(l,d,f,p,g,v,b){let k;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ce(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){px(b,v);const L=[];for(const N of b)L.push(mx(p,l,N));k={arrayValue:{values:L}}}else k=mx(p,l,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||px(b,v),k=R2(f,d,b,v==="in"||v==="not-in");return St.create(g,v,k)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ne(r,e,t){const s=e,a=Ki("where",r);return Jd._create(a,s,t)}class wp extends xp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Xr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let d=a;const f=l.getFlattenedFilters();for(const p of f)w_(d,p),d=dm(d,p)})(e._query,t),new ci(e.firestore,e.converter,dm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _p extends vp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _p(e,t)}_apply(e){const t=(function(a,l,d){if(a.startAt!==null)throw new ce(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ce(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bl(l,d)})(e._query,this._field,this._direction);return new ci(e.firestore,e.converter,rS(e._query,t))}}function Qi(r,e="asc"){const t=e,s=Ki("orderBy",r);return _p._create(s,t)}class bp extends vp{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new bp(e,t,s)}_apply(e){return new ci(e.firestore,e.converter,cd(e._query,this._limit,this._limitType))}}function Gl(r){return IN("limit",r),bp._create("limit",r,"F")}function mx(r,e,t){if(typeof(t=Ot(t))=="string"){if(t==="")throw new ce(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fw(e)&&t.indexOf("/")!==-1)throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(it.fromString(t));if(!ke.isDocumentKey(s))throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return A0(r,new ke(s))}if(t instanceof bt)return A0(r,t._key);throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dd(t)}.`)}function px(r,e){if(!Array.isArray(r)||r.length===0)throw new ce(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function w_(r,e){const t=(function(a,l){for(const d of a)for(const f of d.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function __(r,e,t){let s;return s=r?r.toFirestore(e):e,s}function O2(){return new D2("count")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(r){return F2(r,{count:O2()})}function F2(r,e){const t=Or(r.firestore,ui),s=Gd(t),a=MN(e,((l,d)=>new _S(d,l.aggregateType,l._internalFieldPath)));return v2(s,r._query,a).then((l=>(function(f,p,g){const v=new yp(f);return new L2(p,v,g)})(t,r,l)))}class Nl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $i extends v_{constructor(e,t,s,a,l,d){super(e,t,s,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ju(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ki("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=$i._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}$i._jsonSchemaVersion="firestore/documentSnapshot/1.0",$i._jsonSchema={type:At("string",$i._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class Ju extends $i{data(e={}){return super.data(e)}}class Ya{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Nl(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Ju(this._firestore,this._userDataWriter,s.key,s,new Nl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let d=0;return a._snapshot.docChanges.map((f=>{const p=new Ju(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Nl(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new Ju(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Nl(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return f.type!==0&&(g=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),v=d.indexOf(f.doc.key)),{type:U2(f.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ya._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function U2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ya._jsonSchemaVersion="firestore/querySnapshot/1.0",Ya._jsonSchema={type:At("string",Ya._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(r){r=Or(r,bt);const e=Or(r.firestore,ui),t=Gd(e);return y2(t,r._key).then((s=>B2(e,r,s)))}function nt(r){r=Or(r,ci);const e=Or(r.firestore,ui),t=Gd(e),s=new yp(e);return V2(r._query),x2(t,r._query).then((a=>new Ya(e,s,r,a)))}function z2(r,e,t){r=Or(r,bt);const s=Or(r.firestore,ui),a=__(r.converter,e),l=Qd(s);return Xd(s,[m_(l,"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,Mr.none())])}function qt(r,e,t,...s){r=Or(r,bt);const a=Or(r.firestore,ui),l=Qd(a);let d;return d=typeof(e=Ot(e))=="string"||e instanceof fp?C2(l,"updateDoc",r._key,e,t,s):A2(l,"updateDoc",r._key,e),Xd(a,[d.toMutation(r._key,Mr.exists(!0))])}function b_(r){return Xd(Or(r.firestore,ui),[new Qm(r._key,Mr.none())])}function $2(r,e){const t=Or(r.firestore,ui),s=ut(r),a=__(r.converter,e),l=Qd(r.firestore);return Xd(t,[m_(l,"addDoc",s._key,a,r.converter!==null,{}).toMutation(s._key,Mr.exists(!1))]).then((()=>s))}function Xd(r,e){const t=Gd(r);return w2(t,e)}function B2(r,e,t){const s=t.docs.get(e._key),a=new yp(r);return new $i(r,a,e._key,s,new Nl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){mN(mo),ro(new Hi("firestore",((s,{instanceIdentifier:a,options:l})=>{const d=s.getProvider("app").getImmediate(),f=new ui(new yN(s.getProvider("auth-internal")),new wN(d,s.getProvider("app-check-internal")),FN(d,a),d);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Xs(hx,fx,e),Xs(hx,fx,"esm2020")})();var q2="firebase",H2="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xs(q2,H2,"app");function k_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W2=k_,E_=new Zl("auth","Firebase",k_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Vm("@firebase/auth");function G2(r,...e){yd.logLevel<=$e.WARN&&yd.warn(`Auth (${mo}): ${r}`,...e)}function Xu(r,...e){yd.logLevel<=$e.ERROR&&yd.error(`Auth (${mo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(r,...e){throw kp(r,...e)}function Sn(r,...e){return kp(r,...e)}function T_(r,e,t){const s={...W2(),[e]:t};return new Zl("auth","Firebase",s).create(e,{appName:r.name})}function es(r){return T_(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kp(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return E_.create(r,...e)}function Se(r,e,...t){if(!r)throw kp(e,...t)}function Jn(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Xu(e),new Error(e)}function is(r,e){r||Jn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(){return typeof self<"u"&&self.location?.href||""}function K2(){return gx()==="http:"||gx()==="https:"}function gx(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(K2()||GT()||"connection"in navigator)?navigator.onLine:!0}function Y2(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t){this.shortDelay=e,this.longDelay=t,is(t>e,"Short delay should be less than long delay!"),this.isMobile=qT()||KT()}get(){return Q2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(r,e){is(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Z2=new oc(3e4,6e4);function ls(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function cs(r,e,t,s,a={}){return N_(r,a,async()=>{let l={},d={};s&&(e==="GET"?d=s:l={body:JSON.stringify(s)});const f=ec({key:r.config.apiKey,...d}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...l};return WT()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&fo(r.emulatorConfig.host)&&(g.credentials="include"),I_.fetch()(await S_(r,r.config.apiHost,t,f),g)})}async function N_(r,e,t){r._canInitEmulator=!1;const s={...J2,...e};try{const a=new tC(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw ju(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const f=l.ok?d.errorMessage:d.error.message,[p,g]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ju(r,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw ju(r,"email-already-in-use",d);if(p==="USER_DISABLED")throw ju(r,"user-disabled",d);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw T_(r,v,g);Zr(r,v)}}catch(a){if(a instanceof os)throw a;Zr(r,"network-request-failed",{message:String(a)})}}async function lc(r,e,t,s,a={}){const l=await cs(r,e,t,s,a);return"mfaPendingCredential"in l&&Zr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function S_(r,e,t,s){const a=`${e}${t}?${s}`,l=r,d=l.config.emulator?Ep(r.config,a):`${r.config.apiScheme}://${a}`;return X2.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function eC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Sn(this.auth,"network-request-failed")),Z2.get())})}}function ju(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Sn(r,e,s);return a.customData._tokenResponse=t,a}function yx(r){return r!==void 0&&r.enterprise!==void 0}class rC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return eC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nC(r,e){return cs(r,"GET","/v2/recaptchaConfig",ls(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sC(r,e){return cs(r,"POST","/v1/accounts:delete",e)}async function xd(r,e){return cs(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iC(r,e=!1){const t=Ot(r),s=await t.getIdToken(e),a=Tp(s);Se(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,d=l?.sign_in_provider;return{claims:a,token:s,authTime:jl(Wf(a.auth_time)),issuedAtTime:jl(Wf(a.iat)),expirationTime:jl(Wf(a.exp)),signInProvider:d||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Wf(r){return Number(r)*1e3}function Tp(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Xu("JWT malformed, contained fewer than 3 sections"),null;try{const a=Av(t);return a?JSON.parse(a):(Xu("Failed to decode base64 JWT payload"),null)}catch(a){return Xu("Caught error parsing JWT payload as JSON",a?.toString()),null}}function xx(r){const e=Tp(r);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof os&&aC(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function aC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=jl(this.lastLoginAt),this.creationTime=jl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(r){const e=r.auth,t=await r.getIdToken(),s=await Kl(r,xd(e,{idToken:t}));Se(s?.users.length,e,"internal-error");const a=s.users[0];r._notifyReloadListener(a);const l=a.providerUserInfo?.length?A_(a.providerUserInfo):[],d=cC(r.providerData,l),f=r.isAnonymous,p=!(r.email&&a.passwordHash)&&!d?.length,g=f?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new bm(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(r,v)}async function lC(r){const e=Ot(r);await vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cC(r,e){return[...r.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function A_(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC(r,e){const t=await N_(r,{},async()=>{const s=ec({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,d=await S_(r,a,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:s};return r.emulatorConfig&&fo(r.emulatorConfig.host)&&(p.credentials="include"),I_.fetch()(d,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function dC(r,e){return cs(r,"POST","/v2/accounts:revokeToken",ls(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=xx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await uC(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,d=new Ja;return s&&(Se(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),a&&(Se(typeof a=="string","internal-error",{appName:e}),d.accessToken=a),l&&(Se(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ja,this.toJSON())}_performRefresh(){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(r,e){Se(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Qr{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new oC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new bm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Kl(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return iC(this,e)}reload(){return lC(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Qr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await vd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dr(this.auth.app))return Promise.reject(es(this.auth));const e=await this.getIdToken();return await Kl(this,sC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,d=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:b,emailVerified:k,isAnonymous:P,providerData:L,stsTokenManager:N}=t;Se(b&&N,e,"internal-error");const O=Ja.fromJSON(this.name,N);Se(typeof b=="string",e,"internal-error"),zs(s,e.name),zs(a,e.name),Se(typeof k=="boolean",e,"internal-error"),Se(typeof P=="boolean",e,"internal-error"),zs(l,e.name),zs(d,e.name),zs(f,e.name),zs(p,e.name),zs(g,e.name),zs(v,e.name);const z=new Qr({uid:b,auth:e,email:a,emailVerified:k,displayName:s,isAnonymous:P,photoURL:d,phoneNumber:l,tenantId:f,stsTokenManager:O,createdAt:g,lastLoginAt:v});return L&&Array.isArray(L)&&(z.providerData=L.map($=>({...$}))),p&&(z._redirectEventId=p),z}static async _fromIdTokenResponse(e,t,s=!1){const a=new Ja;a.updateFromServerResponse(t);const l=new Qr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await vd(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Se(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?A_(a.providerUserInfo):[],d=!(a.email&&a.passwordHash)&&!l?.length,f=new Ja;f.updateFromIdToken(s);const p=new Qr({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:d}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new bm(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=new Map;function Xn(r){is(r instanceof Function,"Expected a class definition");let e=vx.get(r);return e?(is(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,vx.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}C_.type="NONE";const wx=C_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(r,e,t){return`firebase:${r}:${e}:${t}`}class Xa{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=Zu(this.userKey,a.apiKey,l),this.fullPersistenceKey=Zu("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xd(this.auth,{idToken:e}).catch(()=>{});return t?Qr._fromGetAccountInfoResponse(this.auth,t,e):null}return Qr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Xa(Xn(wx),e,s);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Xn(wx);const d=Zu(s,e.config.apiKey,e.name);let f=null;for(const g of t)try{const v=await g._get(d);if(v){let b;if(typeof v=="string"){const k=await xd(e,{idToken:v}).catch(()=>{});if(!k)break;b=await Qr._fromGetAccountInfoResponse(e,k,v)}else b=Qr._fromJSON(e,v);g!==l&&(f=b),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Xa(l,e,s):(l=p[0],f&&await l._set(d,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(d)}catch{}})),new Xa(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(D_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(R_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(M_(e))return"Blackberry";if(V_(e))return"Webos";if(P_(e))return"Safari";if((e.includes("chrome/")||j_(e))&&!e.includes("edge/"))return"Chrome";if(L_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function R_(r=tr()){return/firefox\//i.test(r)}function P_(r=tr()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function j_(r=tr()){return/crios\//i.test(r)}function D_(r=tr()){return/iemobile/i.test(r)}function L_(r=tr()){return/android/i.test(r)}function M_(r=tr()){return/blackberry/i.test(r)}function V_(r=tr()){return/webos/i.test(r)}function Ip(r=tr()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function hC(r=tr()){return Ip(r)&&!!window.navigator?.standalone}function fC(){return QT()&&document.documentMode===10}function O_(r=tr()){return Ip(r)||L_(r)||V_(r)||M_(r)||/windows phone/i.test(r)||D_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(r,e=[]){let t;switch(r){case"Browser":t=_x(tr());break;case"Worker":t=`${_x(tr())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${mo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((d,f)=>{try{const p=e(l);d(p)}catch(p){f(p)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(r,e={}){return cs(r,"GET","/v2/passwordPolicy",ls(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=6;class yC{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??gC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bx(this),this.idTokenSubscription=new bx(this),this.beforeStateQueue=new mC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=E_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Xa.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xd(this,{idToken:e}),s=await Qr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Dr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,d=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===d)&&f?.user&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Y2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dr(this.app))return Promise.reject(es(this));const t=e?Ot(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dr(this.app)?Promise.reject(es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dr(this.app)?Promise.reject(es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pC(this),t=new yC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await dC(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xn(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Xa.create(this,[Xn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(f,this,"internal-error"),f.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,a);return()=>{d=!0,p()}}else{const p=e.addObserver(t);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=F_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&G2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function di(r){return Ot(r)}class bx{constructor(e){this.auth=e,this.observer=null,this.addObserver=nI(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vC(r){Zd=r}function U_(r){return Zd.loadJS(r)}function wC(){return Zd.recaptchaEnterpriseScript}function _C(){return Zd.gapiScript}function bC(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class kC{constructor(){this.enterprise=new EC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class EC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const TC="recaptcha-enterprise",z_="NO_RECAPTCHA";class IC{constructor(e){this.type=TC,this.auth=di(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,f)=>{nC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new rC(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,d(g.siteKey)}}).catch(p=>{f(p)})})}function a(l,d,f){const p=window.grecaptcha;yx(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{d(g)}).catch(()=>{d(z_)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kC().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{s(this.auth).then(f=>{if(!t&&yx(window.grecaptcha))a(f,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=wC();p.length!==0&&(p+=f),U_(p).then(()=>{a(f,l,d)}).catch(g=>{d(g)})}}).catch(f=>{d(f)})})}}async function kx(r,e,t,s=!1,a=!1){const l=new IC(r);let d;if(a)d=z_;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function wd(r,e,t,s,a){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await kx(r,e,t,t==="getOobCode");return s(r,l)}else return s(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await kx(r,e,t,t==="getOobCode");return s(r,d)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(r,e){const t=Fm(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(qi(l,e??{}))return a;Zr(a,"already-initialized")}return t.initialize({options:e})}function SC(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Xn);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function AC(r,e,t){const s=di(r);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=$_(e),{host:d,port:f}=CC(e),p=f===null?"":`:${f}`,g={url:`${l}//${d}${p}/`},v=Object.freeze({host:d,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(qi(g,s.config.emulator)&&qi(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,fo(d)?(jv(`${l}//${d}${p}`),Dv("Auth",!0)):RC()}function $_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function CC(r){const e=$_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:Ex(s.substr(l.length+1))}}else{const[l,d]=s.split(":");return{host:l,port:Ex(d)}}}function Ex(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function RC(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Jn("not implemented")}_getIdTokenResponse(e){return Jn("not implemented")}_linkToIdToken(e,t){return Jn("not implemented")}_getReauthenticationResolver(e){return Jn("not implemented")}}async function PC(r,e){return cs(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(r,e){return lc(r,"POST","/v1/accounts:signInWithPassword",ls(r,e))}async function DC(r,e){return cs(r,"POST","/v1/accounts:sendOobCode",ls(r,e))}async function LC(r,e){return DC(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MC(r,e){return lc(r,"POST","/v1/accounts:signInWithEmailLink",ls(r,e))}async function VC(r,e){return lc(r,"POST","/v1/accounts:signInWithEmailLink",ls(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends Np{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Ql(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Ql(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wd(e,t,"signInWithPassword",jC);case"emailLink":return MC(e,{email:this._email,oobCode:this._password});default:Zr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wd(e,s,"signUpPassword",PC);case"emailLink":return VC(e,{idToken:t,email:this._email,oobCode:this._password});default:Zr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(r,e){return lc(r,"POST","/v1/accounts:signInWithIdp",ls(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="http://localhost";class Yi extends Np{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const d=new Yi(s,a);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Za(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Za(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Za(e,t)}buildRequest(){const e={requestUri:OC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ec(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UC(r){const e=bl(kl(r)).link,t=e?bl(kl(e)).deep_link_id:null,s=bl(kl(r)).deep_link_id;return(s?bl(kl(s)).link:null)||s||t||e||r}class Sp{constructor(e){const t=bl(kl(e)),s=t.apiKey??null,a=t.oobCode??null,l=FC(t.mode??null);Se(s&&a&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=UC(e);try{return new Sp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){this.providerId=wo.PROVIDER_ID}static credential(e,t){return Ql._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Sp.parseLink(t);return Se(s,"argument-error"),Ql._fromEmailAndCode(e,s.code,s.tenantId)}}wo.PROVIDER_ID="password";wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends B_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends cc{constructor(){super("facebook.com")}static credential(e){return Yi._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends cc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Yi._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ws.credential(t,s)}catch{return null}}}Ws.GOOGLE_SIGN_IN_METHOD="google.com";Ws.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends cc{constructor(){super("github.com")}static credential(e){return Yi._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.GITHUB_SIGN_IN_METHOD="github.com";Gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends cc{constructor(){super("twitter.com")}static credential(e,t){return Yi._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ks.credential(t,s)}catch{return null}}}Ks.TWITTER_SIGN_IN_METHOD="twitter.com";Ks.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(r,e){return lc(r,"POST","/v1/accounts:signUp",ls(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await Qr._fromIdTokenResponse(e,s,a),d=Tx(s);return new Ji({user:l,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=Tx(s);return new Ji({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function Tx(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d extends os{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,_d.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new _d(e,t,s,a)}}function q_(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?_d._fromErrorAndOperation(r,l,e,s):l})}async function $C(r,e,t=!1){const s=await Kl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ji._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BC(r,e,t=!1){const{auth:s}=r;if(Dr(s.app))return Promise.reject(es(s));const a="reauthenticate";try{const l=await Kl(r,q_(s,a,e,r),t);Se(l.idToken,s,"internal-error");const d=Tp(l.idToken);Se(d,s,"internal-error");const{sub:f}=d;return Se(r.uid===f,s,"user-mismatch"),Ji._forOperation(r,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Zr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H_(r,e,t=!1){if(Dr(r.app))return Promise.reject(es(r));const s="signIn",a=await q_(r,s,e),l=await Ji._fromIdTokenResponse(r,s,a);return t||await r._updateCurrentUser(l.user),l}async function qC(r,e){return H_(di(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W_(r){const e=di(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function HC(r,e,t){const s=di(r);await wd(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",LC)}async function WC(r,e,t){if(Dr(r.app))return Promise.reject(es(r));const s=di(r),d=await wd(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zC).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&W_(r),p}),f=await Ji._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(f.user),f}function GC(r,e,t){return Dr(r.app)?Promise.reject(es(r)):qC(Ot(r),wo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&W_(r),s})}function KC(r,e,t,s){return Ot(r).onIdTokenChanged(e,t,s)}function QC(r,e,t){return Ot(r).beforeAuthStateChanged(e,t)}function YC(r,e,t,s){return Ot(r).onAuthStateChanged(e,t,s)}function JC(r){return Ot(r).signOut()}const bd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bd,"1"),this.storage.removeItem(bd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=1e3,ZC=10;class K_ extends G_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,p)=>{this.notifyListeners(d,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},l=this.storage.getItem(s);fC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,ZC):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},XC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}K_.type="LOCAL";const eR=K_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_ extends G_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Q_.type="SESSION";const Y_=Q_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new eh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,d=this.handlersMap[a];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const f=Array.from(d).map(async g=>g(t.origin,l)),p=await tR(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}eh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,d;return new Promise((f,p)=>{const g=Ap("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:a,onMessage(b){const k=b;if(k.data.eventId===g)switch(k.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(k.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(d),a.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return window}function nR(r){An().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}async function sR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iR(){return navigator?.serviceWorker?.controller||null}function aR(){return J_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="firebaseLocalStorageDb",oR=1,kd="firebaseLocalStorage",Z_="fbase_key";class uc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function th(r,e){return r.transaction([kd],e?"readwrite":"readonly").objectStore(kd)}function lR(){const r=indexedDB.deleteDatabase(X_);return new uc(r).toPromise()}function km(){const r=indexedDB.open(X_,oR);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(kd,{keyPath:Z_})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(kd)?e(s):(s.close(),await lR(),e(await km()))})})}async function Ix(r,e,t){const s=th(r,!0).put({[Z_]:e,value:t});return new uc(s).toPromise()}async function cR(r,e){const t=th(r,!1).get(e),s=await new uc(t).toPromise();return s===void 0?null:s.value}function Nx(r,e){const t=th(r,!0).delete(e);return new uc(t).toPromise()}const uR=800,dR=3;class eb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await km(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>dR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return J_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=eh._getInstance(aR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await sR(),!this.activeServiceWorker)return;this.sender=new rR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await km();return await Ix(e,bd,"1"),await Nx(e,bd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Ix(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>cR(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Nx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=th(a,!1).getAll();return new uc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eb.type="LOCAL";const hR=eb;new oc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(r,e){return e?Xn(e):(Se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp extends Np{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Za(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Za(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Za(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mR(r){return H_(r.auth,new Cp(r),r.bypassAuthState)}function pR(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),BC(t,new Cp(r),r.bypassAuthState)}async function gR(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),$C(t,new Cp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:d,type:f}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mR;case"linkViaPopup":case"linkViaRedirect":return gR;case"reauthViaPopup":case"reauthViaRedirect":return pR;default:Zr(this.auth,"internal-error")}}resolve(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new oc(2e3,1e4);class Ga extends tb{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,Ga.currentPopupAction&&Ga.currentPopupAction.cancel(),Ga.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){is(this.filter.length===1,"Popup operations only handle one event");const e=Ap();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ga.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yR.get())};e()}}Ga.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="pendingRedirect",ed=new Map;class vR extends tb{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=ed.get(this.auth._key());if(!e){try{const s=await wR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}ed.set(this.auth._key(),e)}return this.bypassAuthState||ed.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wR(r,e){const t=kR(e),s=bR(r);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function _R(r,e){ed.set(r._key(),e)}function bR(r){return Xn(r._redirectPersistence)}function kR(r){return Zu(xR,r.config.apiKey,r.name)}async function ER(r,e,t=!1){if(Dr(r.app))return Promise.reject(es(r));const s=di(r),a=fR(s,e),d=await new vR(s,a,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=600*1e3;class IR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!rb(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Sn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sx(e))}saveEventToCache(e){this.cachedEventUids.add(Sx(e)),this.lastProcessedEventTime=Date.now()}}function Sx(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function rb({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function NR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(r,e={}){return cs(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CR=/^https?/;async function RR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await SR(r);for(const t of e)try{if(PR(t))return}catch{}Zr(r,"unauthorized-domain")}function PR(r){const e=_m(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!CR.test(t))return!1;if(AR.test(r))return s===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=new oc(3e4,6e4);function Ax(){const r=An().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function DR(r){return new Promise((e,t)=>{function s(){Ax(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ax(),t(Sn(r,"network-request-failed"))},timeout:jR.get()})}if(An().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(An().gapi?.load)s();else{const a=bC("iframefcb");return An()[a]=()=>{gapi.load?s():t(Sn(r,"network-request-failed"))},U_(`${_C()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw td=null,e})}let td=null;function LR(r){return td=td||DR(r),td}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=new oc(5e3,15e3),VR="__/auth/iframe",OR="emulator/auth/iframe",FR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zR(r){const e=r.config;Se(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Ep(e,OR):`https://${r.config.authDomain}/${VR}`,s={apiKey:e.apiKey,appName:r.name,v:mo},a=UR.get(r.config.apiHost);a&&(s.eid=a);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${ec(s).slice(1)}`}async function $R(r){const e=await LR(r),t=An().gapi;return Se(t,r,"internal-error"),e.open({where:document.body,url:zR(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FR,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const d=Sn(r,"network-request-failed"),f=An().setTimeout(()=>{l(d)},MR.get());function p(){An().clearTimeout(f),a(s)}s.ping(p).then(p,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qR=500,HR=600,WR="_blank",GR="http://localhost";class Cx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KR(r,e,t,s=qR,a=HR){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p={...BR,width:s.toString(),height:a.toString(),top:l,left:d},g=tr().toLowerCase();t&&(f=j_(g)?WR:t),R_(g)&&(e=e||GR,p.scrollbars="yes");const v=Object.entries(p).reduce((k,[P,L])=>`${k}${P}=${L},`,"");if(hC(g)&&f!=="_self")return QR(e||"",f),new Cx(null);const b=window.open(e||"",f,v);Se(b,r,"popup-blocked");try{b.focus()}catch{}return new Cx(b)}function QR(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="__/auth/handler",JR="emulator/auth/handler",XR=encodeURIComponent("fac");async function Rx(r,e,t,s,a,l){Se(r.config.authDomain,r,"auth-domain-config-required"),Se(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:mo,eventId:a};if(e instanceof B_){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",rI(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))d[v]=b}if(e instanceof cc){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(d.scopes=v.join(","))}r.tenantId&&(d.tid=r.tenantId);const f=d;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const p=await r._getAppCheckToken(),g=p?`#${XR}=${encodeURIComponent(p)}`:"";return`${ZR(r)}?${ec(f).slice(1)}${g}`}function ZR({config:r}){return r.emulator?Ep(r,JR):`https://${r.authDomain}/${YR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="webStorageSupport";class eP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Y_,this._completeRedirectFn=ER,this._overrideRedirectResult=_R}async _openPopup(e,t,s,a){is(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Rx(e,t,s,_m(),a);return KR(e,l,Ap())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await Rx(e,t,s,_m(),a);return nR(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(is(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await $R(e),s=new IR(e);return t.register("authEvent",a=>(Se(a?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gf,{type:Gf},a=>{const l=a?.[0]?.[Gf];l!==void 0&&t(!!l),Zr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=RR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return O_()||P_()||Ip()}}const tP=eP;var Px="@firebase/auth",jx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sP(r){ro(new Hi("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;Se(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:F_(r)},g=new xC(s,a,l,p);return SC(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ro(new Hi("auth-internal",e=>{const t=di(e.getProvider("auth").getImmediate());return(s=>new rP(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xs(Px,jx,nP(r)),Xs(Px,jx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=300,aP=Pv("authIdTokenMaxAge")||iP;let Dx=null;const oP=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>aP)return;const a=t?.token;Dx!==a&&(Dx=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function nb(r=Ov()){const e=Fm(r,"auth");if(e.isInitialized())return e.getImmediate();const t=NC(r,{popupRedirectResolver:tP,persistence:[hR,eR,Y_]}),s=Pv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const d=oP(l.toString());QC(t,d,()=>d(t.currentUser)),KC(t,f=>d(f))}}const a=Cv("auth");return a&&AC(t,`http://${a}`),t}function lP(){return document.getElementsByTagName("head")?.[0]??document}vC({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=a=>{const l=Sn("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",lP().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sP("Browser");const cP={apiKey:"AIzaSyAWcY83Sfnrd4hAiYtgcOhx7QEPxefExoI",authDomain:"fitcore-ca10b.firebaseapp.com",projectId:"fitcore-ca10b",storageBucket:"fitcore-ca10b.firebasestorage.app",messagingSenderId:"681434572380",appId:"1:681434572380:web:9a912d65ea43fe9ff22899"},sb=f0().length?f0()[0]:Vv(cP),eo=nb(sb),be=E2(sb);function Ge(r){if(!r)return null;if(r instanceof at||typeof r.toDate=="function")return r.toDate();if(r instanceof Date)return r;if(typeof r=="string"||typeof r=="number"){const e=new Date(r);if(!isNaN(e.getTime()))return e}return null}const ib=D.createContext(void 0);function uP(r,e){let t=e.planDuration??1;return e.planDuration||(e.paymentMethod==="Quarterly"?t=3:e.paymentMethod==="6-Month"&&(t=6)),{uid:r,email:e.email||null,displayName:e.displayName||null,role:e.role||"member",gymId:e.gymId||null,enrollmentStatus:e.enrollmentStatus||"none",paymentMethod:e.paymentMethod||null,transactionId:e.transactionId||null,enrolledAt:Ge(e.enrolledAt),createdAt:Ge(e.createdAt)||new Date,planDuration:t,timeSlot:e.timeSlot||null}}function dP(r,e){return{id:r,name:e.name||"",address:e.address||"",phone:e.phone||"",email:e.email||"",upiId:e.upiId||"",monthlyFee:e.monthlyFee||0,createdAt:Ge(e.createdAt)||new Date,adminId:e.adminId||"",isActive:e.isActive??!0,description:e.description||"",quarterlyFee:e.quarterlyFee||0,annualFee:e.annualFee||0,amenities:e.amenities||[],images:e.images||[],rating:e.rating||0,reviews:e.reviews||0,openingHours:e.openingHours||"",capacity:e.capacity||0,coordinates:e.coordinates||void 0}}function hP({children:r}){const[e,t]=D.useState(null),[s,a]=D.useState(null),[l,d]=D.useState(null),[f,p]=D.useState(!0),g=async k=>{try{const P=await gd(ut(be,"users",k));if(P.exists()){const L=uP(k,P.data());if(a(L),L.role==="gymAdmin"&&L.gymId){const N=await gd(ut(be,"gyms",L.gymId));N.exists()&&d(dP(N.id,N.data()))}}}catch(P){console.error("Error fetching user data:",P)}};D.useEffect(()=>{const k=YC(eo,async P=>{t(P),P?await g(P.uid):(a(null),d(null)),p(!1)});return()=>k()},[]);const v=async()=>{await JC(eo)},b=async()=>{e&&await g(e.uid)};return c.jsx(ib.Provider,{value:{user:e,userData:s,userGym:l,loading:f,logout:v,refreshUserData:b},children:r})}const ir=()=>{const r=D.useContext(ib);if(!r)throw new Error("useAuth must be used within AuthProvider");return r};function fP({darkMode:r}){const{userData:e,user:t}=ir(),s=Xi(),[a,l]=D.useState({activeMembers:0,enrollmentRequests:0,todaysRevenue:0,totalRevenue:0,pendingReports:0,pendingPlanChanges:0}),[d,f]=D.useState([]),[p,g]=D.useState([]),[v,b]=D.useState([]),[k,P]=D.useState(!0),[L,N]=D.useState(null),[O,z]=D.useState(null),$=async()=>{if(e?.gymId)try{P(!0),z(null);const I=tt(Xe(be,"users"),Ne("gymId","==",e.gymId),Ne("role","==","member"),Ne("enrollmentStatus","==","approved")),E=(await Hf(I)).data().count;let R=[];try{const U=tt(Xe(be,"enrollments"),Ne("gymId","==",e.gymId),Ne("status","==","pending"),Qi("createdAt","desc"),Gl(5));R=(await nt(U)).docs.map(se=>({...se.data(),id:se.id,createdAt:Ge(se.data().createdAt)||new Date}))}catch{const U=tt(Xe(be,"enrollments"),Ne("gymId","==",e.gymId),Ne("status","==","pending"));R=(await nt(U)).docs.map(se=>({...se.data(),id:se.id,createdAt:Ge(se.data().createdAt)||new Date})),R.sort((se,pe)=>pe.createdAt.getTime()-se.createdAt.getTime()),R=R.slice(0,5)}g(R);const C=tt(Xe(be,"enrollments"),Ne("gymId","==",e.gymId),Ne("status","==","pending")),S=(await Hf(C)).data().count,M=new Date;M.setHours(0,0,0,0);const A=tt(Xe(be,"enrollments"),Ne("gymId","==",e.gymId),Ne("status","==","approved")),ie=await nt(A);let we=0,Ce=0;ie.docs.forEach(U=>{const J=U.data(),se=J.amount||0;Ce+=se;const pe=Ge(J.createdAt);pe&&pe>=M&&(we+=se)});let Me=[];try{const U=tt(Xe(be,"enrollments"),Ne("gymId","==",e.gymId),Ne("status","==","approved"),Qi("createdAt","desc"),Gl(5));Me=(await nt(U)).docs.map(se=>({...se.data(),id:se.id,createdAt:Ge(se.data().createdAt)||new Date}))}catch{const U=tt(Xe(be,"enrollments"),Ne("gymId","==",e.gymId),Ne("status","==","approved"));Me=(await nt(U)).docs.map(se=>({...se.data(),id:se.id,createdAt:Ge(se.data().createdAt)||new Date})),Me.sort((se,pe)=>pe.createdAt.getTime()-se.createdAt.getTime()),Me=Me.slice(0,5)}f(Me);let K=0,de=[];try{const U=tt(Xe(be,"gymReports"),Ne("gymId","==",e.gymId),Ne("status","==","pending")),J=await nt(U);K=J.size,de=J.docs.map(se=>({...se.data(),id:se.id,createdAt:Ge(se.data().createdAt)||new Date})),de.sort((se,pe)=>pe.createdAt.getTime()-se.createdAt.getTime()),de=de.slice(0,3)}catch{K=0}b(de);let le=0;try{const U=tt(Xe(be,"planChangeRequests"),Ne("gymId","==",e.gymId),Ne("status","==","pending"));le=(await Hf(U)).data().count}catch{le=0}l({activeMembers:E,enrollmentRequests:S,todaysRevenue:we,totalRevenue:Ce,pendingReports:K,pendingPlanChanges:le})}catch(I){console.error("Error fetching dashboard data:",I),z("Failed to load dashboard data. Please check your connection.")}finally{P(!1)}};D.useEffect(()=>{$()},[e]);const Q=async I=>{if(confirm(`Approve enrollment for ${I.userName}?`)){N(I.id);try{await qt(ut(be,"enrollments",I.id),{status:"approved",verifiedAt:Vr(),verifiedBy:t?.uid||null}),await qt(ut(be,"users",I.userId),{enrollmentStatus:"approved",enrolledAt:Vr(),gymId:e?.gymId||I.gymId}),await $(),alert("Enrollment approved successfully")}catch(E){console.error("Error approving:",E),alert("Failed to approve enrollment. Please check permissions.")}finally{N(null)}}},fe=async I=>{if(confirm(`Reject enrollment for ${I.userName}?`)){N(I.id);try{await qt(ut(be,"enrollments",I.id),{status:"rejected",verifiedAt:Vr(),verifiedBy:t?.uid||null}),await qt(ut(be,"users",I.userId),{enrollmentStatus:"rejected",gymId:null}),await $(),alert("Enrollment rejected successfully")}catch(E){console.error("Error rejecting:",E),alert("Failed to reject enrollment")}finally{N(null)}}},oe=[{label:"Active Members",value:k?"...":a.activeMembers.toString(),change:a.activeMembers===1?"1 Member":`${a.activeMembers} Members`,icon:Bi,color:"text-emerald-600 dark:text-emerald-400",bgColor:"bg-emerald-50 dark:bg-emerald-900/20"},{label:"Pending Requests",value:k?"...":a.enrollmentRequests.toString(),change:a.enrollmentRequests>0?"Needs attention":"All caught up",icon:O1,color:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-50 dark:bg-orange-900/20"},{label:"Today's Revenue",value:k?"...":`${a.todaysRevenue.toLocaleString()}`,change:"From today",icon:to,color:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-50 dark:bg-purple-900/20"},{label:"Total Revenue",value:k?"...":`${a.totalRevenue.toLocaleString()}`,change:"All time",icon:ET,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20"}],Y=[a.pendingReports>0&&{label:"Issue Reports",value:a.pendingReports,desc:`${a.pendingReports} pending report${a.pendingReports>1?"s":""} from members`,icon:Ml,color:"text-amber-600 dark:text-amber-400",bgColor:"bg-amber-50 dark:bg-amber-900/20",borderColor:"border-amber-200 dark:border-amber-800",path:"/gym-reports"},a.pendingPlanChanges>0&&{label:"Plan Changes",value:a.pendingPlanChanges,desc:`${a.pendingPlanChanges} member${a.pendingPlanChanges>1?"s":""} requested plan changes`,icon:Mm,color:"text-indigo-600 dark:text-indigo-400",bgColor:"bg-indigo-50 dark:bg-indigo-900/20",borderColor:"border-indigo-200 dark:border-indigo-800",path:"/members"}].filter(Boolean);return c.jsx("div",{className:r?"dark":"",children:c.jsxs("div",{className:"space-y-6",children:[O&&c.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4 mb-4 rounded-r-xl",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(Pd,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:O})})]})}),!k&&Y.length>0&&c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Y.map(I=>{const E=I.icon;return c.jsxs("button",{onClick:()=>s(I.path),className:`flex items-center gap-4 p-4 rounded-xl border ${I.borderColor} ${I.bgColor} hover:opacity-90 transition-opacity text-left w-full`,children:[c.jsx("div",{className:`p-2.5 rounded-lg ${I.bgColor}`,children:c.jsx(E,{className:`w-5 h-5 ${I.color}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("p",{className:`text-sm font-bold ${I.color}`,children:[I.value," ",I.label]}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:I.desc})]}),c.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"View "})]},I.label)})}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:oe.map(I=>{const E=I.icon;return c.jsxs("div",{className:"glass-card p-6 rounded-2xl relative overflow-hidden group hover:scale-[1.02] transition-transform duration-300",children:[c.jsx("div",{className:`absolute -right-4 -top-4 w-24 h-24 rounded-full opacity-10 group-hover:opacity-20 transition-opacity blur-2xl ${I.bgColor.replace("bg-","bg-")}`}),c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsx("div",{className:`p-3 rounded-xl ${I.bgColor}`,children:c.jsx(E,{className:`w-6 h-6 ${I.color}`})}),c.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300",children:I.change})]}),c.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-1 tracking-tight",children:I.value}),c.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:I.label})]},I.label)})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"glass-card rounded-2xl p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Pending Requests"}),c.jsxs("span",{className:"text-xs font-medium text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/20 px-3 py-1 rounded-full",children:[p.length," new"]})]}),c.jsx("div",{className:"space-y-4",children:k?c.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"Loading requests..."}):p.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(kn,{className:"w-8 h-8 text-emerald-500"})}),c.jsx("p",{className:"text-base font-medium text-gray-900 dark:text-gray-100",children:"All caught up!"}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No pending enrollment requests."})]}):p.map(I=>c.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-50/50 dark:bg-gray-800/40 border border-gray-100 dark:border-gray-800/50 hover:bg-white dark:hover:bg-gray-800 transition-colors shadow-sm",children:[c.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[c.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:I.userName}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:I.userEmail}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsxs("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded",children:["",I.amount]}),c.jsx("span",{className:"text-xs text-gray-400",children:""}),c.jsx("span",{className:"text-xs text-gray-500 capitalize",children:I.paymentMethod})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>Q(I),disabled:L===I.id,className:"p-2 text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 rounded-lg transition-colors disabled:opacity-50",title:"Approve",children:c.jsx(kn,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>fe(I),disabled:L===I.id,className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors disabled:opacity-50",title:"Reject",children:c.jsx(Sd,{className:"w-5 h-5"})})]})]},I.id))})]}),c.jsxs("div",{className:"glass-card rounded-2xl p-6",children:[c.jsx("div",{className:"flex items-center justify-between mb-6",children:c.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Recent Payments"})}),c.jsx("div",{className:"space-y-4",children:k?c.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"Loading payments..."}):d.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(to,{className:"w-8 h-8 text-gray-400"})}),c.jsx("p",{className:"text-base font-medium text-gray-900 dark:text-gray-100",children:"No payments yet"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Approved enrollments will appear here"})]}):d.map(I=>c.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-50/50 dark:bg-gray-800/40 border border-gray-100 dark:border-gray-800/50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-50 dark:bg-primary-900/20 flex items-center justify-center text-primary-600 dark:text-primary-400 font-bold text-sm",children:I.userName.charAt(0)}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:I.userName}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:I.createdAt instanceof Date?I.createdAt.toLocaleDateString():"Date N/A"})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["",I.amount]}),c.jsx("p",{className:"text-xs font-medium text-emerald-600 dark:text-emerald-400 capitalize",children:I.paymentMethod})]})]},I.id))})]})]}),!k&&v.length>0&&c.jsxs("div",{className:"glass-card rounded-2xl p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(Ml,{className:"w-5 h-5 text-amber-500"}),"Recent Issue Reports"]}),c.jsx("button",{onClick:()=>s("/gym-reports"),className:"text-xs font-medium text-primary-600 dark:text-primary-400 hover:underline",children:"View all "})]}),c.jsx("div",{className:"space-y-3",children:v.map(I=>c.jsxs("div",{className:"flex items-start justify-between p-4 rounded-xl bg-gray-50/50 dark:bg-gray-800/40 border border-gray-100 dark:border-gray-800/50",children:[c.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:I.userName}),c.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded text-xs font-medium",children:"pending"})]}),c.jsx("div",{className:"flex flex-wrap gap-1 mb-1",children:I.issueTypes.map(E=>c.jsx("span",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded text-xs",children:E},E))}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:I.description})]}),c.jsx("p",{className:"text-xs text-gray-400 whitespace-nowrap",children:I.createdAt instanceof Date?I.createdAt.toLocaleDateString():""})]},I.id))})]})]})})}function Lx(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function mP(...r){return e=>{let t=!1;const s=r.map(a=>{const l=Lx(a,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let a=0;a<s.length;a++){const l=s[a];typeof l=="function"?l():Lx(r[a],null)}}}}var pP=Symbol.for("react.lazy"),Ed=$k[" use ".trim().toString()];function gP(r){return typeof r=="object"&&r!==null&&"then"in r}function ab(r){return r!=null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===pP&&"_payload"in r&&gP(r._payload)}function ob(r){const e=yP(r),t=D.forwardRef((s,a)=>{let{children:l,...d}=s;ab(l)&&typeof Ed=="function"&&(l=Ed(l._payload));const f=D.Children.toArray(l),p=f.find(vP);if(p){const g=p.props.children,v=f.map(b=>b===p?D.Children.count(g)>1?D.Children.only(null):D.isValidElement(g)?g.props.children:null:b);return c.jsx(e,{...d,ref:a,children:D.isValidElement(g)?D.cloneElement(g,void 0,v):null})}return c.jsx(e,{...d,ref:a,children:l})});return t.displayName=`${r}.Slot`,t}var lb=ob("Slot");function yP(r){const e=D.forwardRef((t,s)=>{let{children:a,...l}=t;if(ab(a)&&typeof Ed=="function"&&(a=Ed(a._payload)),D.isValidElement(a)){const d=_P(a),f=wP(l,a.props);return a.type!==D.Fragment&&(f.ref=s?mP(s,d):d),D.cloneElement(a,f)}return D.Children.count(a)>1?D.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var xP=Symbol("radix.slottable");function vP(r){return D.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===xP}function wP(r,e){const t={...e};for(const s in e){const a=r[s],l=e[s];/^on[A-Z]/.test(s)?a&&l?t[s]=(...f)=>{const p=l(...f);return a(...f),p}:a&&(t[s]=a):s==="style"?t[s]={...a,...l}:s==="className"&&(t[s]=[a,l].filter(Boolean).join(" "))}return{...r,...t}}function _P(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function cb(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var a=r.length;for(e=0;e<a;e++)r[e]&&(t=cb(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function ub(){for(var r,e,t=0,s="",a=arguments.length;t<a;t++)(r=arguments[t])&&(e=cb(r))&&(s&&(s+=" "),s+=e);return s}const Mx=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,Vx=ub,db=(r,e)=>t=>{var s;if(e?.variants==null)return Vx(r,t?.class,t?.className);const{variants:a,defaultVariants:l}=e,d=Object.keys(a).map(g=>{const v=t?.[g],b=l?.[g];if(v===null)return null;const k=Mx(v)||Mx(b);return a[g][k]}),f=t&&Object.entries(t).reduce((g,v)=>{let[b,k]=v;return k===void 0||(g[b]=k),g},{}),p=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((g,v)=>{let{class:b,className:k,...P}=v;return Object.entries(P).every(L=>{let[N,O]=L;return Array.isArray(O)?O.includes({...l,...f}[N]):{...l,...f}[N]===O})?[...g,b,k]:g},[]);return Vx(r,d,p,t?.class,t?.className)},bP=(r,e)=>{const t=new Array(r.length+e.length);for(let s=0;s<r.length;s++)t[s]=r[s];for(let s=0;s<e.length;s++)t[r.length+s]=e[s];return t},kP=(r,e)=>({classGroupId:r,validator:e}),hb=(r=new Map,e=null,t)=>({nextPart:r,validators:e,classGroupId:t}),Td="-",Ox=[],EP="arbitrary..",TP=r=>{const e=NP(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=r;return{getClassGroupId:d=>{if(d.startsWith("[")&&d.endsWith("]"))return IP(d);const f=d.split(Td),p=f[0]===""&&f.length>1?1:0;return fb(f,p,e)},getConflictingClassGroupIds:(d,f)=>{if(f){const p=s[d],g=t[d];return p?g?bP(g,p):p:g||Ox}return t[d]||Ox}}},fb=(r,e,t)=>{if(r.length-e===0)return t.classGroupId;const a=r[e],l=t.nextPart.get(a);if(l){const g=fb(r,e+1,l);if(g)return g}const d=t.validators;if(d===null)return;const f=e===0?r.join(Td):r.slice(e).join(Td),p=d.length;for(let g=0;g<p;g++){const v=d[g];if(v.validator(f))return v.classGroupId}},IP=r=>r.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=r.slice(1,-1),t=e.indexOf(":"),s=e.slice(0,t);return s?EP+s:void 0})(),NP=r=>{const{theme:e,classGroups:t}=r;return SP(t,e)},SP=(r,e)=>{const t=hb();for(const s in r){const a=r[s];Rp(a,t,s,e)}return t},Rp=(r,e,t,s)=>{const a=r.length;for(let l=0;l<a;l++){const d=r[l];AP(d,e,t,s)}},AP=(r,e,t,s)=>{if(typeof r=="string"){CP(r,e,t);return}if(typeof r=="function"){RP(r,e,t,s);return}PP(r,e,t,s)},CP=(r,e,t)=>{const s=r===""?e:mb(e,r);s.classGroupId=t},RP=(r,e,t,s)=>{if(jP(r)){Rp(r(s),e,t,s);return}e.validators===null&&(e.validators=[]),e.validators.push(kP(t,r))},PP=(r,e,t,s)=>{const a=Object.entries(r),l=a.length;for(let d=0;d<l;d++){const[f,p]=a[d];Rp(p,mb(e,f),t,s)}},mb=(r,e)=>{let t=r;const s=e.split(Td),a=s.length;for(let l=0;l<a;l++){const d=s[l];let f=t.nextPart.get(d);f||(f=hb(),t.nextPart.set(d,f)),t=f}return t},jP=r=>"isThemeGetter"in r&&r.isThemeGetter===!0,DP=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),s=Object.create(null);const a=(l,d)=>{t[l]=d,e++,e>r&&(e=0,s=t,t=Object.create(null))};return{get(l){let d=t[l];if(d!==void 0)return d;if((d=s[l])!==void 0)return a(l,d),d},set(l,d){l in t?t[l]=d:a(l,d)}}},Em="!",Fx=":",LP=[],Ux=(r,e,t,s,a)=>({modifiers:r,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:s,isExternal:a}),MP=r=>{const{prefix:e,experimentalParseClassName:t}=r;let s=a=>{const l=[];let d=0,f=0,p=0,g;const v=a.length;for(let N=0;N<v;N++){const O=a[N];if(d===0&&f===0){if(O===Fx){l.push(a.slice(p,N)),p=N+1;continue}if(O==="/"){g=N;continue}}O==="["?d++:O==="]"?d--:O==="("?f++:O===")"&&f--}const b=l.length===0?a:a.slice(p);let k=b,P=!1;b.endsWith(Em)?(k=b.slice(0,-1),P=!0):b.startsWith(Em)&&(k=b.slice(1),P=!0);const L=g&&g>p?g-p:void 0;return Ux(l,P,k,L)};if(e){const a=e+Fx,l=s;s=d=>d.startsWith(a)?l(d.slice(a.length)):Ux(LP,!1,d,void 0,!0)}if(t){const a=s;s=l=>t({className:l,parseClassName:a})}return s},VP=r=>{const e=new Map;return r.orderSensitiveModifiers.forEach((t,s)=>{e.set(t,1e6+s)}),t=>{const s=[];let a=[];for(let l=0;l<t.length;l++){const d=t[l],f=d[0]==="[",p=e.has(d);f||p?(a.length>0&&(a.sort(),s.push(...a),a=[]),s.push(d)):a.push(d)}return a.length>0&&(a.sort(),s.push(...a)),s}},OP=r=>({cache:DP(r.cacheSize),parseClassName:MP(r),sortModifiers:VP(r),...TP(r)}),FP=/\s+/,UP=(r,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:l}=e,d=[],f=r.trim().split(FP);let p="";for(let g=f.length-1;g>=0;g-=1){const v=f[g],{isExternal:b,modifiers:k,hasImportantModifier:P,baseClassName:L,maybePostfixModifierPosition:N}=t(v);if(b){p=v+(p.length>0?" "+p:p);continue}let O=!!N,z=s(O?L.substring(0,N):L);if(!z){if(!O){p=v+(p.length>0?" "+p:p);continue}if(z=s(L),!z){p=v+(p.length>0?" "+p:p);continue}O=!1}const $=k.length===0?"":k.length===1?k[0]:l(k).join(":"),Q=P?$+Em:$,fe=Q+z;if(d.indexOf(fe)>-1)continue;d.push(fe);const oe=a(z,O);for(let Y=0;Y<oe.length;++Y){const I=oe[Y];d.push(Q+I)}p=v+(p.length>0?" "+p:p)}return p},zP=(...r)=>{let e=0,t,s,a="";for(;e<r.length;)(t=r[e++])&&(s=pb(t))&&(a&&(a+=" "),a+=s);return a},pb=r=>{if(typeof r=="string")return r;let e,t="";for(let s=0;s<r.length;s++)r[s]&&(e=pb(r[s]))&&(t&&(t+=" "),t+=e);return t},$P=(r,...e)=>{let t,s,a,l;const d=p=>{const g=e.reduce((v,b)=>b(v),r());return t=OP(g),s=t.cache.get,a=t.cache.set,l=f,f(p)},f=p=>{const g=s(p);if(g)return g;const v=UP(p,t);return a(p,v),v};return l=d,(...p)=>l(zP(...p))},BP=[],Pt=r=>{const e=t=>t[r]||BP;return e.isThemeGetter=!0,e},gb=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,yb=/^\((?:(\w[\w-]*):)?(.+)\)$/i,qP=/^\d+\/\d+$/,HP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,WP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,GP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,KP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,QP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$a=r=>qP.test(r),Fe=r=>!!r&&!Number.isNaN(Number(r)),$s=r=>!!r&&Number.isInteger(Number(r)),Kf=r=>r.endsWith("%")&&Fe(r.slice(0,-1)),Yn=r=>HP.test(r),YP=()=>!0,JP=r=>WP.test(r)&&!GP.test(r),xb=()=>!1,XP=r=>KP.test(r),ZP=r=>QP.test(r),ej=r=>!ye(r)&&!xe(r),tj=r=>_o(r,_b,xb),ye=r=>gb.test(r),Fi=r=>_o(r,bb,JP),Qf=r=>_o(r,aj,Fe),zx=r=>_o(r,vb,xb),rj=r=>_o(r,wb,ZP),Du=r=>_o(r,kb,XP),xe=r=>yb.test(r),vl=r=>bo(r,bb),nj=r=>bo(r,oj),$x=r=>bo(r,vb),sj=r=>bo(r,_b),ij=r=>bo(r,wb),Lu=r=>bo(r,kb,!0),_o=(r,e,t)=>{const s=gb.exec(r);return s?s[1]?e(s[1]):t(s[2]):!1},bo=(r,e,t=!1)=>{const s=yb.exec(r);return s?s[1]?e(s[1]):t:!1},vb=r=>r==="position"||r==="percentage",wb=r=>r==="image"||r==="url",_b=r=>r==="length"||r==="size"||r==="bg-size",bb=r=>r==="length",aj=r=>r==="number",oj=r=>r==="family-name",kb=r=>r==="shadow",lj=()=>{const r=Pt("color"),e=Pt("font"),t=Pt("text"),s=Pt("font-weight"),a=Pt("tracking"),l=Pt("leading"),d=Pt("breakpoint"),f=Pt("container"),p=Pt("spacing"),g=Pt("radius"),v=Pt("shadow"),b=Pt("inset-shadow"),k=Pt("text-shadow"),P=Pt("drop-shadow"),L=Pt("blur"),N=Pt("perspective"),O=Pt("aspect"),z=Pt("ease"),$=Pt("animate"),Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],fe=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],oe=()=>[...fe(),xe,ye],Y=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],E=()=>[xe,ye,p],R=()=>[$a,"full","auto",...E()],C=()=>[$s,"none","subgrid",xe,ye],S=()=>["auto",{span:["full",$s,xe,ye]},$s,xe,ye],M=()=>[$s,"auto",xe,ye],A=()=>["auto","min","max","fr",xe,ye],ie=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],we=()=>["start","end","center","stretch","center-safe","end-safe"],Ce=()=>["auto",...E()],Me=()=>[$a,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],K=()=>[r,xe,ye],de=()=>[...fe(),$x,zx,{position:[xe,ye]}],le=()=>["no-repeat",{repeat:["","x","y","space","round"]}],U=()=>["auto","cover","contain",sj,tj,{size:[xe,ye]}],J=()=>[Kf,vl,Fi],se=()=>["","none","full",g,xe,ye],pe=()=>["",Fe,vl,Fi],Ve=()=>["solid","dashed","dotted","double"],Oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ie=()=>[Fe,Kf,$x,zx],ze=()=>["","none",L,xe,ye],Qe=()=>["none",Fe,xe,ye],kt=()=>["none",Fe,xe,ye],en=()=>[Fe,xe,ye],tn=()=>[$a,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Yn],breakpoint:[Yn],color:[YP],container:[Yn],"drop-shadow":[Yn],ease:["in","out","in-out"],font:[ej],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Yn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Yn],shadow:[Yn],spacing:["px",Fe],text:[Yn],"text-shadow":[Yn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",$a,ye,xe,O]}],container:["container"],columns:[{columns:[Fe,ye,xe,f]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:oe()}],overflow:[{overflow:Y()}],"overflow-x":[{"overflow-x":Y()}],"overflow-y":[{"overflow-y":Y()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[$s,"auto",xe,ye]}],basis:[{basis:[$a,"full","auto",f,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Fe,$a,"auto","initial","none",ye]}],grow:[{grow:["",Fe,xe,ye]}],shrink:[{shrink:["",Fe,xe,ye]}],order:[{order:[$s,"first","last","none",xe,ye]}],"grid-cols":[{"grid-cols":C()}],"col-start-end":[{col:S()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":C()}],"row-start-end":[{row:S()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":A()}],"auto-rows":[{"auto-rows":A()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...ie(),"normal"]}],"justify-items":[{"justify-items":[...we(),"normal"]}],"justify-self":[{"justify-self":["auto",...we()]}],"align-content":[{content:["normal",...ie()]}],"align-items":[{items:[...we(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...we(),{baseline:["","last"]}]}],"place-content":[{"place-content":ie()}],"place-items":[{"place-items":[...we(),"baseline"]}],"place-self":[{"place-self":["auto",...we()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:Ce()}],mx:[{mx:Ce()}],my:[{my:Ce()}],ms:[{ms:Ce()}],me:[{me:Ce()}],mt:[{mt:Ce()}],mr:[{mr:Ce()}],mb:[{mb:Ce()}],ml:[{ml:Ce()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:Me()}],w:[{w:[f,"screen",...Me()]}],"min-w":[{"min-w":[f,"screen","none",...Me()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[d]},...Me()]}],h:[{h:["screen","lh",...Me()]}],"min-h":[{"min-h":["screen","lh","none",...Me()]}],"max-h":[{"max-h":["screen","lh",...Me()]}],"font-size":[{text:["base",t,vl,Fi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,xe,Qf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Kf,ye]}],"font-family":[{font:[nj,ye,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,xe,ye]}],"line-clamp":[{"line-clamp":[Fe,"none",xe,Qf]}],leading:[{leading:[l,...E()]}],"list-image":[{"list-image":["none",xe,ye]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",xe,ye]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:K()}],"text-color":[{text:K()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ve(),"wavy"]}],"text-decoration-thickness":[{decoration:[Fe,"from-font","auto",xe,Fi]}],"text-decoration-color":[{decoration:K()}],"underline-offset":[{"underline-offset":[Fe,"auto",xe,ye]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe,ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe,ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:de()}],"bg-repeat":[{bg:le()}],"bg-size":[{bg:U()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},$s,xe,ye],radial:["",xe,ye],conic:[$s,xe,ye]},ij,rj]}],"bg-color":[{bg:K()}],"gradient-from-pos":[{from:J()}],"gradient-via-pos":[{via:J()}],"gradient-to-pos":[{to:J()}],"gradient-from":[{from:K()}],"gradient-via":[{via:K()}],"gradient-to":[{to:K()}],rounded:[{rounded:se()}],"rounded-s":[{"rounded-s":se()}],"rounded-e":[{"rounded-e":se()}],"rounded-t":[{"rounded-t":se()}],"rounded-r":[{"rounded-r":se()}],"rounded-b":[{"rounded-b":se()}],"rounded-l":[{"rounded-l":se()}],"rounded-ss":[{"rounded-ss":se()}],"rounded-se":[{"rounded-se":se()}],"rounded-ee":[{"rounded-ee":se()}],"rounded-es":[{"rounded-es":se()}],"rounded-tl":[{"rounded-tl":se()}],"rounded-tr":[{"rounded-tr":se()}],"rounded-br":[{"rounded-br":se()}],"rounded-bl":[{"rounded-bl":se()}],"border-w":[{border:pe()}],"border-w-x":[{"border-x":pe()}],"border-w-y":[{"border-y":pe()}],"border-w-s":[{"border-s":pe()}],"border-w-e":[{"border-e":pe()}],"border-w-t":[{"border-t":pe()}],"border-w-r":[{"border-r":pe()}],"border-w-b":[{"border-b":pe()}],"border-w-l":[{"border-l":pe()}],"divide-x":[{"divide-x":pe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":pe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ve(),"hidden","none"]}],"divide-style":[{divide:[...Ve(),"hidden","none"]}],"border-color":[{border:K()}],"border-color-x":[{"border-x":K()}],"border-color-y":[{"border-y":K()}],"border-color-s":[{"border-s":K()}],"border-color-e":[{"border-e":K()}],"border-color-t":[{"border-t":K()}],"border-color-r":[{"border-r":K()}],"border-color-b":[{"border-b":K()}],"border-color-l":[{"border-l":K()}],"divide-color":[{divide:K()}],"outline-style":[{outline:[...Ve(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Fe,xe,ye]}],"outline-w":[{outline:["",Fe,vl,Fi]}],"outline-color":[{outline:K()}],shadow:[{shadow:["","none",v,Lu,Du]}],"shadow-color":[{shadow:K()}],"inset-shadow":[{"inset-shadow":["none",b,Lu,Du]}],"inset-shadow-color":[{"inset-shadow":K()}],"ring-w":[{ring:pe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:K()}],"ring-offset-w":[{"ring-offset":[Fe,Fi]}],"ring-offset-color":[{"ring-offset":K()}],"inset-ring-w":[{"inset-ring":pe()}],"inset-ring-color":[{"inset-ring":K()}],"text-shadow":[{"text-shadow":["none",k,Lu,Du]}],"text-shadow-color":[{"text-shadow":K()}],opacity:[{opacity:[Fe,xe,ye]}],"mix-blend":[{"mix-blend":[...Oe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Oe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Fe]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ie()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ie()}],"mask-image-linear-from-color":[{"mask-linear-from":K()}],"mask-image-linear-to-color":[{"mask-linear-to":K()}],"mask-image-t-from-pos":[{"mask-t-from":Ie()}],"mask-image-t-to-pos":[{"mask-t-to":Ie()}],"mask-image-t-from-color":[{"mask-t-from":K()}],"mask-image-t-to-color":[{"mask-t-to":K()}],"mask-image-r-from-pos":[{"mask-r-from":Ie()}],"mask-image-r-to-pos":[{"mask-r-to":Ie()}],"mask-image-r-from-color":[{"mask-r-from":K()}],"mask-image-r-to-color":[{"mask-r-to":K()}],"mask-image-b-from-pos":[{"mask-b-from":Ie()}],"mask-image-b-to-pos":[{"mask-b-to":Ie()}],"mask-image-b-from-color":[{"mask-b-from":K()}],"mask-image-b-to-color":[{"mask-b-to":K()}],"mask-image-l-from-pos":[{"mask-l-from":Ie()}],"mask-image-l-to-pos":[{"mask-l-to":Ie()}],"mask-image-l-from-color":[{"mask-l-from":K()}],"mask-image-l-to-color":[{"mask-l-to":K()}],"mask-image-x-from-pos":[{"mask-x-from":Ie()}],"mask-image-x-to-pos":[{"mask-x-to":Ie()}],"mask-image-x-from-color":[{"mask-x-from":K()}],"mask-image-x-to-color":[{"mask-x-to":K()}],"mask-image-y-from-pos":[{"mask-y-from":Ie()}],"mask-image-y-to-pos":[{"mask-y-to":Ie()}],"mask-image-y-from-color":[{"mask-y-from":K()}],"mask-image-y-to-color":[{"mask-y-to":K()}],"mask-image-radial":[{"mask-radial":[xe,ye]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ie()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ie()}],"mask-image-radial-from-color":[{"mask-radial-from":K()}],"mask-image-radial-to-color":[{"mask-radial-to":K()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":fe()}],"mask-image-conic-pos":[{"mask-conic":[Fe]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ie()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ie()}],"mask-image-conic-from-color":[{"mask-conic-from":K()}],"mask-image-conic-to-color":[{"mask-conic-to":K()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:de()}],"mask-repeat":[{mask:le()}],"mask-size":[{mask:U()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",xe,ye]}],filter:[{filter:["","none",xe,ye]}],blur:[{blur:ze()}],brightness:[{brightness:[Fe,xe,ye]}],contrast:[{contrast:[Fe,xe,ye]}],"drop-shadow":[{"drop-shadow":["","none",P,Lu,Du]}],"drop-shadow-color":[{"drop-shadow":K()}],grayscale:[{grayscale:["",Fe,xe,ye]}],"hue-rotate":[{"hue-rotate":[Fe,xe,ye]}],invert:[{invert:["",Fe,xe,ye]}],saturate:[{saturate:[Fe,xe,ye]}],sepia:[{sepia:["",Fe,xe,ye]}],"backdrop-filter":[{"backdrop-filter":["","none",xe,ye]}],"backdrop-blur":[{"backdrop-blur":ze()}],"backdrop-brightness":[{"backdrop-brightness":[Fe,xe,ye]}],"backdrop-contrast":[{"backdrop-contrast":[Fe,xe,ye]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Fe,xe,ye]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Fe,xe,ye]}],"backdrop-invert":[{"backdrop-invert":["",Fe,xe,ye]}],"backdrop-opacity":[{"backdrop-opacity":[Fe,xe,ye]}],"backdrop-saturate":[{"backdrop-saturate":[Fe,xe,ye]}],"backdrop-sepia":[{"backdrop-sepia":["",Fe,xe,ye]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",xe,ye]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Fe,"initial",xe,ye]}],ease:[{ease:["linear","initial",z,xe,ye]}],delay:[{delay:[Fe,xe,ye]}],animate:[{animate:["none",$,xe,ye]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[N,xe,ye]}],"perspective-origin":[{"perspective-origin":oe()}],rotate:[{rotate:Qe()}],"rotate-x":[{"rotate-x":Qe()}],"rotate-y":[{"rotate-y":Qe()}],"rotate-z":[{"rotate-z":Qe()}],scale:[{scale:kt()}],"scale-x":[{"scale-x":kt()}],"scale-y":[{"scale-y":kt()}],"scale-z":[{"scale-z":kt()}],"scale-3d":["scale-3d"],skew:[{skew:en()}],"skew-x":[{"skew-x":en()}],"skew-y":[{"skew-y":en()}],transform:[{transform:[xe,ye,"","none","gpu","cpu"]}],"transform-origin":[{origin:oe()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:tn()}],"translate-x":[{"translate-x":tn()}],"translate-y":[{"translate-y":tn()}],"translate-z":[{"translate-z":tn()}],"translate-none":["translate-none"],accent:[{accent:K()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:K()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe,ye]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe,ye]}],fill:[{fill:["none",...K()]}],"stroke-w":[{stroke:[Fe,vl,Fi,Qf]}],stroke:[{stroke:["none",...K()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},cj=$P(lj);function us(...r){return cj(ub(r))}const uj=db("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function Bx({className:r,variant:e,size:t,asChild:s=!1,...a}){const l=s?lb:"button";return c.jsx(l,{"data-slot":"button",className:us(uj({variant:e,size:t,className:r})),...a})}function Mu({className:r,...e}){return c.jsx("div",{"data-slot":"card",className:us("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",r),...e})}function Vu({className:r,...e}){return c.jsx("div",{"data-slot":"card-header",className:us("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...e})}function Ou({className:r,...e}){return c.jsx("h4",{"data-slot":"card-title",className:us("leading-none",r),...e})}function Fu({className:r,...e}){return c.jsx("div",{"data-slot":"card-content",className:us("px-6 [&:last-child]:pb-6",r),...e})}const dj=db("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Ba({className:r,variant:e,asChild:t=!1,...s}){const a=t?lb:"span";return c.jsx(a,{"data-slot":"badge",className:us(dj({variant:e}),r),...s})}function wl({className:r,...e}){return c.jsx("div",{"data-slot":"skeleton",className:us("bg-accent animate-pulse rounded-md",r),...e})}var hj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],fj=hj.reduce((r,e)=>{const t=ob(`Primitive.${e}`),s=D.forwardRef((a,l)=>{const{asChild:d,...f}=a,p=d?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(p,{...f,ref:l})});return s.displayName=`Primitive.${e}`,{...r,[e]:s}},{}),mj="Separator",qx="horizontal",pj=["horizontal","vertical"],Eb=D.forwardRef((r,e)=>{const{decorative:t,orientation:s=qx,...a}=r,l=gj(s)?s:qx,f=t?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return c.jsx(fj.div,{"data-orientation":l,...f,...a,ref:e})});Eb.displayName=mj;function gj(r){return pj.includes(r)}var yj=Eb;function xj({className:r,orientation:e="horizontal",decorative:t=!0,...s}){return c.jsx(yj,{"data-slot":"separator-root",decorative:t,orientation:e,className:us("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",r),...s})}const vj=r=>{if(!r||r<=0)return"--";const e=Math.floor(r/3600),t=Math.floor(r%3600/60);return e>0?`${e}h ${t}m`:`${t}m`},Hx=r=>r?r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}):"--",Wx=r=>{switch(r){case"Morning":return c.jsx(Rd,{className:"w-3.5 h-3.5 text-amber-500"});case"Evening":return c.jsx(kv,{className:"w-3.5 h-3.5 text-orange-500"});case"Night":return c.jsx(Cd,{className:"w-3.5 h-3.5 text-indigo-500"});default:return null}},wj=r=>r===1?"1 Month":r===3?"3 Month (Quarterly)":r===6?"6 Month":`${r} Month`;function _j({memberId:r,onBack:e}){const{userData:t}=ir(),[s,a]=D.useState(null),[l,d]=D.useState([]),[f,p]=D.useState([]),[g,v]=D.useState(!0);D.useEffect(()=>{(async()=>{v(!0);try{const L=await gd(ut(be,"users",r));if(L.exists()){const N=L.data(),O=N.planDuration||(N.paymentMethod==="Quarterly"?3:N.paymentMethod==="6-Month"?6:1);a({displayName:N.displayName||null,email:N.email||null,enrollmentStatus:N.enrollmentStatus||"none",enrolledAt:Ge(N.enrolledAt),createdAt:Ge(N.createdAt)||new Date,planDuration:O,timeSlot:N.timeSlot||null,paymentMethod:N.paymentMethod||null,phoneNumber:N.phoneNumber||N.phone||N.userPhone||N.mobile||null})}try{const N=tt(Xe(be,"checkInHistory"),Ne("userId","==",r),Qi("checkOutTime","desc"),Gl(10)),O=await nt(N);d(O.docs.map(z=>{const $=z.data();return{id:z.id,date:$.date||"",checkInTime:Ge($.checkInTime)||new Date,checkOutTime:Ge($.checkOutTime)||new Date,duration:$.duration||0,timeSlot:$.timeSlot||null}}))}catch{const N=tt(Xe(be,"checkInHistory"),Ne("userId","==",r)),z=(await nt(N)).docs.map($=>{const Q=$.data();return{id:$.id,date:Q.date||"",checkInTime:Ge(Q.checkInTime)||new Date,checkOutTime:Ge(Q.checkOutTime)||new Date,duration:Q.duration||0,timeSlot:Q.timeSlot||null}});z.sort(($,Q)=>Q.checkOutTime.getTime()-$.checkOutTime.getTime()),d(z.slice(0,10))}if(t?.gymId)try{const N=tt(Xe(be,"enrollments"),Ne("userId","==",r),Ne("gymId","==",t.gymId),Qi("createdAt","desc"),Gl(10)),O=await nt(N);p(O.docs.map(z=>{const $=z.data();return{id:z.id,amount:$.amount||0,paymentMethod:$.paymentMethod||"--",status:$.status||"pending",transactionId:$.transactionId||null,createdAt:Ge($.createdAt)||new Date}}))}catch{const N=tt(Xe(be,"enrollments"),Ne("userId","==",r),Ne("gymId","==",t.gymId)),z=(await nt(N)).docs.map($=>{const Q=$.data();return{id:$.id,amount:Q.amount||0,paymentMethod:Q.paymentMethod||"--",status:Q.status||"pending",transactionId:Q.transactionId||null,createdAt:Ge(Q.createdAt)||new Date}});z.sort(($,Q)=>Q.createdAt.getTime()-$.createdAt.getTime()),p(z.slice(0,10))}}catch(L){console.error("Error fetching member detail:",L)}finally{v(!1)}})()},[r,t]);const b=s?.enrolledAt&&s.planDuration?(()=>{const P=new Date(s.enrolledAt);return P.setMonth(P.getMonth()+s.planDuration),P})():null,k=b?b.getTime()<Date.now():!1;return g?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(wl,{className:"h-10 w-10 rounded-lg"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wl,{className:"h-6 w-48"}),c.jsx(wl,{className:"h-4 w-32"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(wl,{className:"h-[300px] rounded-xl"}),c.jsx(wl,{className:"h-[300px] rounded-xl"})]})]}):s?c.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Bx,{variant:"outline",size:"icon",onClick:e,className:"h-9 w-9",children:c.jsx(nd,{className:"w-4 h-4"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:s.displayName||"N/A"}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:["Member since ",s.createdAt?.toLocaleDateString()||"N/A"]})]}),c.jsx(Ba,{variant:s.enrollmentStatus==="approved"?"default":s.enrollmentStatus==="pending"?"secondary":"destructive",className:"px-3 py-1 text-sm capitalize",children:s.enrollmentStatus})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs(Mu,{className:"lg:col-span-2",children:[c.jsx(Vu,{children:c.jsx(Ou,{className:"text-lg",children:"Profile Information"})}),c.jsxs(Fu,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border bg-card/50",children:[c.jsx("div",{className:"p-2 bg-muted rounded-full text-muted-foreground",children:c.jsx(Ad,{className:"w-5 h-5"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Email"}),c.jsx("p",{className:"text-sm font-medium mt-1",children:s.email||"N/A"})]})]}),c.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border bg-card/50",children:[c.jsx("div",{className:"p-2 bg-muted rounded-full text-muted-foreground",children:c.jsx(Dm,{className:"w-5 h-5"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Phone"}),c.jsx("p",{className:"text-sm font-medium mt-1",children:s.phoneNumber||"N/A"})]})]}),c.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border bg-card/50",children:[c.jsx("div",{className:"p-2 bg-muted rounded-full text-muted-foreground",children:c.jsx(Xl,{className:"w-5 h-5"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Time Slot"}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Wx(s.timeSlot),c.jsx("p",{className:"text-sm font-medium",children:s.timeSlot||"Not assigned"})]})]})]}),c.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border bg-card/50",children:[c.jsx("div",{className:"p-2 bg-muted rounded-full text-muted-foreground",children:c.jsx(Hu,{className:"w-5 h-5"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Current Plan"}),c.jsx("p",{className:"text-sm font-medium mt-1",children:wj(s.planDuration)})]})]})]})]}),c.jsxs(Mu,{children:[c.jsx(Vu,{children:c.jsx(Ou,{className:"text-lg",children:"Membership Status"})}),c.jsxs(Fu,{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),c.jsx(Ba,{variant:k?"destructive":"outline",className:us("capitalize",k&&"bg-destructive/10 text-destructive border-destructive/20 hover:bg-destructive/20"),children:k?"Expired":"Active"})]}),c.jsx(xj,{}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Enrolled At"}),c.jsx("p",{className:"text-sm font-medium",children:s.enrolledAt?.toLocaleDateString()||"--"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Expiry Date"}),c.jsx("p",{className:`text-sm font-medium ${k?"text-destructive":""}`,children:b?b.toLocaleDateString():"--"})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs(Mu,{children:[c.jsx(Vu,{children:c.jsxs(Ou,{className:"text-lg flex items-center justify-between",children:["Recent Attendance",c.jsx(Ba,{variant:"secondary",className:"rounded-full px-2.5",children:l.length})]})}),c.jsx(Fu,{children:l.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center text-muted-foreground",children:[c.jsx(yv,{className:"w-8 h-8 opacity-20 mb-2"}),c.jsx("p",{className:"text-sm",children:"No attendance records found"})]}):c.jsx("div",{className:"space-y-1",children:l.map(P=>c.jsxs("div",{className:"group flex items-center justify-between p-3 hover:bg-muted/50 rounded-lg transition-colors border-b last:border-0 border-border/50",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium",children:P.date}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5",children:[c.jsxs("span",{children:[Hx(P.checkInTime)," - ",Hx(P.checkOutTime)]}),P.timeSlot&&c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsxs("span",{className:"flex items-center gap-1",children:[Wx(P.timeSlot),P.timeSlot]})]})]})]}),c.jsx(Ba,{variant:"outline",className:"font-normal font-mono text-xs",children:vj(P.duration)})]},P.id))})})]}),c.jsxs(Mu,{children:[c.jsx(Vu,{children:c.jsxs(Ou,{className:"text-lg flex items-center justify-between",children:["Payment History",c.jsx(Ba,{variant:"secondary",className:"rounded-full px-2.5",children:f.length})]})}),c.jsx(Fu,{children:f.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center text-muted-foreground",children:[c.jsx(Hu,{className:"w-8 h-8 opacity-20 mb-2"}),c.jsx("p",{className:"text-sm",children:"No payment records found"})]}):c.jsx("div",{className:"space-y-1",children:f.map(P=>c.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-muted/50 rounded-lg transition-colors border-b last:border-0 border-border/50",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"p-2 bg-muted rounded-lg text-muted-foreground mt-1",children:c.jsx(Hu,{className:"w-4 h-4"})}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm font-bold",children:["",P.amount]}),c.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:P.paymentMethod}),c.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:P.createdAt.toLocaleDateString()})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx(Ba,{variant:P.status==="approved"?"default":P.status==="pending"?"secondary":"destructive",className:"capitalize mb-1",children:P.status}),P.transactionId&&c.jsxs("p",{className:"text-[10px] text-muted-foreground font-mono uppercase tracking-wider",children:["#",P.transactionId.slice(0,8)]})]})]},P.id))})})]})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsx(Bx,{variant:"ghost",size:"icon",onClick:e,children:c.jsx(nd,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:c.jsx("p",{className:"text-muted-foreground",children:"Member not found"})})]})}function bj({onBack:r}){return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:r,className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:c.jsx(nd,{className:"w-5 h-5"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Add New Member"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Fill in the details to create a new member"})]})]}),c.jsx("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-6",children:c.jsxs("form",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Personal Information"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name *"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter full name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email *"}),c.jsx("input",{type:"email",className:"w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"email@example.com"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone *"}),c.jsx("input",{type:"tel",className:"w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"(555) 123-4567"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date of Birth"}),c.jsx("input",{type:"date",className:"w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Goals & Stats (Optional)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fitness Goals"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Weight loss, Muscle gain"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Health Notes"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Any medical conditions or injuries"})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Membership Details"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Membership Type *"}),c.jsxs("select",{className:"w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"Select membership type"}),c.jsx("option",{value:"basic",children:"Basic - $100/month"}),c.jsx("option",{value:"premium",children:"Premium - $150/month"}),c.jsx("option",{value:"vip",children:"VIP - $200/month"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Date *"}),c.jsx("input",{type:"date",className:"w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Expiry Date *"}),c.jsx("input",{type:"date",className:"w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Duration"}),c.jsxs("select",{className:"w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"1",children:"1 Month"}),c.jsx("option",{value:"3",children:"3 Months"}),c.jsx("option",{value:"6",children:"6 Months"}),c.jsx("option",{value:"12",children:"12 Months"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Initial Payment"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount"}),c.jsx("input",{type:"number",className:"w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Method"}),c.jsxs("select",{className:"w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"cash",children:"Cash"}),c.jsx("option",{value:"card",children:"Card"}),c.jsx("option",{value:"online",children:"Online Transfer"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Status"}),c.jsxs("select",{className:"w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"completed",children:"Completed"}),c.jsx("option",{value:"pending",children:"Pending"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Notes"}),c.jsx("textarea",{rows:4,className:"w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Any additional information about the member..."})]}),c.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-800",children:[c.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-200 dark:border-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg font-medium text-sm transition-colors",children:"Cancel"}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium text-sm transition-colors",children:"Add Member"})]})]})})]})}const Uu=r=>r===1?"1 Month":r===3?"3 Months":r===6?"6 Months":r===12?"12 Months":`${r} Month`;function kj(){const{userData:r,user:e}=ir(),[t,s]=D.useState([]),[a,l]=D.useState(!0),[d,f]=D.useState(null),[p,g]=D.useState("all"),v=async()=>{if(r?.gymId)try{l(!0);const N=tt(Xe(be,"planChangeRequests"),Ne("gymId","==",r.gymId)),z=(await nt(N)).docs.map($=>{const Q=$.data();return{id:$.id,userId:Q.userId||"",gymId:Q.gymId||null,currentDuration:Q.currentDuration||1,requestedDuration:Q.requestedDuration||1,status:Q.status||"pending",createdAt:Ge(Q.createdAt)||new Date,reviewedAt:Ge(Q.reviewedAt),reviewedBy:Q.reviewedBy||null,userName:Q.userName||null,userEmail:Q.userEmail||null,gymName:Q.gymName||null}});z.sort(($,Q)=>$.status==="pending"&&Q.status!=="pending"?-1:Q.status==="pending"&&$.status!=="pending"?1:Q.createdAt.getTime()-$.createdAt.getTime()),s(z)}catch(N){console.error("Error fetching plan change requests:",N)}finally{l(!1)}};D.useEffect(()=>{v()},[r]);const b=async N=>{if(confirm(`Approve plan change for ${N.userName||N.userId}?

${Uu(N.currentDuration)}  ${Uu(N.requestedDuration)}`)){f(N.id);try{await qt(ut(be,"planChangeRequests",N.id),{status:"approved",reviewedAt:Vr(),reviewedBy:e?.uid||null}),await qt(ut(be,"users",N.userId),{planDuration:N.requestedDuration,enrolledAt:Vr()}),await v(),alert("Plan change approved! Member's plan has been updated.")}catch(O){console.error("Error approving plan change:",O),alert("Failed to approve plan change")}finally{f(null)}}},k=async N=>{if(confirm(`Reject plan change request from ${N.userName||N.userId}?`)){f(N.id);try{await qt(ut(be,"planChangeRequests",N.id),{status:"rejected",reviewedAt:Vr(),reviewedBy:e?.uid||null}),await v(),alert("Plan change rejected.")}catch(O){console.error("Error rejecting plan change:",O),alert("Failed to reject plan change")}finally{f(null)}}},P=p==="all"?t:t.filter(N=>N.status===p),L=t.filter(N=>N.status==="pending").length;return c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg overflow-hidden",children:[c.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-800 flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(T1,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Plan Change Requests"}),L>0&&c.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded-full text-xs font-medium",children:[L," pending"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{value:p,onChange:N=>g(N.target.value),className:"px-3 py-1.5 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-xs text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsxs("option",{value:"all",children:["All (",t.length,")"]}),c.jsxs("option",{value:"pending",children:["Pending (",L,")"]}),c.jsx("option",{value:"approved",children:"Approved"}),c.jsx("option",{value:"rejected",children:"Rejected"})]}),c.jsx("button",{onClick:v,className:"p-1.5 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition-colors",children:c.jsx(Mm,{className:"w-3.5 h-3.5"})})]})]}),a?c.jsx("div",{className:"p-8 flex justify-center",children:c.jsx("div",{className:"w-6 h-6 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"})}):P.length===0?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx(Xl,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),c.jsx("p",{className:"text-sm text-gray-500",children:"No plan change requests"})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Member"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Current Plan"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Requested Plan"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Date"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Status"}),c.jsx("th",{className:"text-right py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:P.map(N=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/30",children:[c.jsxs("td",{className:"py-3 px-5",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N.userName||"Unknown"}),N.userEmail&&c.jsx("p",{className:"text-xs text-gray-500",children:N.userEmail})]}),c.jsx("td",{className:"py-3 px-5",children:c.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400 rounded text-xs font-medium",children:Uu(N.currentDuration)})}),c.jsx("td",{className:"py-3 px-5",children:c.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 rounded text-xs font-medium",children:Uu(N.requestedDuration)})}),c.jsx("td",{className:"py-3 px-5 text-sm text-gray-600 dark:text-gray-400",children:N.createdAt.toLocaleDateString()}),c.jsx("td",{className:"py-3 px-5",children:c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize ${N.status==="pending"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":N.status==="approved"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:N.status})}),c.jsx("td",{className:"py-3 px-5",children:c.jsx("div",{className:"flex items-center justify-end gap-2",children:N.status==="pending"?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>b(N),disabled:d===N.id,className:"p-1.5 text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 rounded transition-colors disabled:opacity-50",title:"Approve",children:c.jsx(kn,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>k(N),disabled:d===N.id,className:"p-1.5 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors disabled:opacity-50",title:"Reject",children:c.jsx(Sd,{className:"w-4 h-4"})})]}):c.jsx("span",{className:"text-xs text-gray-400",children:N.reviewedAt?`Reviewed ${N.reviewedAt.toLocaleDateString()}`:"--"})})})]},N.id))})]})})]})}const Ej=r=>{const e=r.planDuration||1;return e===1?"1 Month":e===3?"3 Month":e===6?"6 Month":`${e} Month`},Pp=r=>{if(r.enrollmentStatus!=="approved"||!r.enrolledAt)return null;const e=r.enrolledAt instanceof Date?r.enrolledAt:Ge(r.enrolledAt);if(!e)return null;const t=new Date(e);return t.setMonth(t.getMonth()+(r.planDuration||1)),t},Gx=r=>{const e=Pp(r);if(!e)return!1;const t=(e.getTime()-Date.now())/(1e3*60*60*24);return t>=0&&t<=7},Yf=r=>{const e=Pp(r);return e?e.getTime()<Date.now():!1};function Tj(){const{userData:r,user:e}=ir(),[t,s]=D.useState(""),[a,l]=D.useState("all"),[d,f]=D.useState(null),[p,g]=D.useState(!1),[v,b]=D.useState([]),[k,P]=D.useState(!0),[L,N]=D.useState(null),O=async()=>{if(r?.gymId)try{P(!0);const Y=tt(Xe(be,"users"),Ne("gymId","==",r.gymId),Ne("role","==","member")),E=(await nt(Y)).docs.map(R=>{const C=R.data(),S=C.planDuration||(C.paymentMethod==="Quarterly"?3:C.paymentMethod==="6-Month"?6:1);return{...C,uid:R.id,enrolledAt:Ge(C.enrolledAt),createdAt:Ge(C.createdAt)||new Date,planDuration:S,timeSlot:C.timeSlot||null,phoneNumber:C.phoneNumber||C.phone||C.userPhone||C.mobile||null}});b(E)}catch(Y){console.error("Error fetching members:",Y)}finally{P(!1)}};D.useEffect(()=>{O()},[r]);const z=async Y=>{if(!r?.gymId){alert("Error: Gym ID not found.");return}if(confirm(`Approve membership for ${Y.displayName}?`)){N(Y.uid);try{await qt(ut(be,"users",Y.uid),{enrollmentStatus:"approved",enrolledAt:Vr(),gymId:r.gymId});const I=tt(Xe(be,"enrollments"),Ne("userId","==",Y.uid),Ne("gymId","==",r.gymId),Ne("status","==","pending")),E=await nt(I);E.empty||await qt(ut(be,"enrollments",E.docs[0].id),{status:"approved",verifiedAt:Vr(),verifiedBy:e?.uid||null}),await O(),alert("Member approved successfully!")}catch(I){console.error("Error approving member:",I),alert(`Failed to approve member: ${I instanceof Error?I.message:"Unknown error"}`)}finally{N(null)}}},$=async Y=>{if(!r?.gymId){alert("Error: Gym ID not found.");return}if(confirm(`Set ${Y.displayName}'s membership to pending?`)){N(Y.uid);try{await qt(ut(be,"users",Y.uid),{enrollmentStatus:"pending",enrolledAt:null});const I=tt(Xe(be,"enrollments"),Ne("userId","==",Y.uid),Ne("gymId","==",r.gymId)),E=await nt(I);E.empty||await qt(ut(be,"enrollments",E.docs[0].id),{status:"pending",verifiedAt:null,verifiedBy:null}),await O(),alert("Member status set to pending")}catch(I){console.error("Error:",I),alert(`Failed: ${I instanceof Error?I.message:"Unknown error"}`)}finally{N(null)}}},Q=async Y=>{if(!r?.gymId){alert("Error: Gym ID not found.");return}if(confirm(`Reject membership for ${Y.displayName}?`)){N(Y.uid);try{const I=tt(Xe(be,"enrollments"),Ne("userId","==",Y.uid),Ne("gymId","==",r.gymId),Ne("status","==","pending")),R=(await nt(I)).docs.find(C=>C.data().status==="pending");R&&await qt(ut(be,"enrollments",R.id),{status:"rejected",verifiedAt:Vr(),verifiedBy:e?.uid||null}),await qt(ut(be,"users",Y.uid),{enrollmentStatus:"rejected",gymId:null}),await O(),alert("Member rejected successfully")}catch(I){console.error("Error:",I),alert(`Failed: ${I instanceof Error?I.message:"Unknown error"}`)}finally{N(null)}}},fe=async Y=>{if(confirm(`Are you sure you want to delete ${Y.displayName}? This action cannot be undone.`)){N(Y.uid);try{await b_(ut(be,"users",Y.uid)),await O(),alert("Member deleted successfully")}catch(I){console.error("Error deleting member:",I),alert("Failed to delete member")}finally{N(null)}}},oe=v.filter(Y=>{const I=(Y.displayName?.toLowerCase()||"").includes(t.toLowerCase())||(Y.email?.toLowerCase()||"").includes(t.toLowerCase())||(Y.phoneNumber||"").includes(t),E=a==="all"||a==="active"&&Y.enrollmentStatus==="approved"&&!Yf(Y)||a==="inactive"&&(Y.enrollmentStatus==="rejected"||Yf(Y))||a==="pending"&&Y.enrollmentStatus==="pending"||a==="expiring"&&Gx(Y)||a==="recent"&&Y.createdAt&&Date.now()-Y.createdAt.getTime()<10080*60*1e3;return I&&E});return d?c.jsx(_j,{memberId:d,onBack:()=>f(null)}):p?c.jsx(bj,{onBack:()=>g(!1)}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Members"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Manage your gym members"})]}),c.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium text-sm transition-colors",children:[c.jsx(Lm,{className:"w-4 h-4"}),"Add Member"]})]}),c.jsx("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-4",children:c.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(bv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",placeholder:"Search by name or email...",value:t,onChange:Y=>s(Y.target.value),className:"w-full pl-9 pr-4 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(wv,{className:"w-4 h-4 text-gray-400"}),c.jsxs("select",{value:a,onChange:Y=>l(Y.target.value),className:"px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsxs("option",{value:"all",children:["All Members (",v.length,")"]}),c.jsx("option",{value:"active",children:"Active"}),c.jsx("option",{value:"pending",children:"Pending Requests"}),c.jsx("option",{value:"expiring",children:"Expiring Soon"}),c.jsx("option",{value:"inactive",children:"Inactive / Expired"}),c.jsx("option",{value:"recent",children:"Recently Added"})]})]})]})}),c.jsx("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg overflow-hidden",children:k?c.jsx("div",{className:"p-12 flex justify-center items-center",children:c.jsx("div",{className:"w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Name"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Contact"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Plan"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Time Slot"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Expiry"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Status"}),c.jsx("th",{className:"text-right py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:oe.map(Y=>{const I=Pp(Y),E=Yf(Y),R=Gx(Y);return c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/30",children:[c.jsx("td",{className:"py-3 px-5",children:c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Y.displayName||"N/A"})}),c.jsxs("td",{className:"py-3 px-5",children:[c.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:Y.email}),Y.phoneNumber&&c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:Y.phoneNumber})]}),c.jsx("td",{className:"py-3 px-5",children:c.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 rounded text-xs font-medium",children:Ej(Y)})}),c.jsx("td",{className:"py-3 px-5 text-sm text-gray-900 dark:text-white",children:Y.timeSlot||"--"}),c.jsx("td",{className:"py-3 px-5",children:I?c.jsxs("span",{className:`text-sm font-medium ${E?"text-red-600 dark:text-red-400":R?"text-amber-600 dark:text-amber-400":"text-gray-900 dark:text-white"}`,children:[I.toLocaleDateString(),E&&c.jsx("span",{className:"text-xs ml-1",children:"(Expired)"}),R&&!E&&c.jsx("span",{className:"text-xs ml-1",children:"(Soon)"})]}):c.jsx("span",{className:"text-sm text-gray-400",children:"--"})}),c.jsx("td",{className:"py-3 px-5",children:c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize ${E?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":Y.enrollmentStatus==="approved"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":Y.enrollmentStatus==="pending"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:E?"expired":Y.enrollmentStatus})}),c.jsx("td",{className:"py-3 px-5",children:c.jsx("div",{className:"flex items-center justify-end gap-2",children:Y.enrollmentStatus==="pending"?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>z(Y),disabled:L===Y.uid,className:"p-1.5 text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 rounded transition-colors",title:"Approve",children:c.jsx(kn,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>Q(Y),disabled:L===Y.uid,className:"p-1.5 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors",title:"Reject",children:c.jsx(Sd,{className:"w-4 h-4"})})]}):c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>f(Y.uid),className:"p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded transition-colors",title:"View",children:c.jsx(vv,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>$(Y),disabled:L===Y.uid,className:"p-1.5 text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded transition-colors",title:"Set to Pending",children:c.jsx(Xl,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>fe(Y),disabled:L===Y.uid,className:"p-1.5 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors",title:"Delete",children:c.jsx(Ev,{className:"w-4 h-4"})})]})})})]},Y.uid)})})]})})}),c.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:c.jsxs("p",{children:["Showing ",oe.length," of ",v.length," members"]})}),c.jsx(kj,{})]})}function Ij(){const{userData:r}=ir(),[e,t]=D.useState(""),[s,a]=D.useState("all"),[l,d]=D.useState("all"),[f,p]=D.useState([]),[g,v]=D.useState(!0),[b,k]=D.useState(null);D.useEffect(()=>{(async()=>{if(r?.gymId)try{v(!0),k(null);let $=[];try{const Q=tt(Xe(be,"enrollments"),Ne("gymId","==",r.gymId),Qi("createdAt","desc"));$=(await nt(Q)).docs.map(oe=>({...oe.data(),id:oe.id,createdAt:Ge(oe.data().createdAt)||new Date}))}catch{const Q=tt(Xe(be,"enrollments"),Ne("gymId","==",r.gymId));$=(await nt(Q)).docs.map(oe=>({...oe.data(),id:oe.id,createdAt:Ge(oe.data().createdAt)||new Date})),$.sort((oe,Y)=>Y.createdAt.getTime()-oe.createdAt.getTime())}p($)}catch{k("Failed to load payments data. Please check your connection.")}finally{v(!1)}})()},[r]);const P=f.filter(z=>{const $=z.userName.toLowerCase().includes(e.toLowerCase())||z.transactionId&&z.transactionId.toLowerCase().includes(e.toLowerCase()),Q=s==="all"||z.paymentMethod.toLowerCase()===s,fe=l==="all"||z.status===l;return $&&Q&&fe}),L=P.filter(z=>z.status==="approved").reduce((z,$)=>z+$.amount,0),N=P.filter(z=>z.status==="pending").reduce((z,$)=>z+$.amount,0),O=()=>{const z=[["Date","Member","Amount","Method","Status","Transaction ID"].join(","),...P.map(oe=>[oe.createdAt instanceof Date?oe.createdAt.toLocaleDateString():"",`"${oe.userName}"`,oe.amount,oe.paymentMethod,oe.status,oe.transactionId||""].join(","))].join(`
`),$=new Blob([z],{type:"text/csv"}),Q=URL.createObjectURL($),fe=document.createElement("a");fe.href=Q,fe.download=`payments_${new Date().toISOString().split("T")[0]}.csv`,fe.click(),URL.revokeObjectURL(Q)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Payments"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Track and manage all transactions"})]}),c.jsx("div",{className:"flex items-center gap-3",children:c.jsxs("button",{onClick:O,className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-200 dark:border-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg font-medium text-sm transition-colors",children:[c.jsx(xv,{className:"w-4 h-4"}),"Export"]})})]}),b&&c.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx(Pd,{className:"h-5 w-5 text-red-400 flex-shrink-0"}),c.jsx("p",{className:"ml-3 text-sm text-red-700 dark:text-red-200",children:b})]})}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5",children:[c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Total Revenue"}),c.jsxs("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:["",L.toLocaleString()]}),c.jsxs("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 font-medium",children:[P.filter(z=>z.status==="approved").length," completed payments"]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5",children:[c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Pending Payments"}),c.jsxs("p",{className:"text-2xl font-semibold text-orange-600 dark:text-orange-400 mb-2",children:["",N.toLocaleString()]}),c.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:[P.filter(z=>z.status==="pending").length," pending"]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5",children:[c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Total Transactions"}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:P.length}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"In selected period"})]})]}),c.jsx("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-4",children:c.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(bv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",placeholder:"Search by member name or transaction ID...",value:e,onChange:z=>t(z.target.value),className:"w-full pl-9 pr-4 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(wv,{className:"w-4 h-4 text-gray-400"}),c.jsxs("select",{value:s,onChange:z=>a(z.target.value),className:"px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Methods"}),c.jsx("option",{value:"online",children:"Online"}),c.jsx("option",{value:"offline",children:"Offline"})]}),c.jsxs("select",{value:l,onChange:z=>d(z.target.value),className:"px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Status"}),c.jsx("option",{value:"approved",children:"Completed"}),c.jsx("option",{value:"pending",children:"Pending"}),c.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})}),c.jsx("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Date & Time"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Member"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Amount"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Method"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Status"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Reference"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:g?c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"py-8 text-center text-gray-500",children:"Loading payments..."})}):P.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"py-8 text-center text-gray-500",children:"No records found"})}):P.map(z=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/30",children:[c.jsxs("td",{className:"py-3 px-5",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:z.createdAt instanceof Date?z.createdAt.toLocaleDateString():"N/A"}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:z.createdAt instanceof Date?z.createdAt.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),c.jsx("td",{className:"py-3 px-5 text-sm font-medium text-gray-900 dark:text-white",children:z.userName}),c.jsxs("td",{className:"py-3 px-5 text-sm font-semibold text-gray-900 dark:text-white",children:["",z.amount]}),c.jsx("td",{className:"py-3 px-5",children:c.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400 rounded text-xs font-medium uppercase",children:z.paymentMethod})}),c.jsx("td",{className:"py-3 px-5",children:c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize ${z.status==="approved"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":z.status==="pending"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:z.status})}),c.jsx("td",{className:"py-3 px-5 text-sm text-gray-600 dark:text-gray-400",children:z.transactionId||"--"})]},z.id))})]})})}),c.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:c.jsxs("p",{children:["Showing ",P.length," of ",f.length," payments"]})})]})}const zu=r=>{if(!r||r<=0)return"--";const e=Math.floor(r/3600),t=Math.floor(r%3600/60);return e>0?`${e}h ${t}m`:`${t}m`},_l=r=>r?r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}):"--",Jf=r=>{switch(r){case"Morning":return c.jsx(Rd,{className:"w-3.5 h-3.5 text-amber-500"});case"Evening":return c.jsx(kv,{className:"w-3.5 h-3.5 text-orange-500"});case"Night":return c.jsx(Cd,{className:"w-3.5 h-3.5 text-indigo-500"});default:return null}};function Nj({darkMode:r}){const{userData:e}=ir(),[t,s]=D.useState("today"),[a,l]=D.useState([]),[d,f]=D.useState([]),[p,g]=D.useState([]),[v,b]=D.useState(!0),[k,P]=D.useState(""),[L,N]=D.useState(""),[O,z]=D.useState(!1),$=async()=>{if(e?.gymId)try{const C=tt(Xe(be,"activeCheckIns"),Ne("gymId","==",e.gymId)),M=(await nt(C)).docs.map(A=>{const ie=A.data();return{id:A.id,userId:ie.userId||A.id,userName:ie.userName||"Unknown",gymId:ie.gymId||"",gymName:ie.gymName||"",timeSlot:ie.timeSlot||null,checkInTime:Ge(ie.checkInTime)||new Date}});M.sort((A,ie)=>ie.checkInTime.getTime()-A.checkInTime.getTime()),l(M)}catch(C){console.error("Error fetching active check-ins:",C)}},Q=async()=>{if(e?.gymId)try{const C=new Date().toISOString().split("T")[0],S=tt(Xe(be,"checkInHistory"),Ne("gymId","==",e.gymId),Ne("date","==",C)),A=(await nt(S)).docs.map(ie=>{const we=ie.data();return{id:ie.id,userId:we.userId||"",userName:we.userName||"Unknown",userEmail:we.userEmail||"",gymId:we.gymId||"",gymName:we.gymName||"",timeSlot:we.timeSlot||null,date:we.date||C,checkInTime:Ge(we.checkInTime)||new Date,checkOutTime:Ge(we.checkOutTime)||new Date,duration:we.duration||0}});A.sort((ie,we)=>we.checkOutTime.getTime()-ie.checkOutTime.getTime()),f(A)}catch(C){console.error("Error fetching completed today:",C)}},fe=async()=>{if(e?.gymId)try{let C=[];try{const S=tt(Xe(be,"checkInHistory"),Ne("gymId","==",e.gymId),Qi("checkOutTime","desc"),Gl(200));C=(await nt(S)).docs.map(A=>{const ie=A.data();return{id:A.id,userId:ie.userId||"",userName:ie.userName||"Unknown",userEmail:ie.userEmail||"",gymId:ie.gymId||"",gymName:ie.gymName||"",timeSlot:ie.timeSlot||null,date:ie.date||"",checkInTime:Ge(ie.checkInTime)||new Date,checkOutTime:Ge(ie.checkOutTime)||new Date,duration:ie.duration||0}})}catch{const S=tt(Xe(be,"checkInHistory"),Ne("gymId","==",e.gymId));C=(await nt(S)).docs.map(A=>{const ie=A.data();return{id:A.id,userId:ie.userId||"",userName:ie.userName||"Unknown",userEmail:ie.userEmail||"",gymId:ie.gymId||"",gymName:ie.gymName||"",timeSlot:ie.timeSlot||null,date:ie.date||"",checkInTime:Ge(ie.checkInTime)||new Date,checkOutTime:Ge(ie.checkOutTime)||new Date,duration:ie.duration||0}}),C.sort((A,ie)=>ie.checkOutTime.getTime()-A.checkOutTime.getTime())}k&&(C=C.filter(S=>S.date>=k)),L&&(C=C.filter(S=>S.date<=L)),g(C)}catch(C){console.error("Error fetching history:",C)}},oe=async()=>{b(!0),await $(),await Q(),t==="history"&&await fe(),b(!1)};D.useEffect(()=>{oe()},[e,t]),D.useEffect(()=>{t==="history"&&fe()},[k,L]);const Y=async()=>{z(!0),await oe(),z(!1)},I=C=>{const S=Math.round((Date.now()-C.getTime())/1e3);return zu(S)},E=a.length+d.length,R=d.length>0?Math.round(d.reduce((C,S)=>C+(S.duration||0),0)/d.length):0;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Attendance"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Real-time check-ins from the member app"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-1",children:[c.jsx("button",{onClick:()=>s("today"),className:`px-4 py-1.5 rounded text-sm font-medium transition-colors ${t==="today"?"bg-blue-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:"Today"}),c.jsx("button",{onClick:()=>s("history"),className:`px-4 py-1.5 rounded text-sm font-medium transition-colors ${t==="history"?"bg-blue-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:"History"})]}),c.jsxs("button",{onClick:Y,disabled:O,className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-200 dark:border-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg font-medium text-sm transition-colors disabled:opacity-50",children:[c.jsx(Mm,{className:`w-4 h-4 ${O?"animate-spin":""}`}),"Refresh"]})]})]}),v?c.jsx("div",{className:"flex justify-center py-12",children:c.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):t==="today"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5",children:[c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Currently In Gym"}),c.jsx("p",{className:"text-2xl font-semibold text-emerald-600 dark:text-emerald-400 mb-2",children:a.length}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[a.length>0&&c.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),c.jsx("span",{className:"text-xs font-medium text-emerald-600 dark:text-emerald-400",children:a.length>0?"Active Now":"No one"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5",children:[c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Checked Out Today"}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:d.length}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Completed visits"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5",children:[c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Total Check-ins"}),c.jsx("p",{className:"text-2xl font-semibold text-blue-600 dark:text-blue-400 mb-2",children:E}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Today's total"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5",children:[c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Avg. Duration"}),c.jsx("p",{className:"text-2xl font-semibold text-purple-600 dark:text-purple-400 mb-2",children:zu(R)}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Completed visits"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg overflow-hidden",children:[c.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-800 flex items-center justify-between",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Currently In Gym"}),c.jsxs("span",{className:"px-2 py-1 bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 rounded text-xs font-medium",children:[a.length," Active"]})]}),a.length===0?c.jsxs("div",{className:"p-12 text-center",children:[c.jsx(Bi,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No one is currently checked in"})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Member"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Check-in Time"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Time Slot"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Duration"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Status"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:a.map(C=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/30",children:[c.jsx("td",{className:"py-3 px-5",children:c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C.userName})}),c.jsx("td",{className:"py-3 px-5 text-sm text-gray-900 dark:text-white",children:_l(C.checkInTime)}),c.jsx("td",{className:"py-3 px-5",children:C.timeSlot?c.jsxs("div",{className:"flex items-center gap-1.5",children:[Jf(C.timeSlot),c.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:C.timeSlot})]}):c.jsx("span",{className:"text-sm text-gray-400",children:"--"})}),c.jsx("td",{className:"py-3 px-5 text-sm font-medium text-emerald-600 dark:text-emerald-400",children:I(C.checkInTime)}),c.jsx("td",{className:"py-3 px-5",children:c.jsxs("span",{className:"inline-flex items-center gap-1.5 text-emerald-600 dark:text-emerald-400",children:[c.jsx(Tv,{className:"w-3.5 h-3.5"}),c.jsx("span",{className:"text-xs font-medium",children:"In Gym"})]})})]},C.id))})]})})]}),d.length>0&&c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg overflow-hidden",children:[c.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-800 flex items-center justify-between",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Checked Out Today"}),c.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400 rounded text-xs font-medium",children:[d.length," Completed"]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Member"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Check-in"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Check-out"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Duration"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Time Slot"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:d.map(C=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/30",children:[c.jsxs("td",{className:"py-3 px-5",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C.userName}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:C.userEmail})]}),c.jsx("td",{className:"py-3 px-5 text-sm text-gray-900 dark:text-white",children:_l(C.checkInTime)}),c.jsx("td",{className:"py-3 px-5 text-sm text-gray-900 dark:text-white",children:_l(C.checkOutTime)}),c.jsx("td",{className:"py-3 px-5 text-sm font-medium text-gray-900 dark:text-white",children:zu(C.duration)}),c.jsx("td",{className:"py-3 px-5",children:C.timeSlot?c.jsxs("div",{className:"flex items-center gap-1.5",children:[Jf(C.timeSlot),c.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:C.timeSlot})]}):c.jsx("span",{className:"text-xs text-gray-400",children:"--"})})]},C.id))})]})})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-4",children:c.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date Range"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"date",value:k,onChange:C=>P(C.target.value),className:"flex-1 px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),c.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"to"}),c.jsx("input",{type:"date",value:L,onChange:C=>N(C.target.value),className:"flex-1 px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})})}),c.jsx("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg overflow-hidden",children:p.length===0?c.jsxs("div",{className:"p-12 text-center",children:[c.jsx(Xl,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No attendance records found"})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Date"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Member"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Check-in"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Check-out"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Duration"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Time Slot"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:p.map(C=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/30",children:[c.jsx("td",{className:"py-3 px-5 text-sm font-medium text-gray-900 dark:text-white",children:C.date}),c.jsxs("td",{className:"py-3 px-5",children:[c.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:C.userName}),c.jsx("p",{className:"text-xs text-gray-500",children:C.userEmail})]}),c.jsx("td",{className:"py-3 px-5 text-sm text-gray-900 dark:text-white",children:_l(C.checkInTime)}),c.jsx("td",{className:"py-3 px-5 text-sm text-gray-900 dark:text-white",children:_l(C.checkOutTime)}),c.jsx("td",{className:"py-3 px-5 text-sm font-medium text-gray-900 dark:text-white",children:zu(C.duration)}),c.jsx("td",{className:"py-3 px-5",children:C.timeSlot?c.jsxs("div",{className:"flex items-center gap-1.5",children:[Jf(C.timeSlot),c.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:C.timeSlot})]}):c.jsx("span",{className:"text-xs text-gray-400",children:"--"})})]},C.id))})]})})}),c.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:c.jsxs("p",{children:["Showing ",p.length," records"]})})]})]})}function Sj(){const{userData:r}=ir(),[e,t]=D.useState({totalRevenue:0,totalMembers:0,approvedEnrollments:0,pendingEnrollments:0}),[s,a]=D.useState([]),[l,d]=D.useState(!0);D.useEffect(()=>{(async()=>{if(r?.gymId)try{d(!0);const g=tt(Xe(be,"enrollments"),Ne("gymId","==",r.gymId)),b=(await nt(g)).docs.map(z=>({...z.data(),id:z.id,createdAt:z.data().createdAt?.toDate?z.data().createdAt.toDate():z.data().createdAt}));a(b);const k=b.filter(z=>z.status==="approved"),P=b.filter(z=>z.status==="pending"),L=k.reduce((z,$)=>z+$.amount,0),N=tt(Xe(be,"users"),Ne("gymId","==",r.gymId),Ne("role","==","member"),Ne("enrollmentStatus","==","approved")),O=await nt(N);t({totalRevenue:L,totalMembers:O.size,approvedEnrollments:k.length,pendingEnrollments:P.length})}catch(g){console.error("Error fetching reports data:",g)}finally{d(!1)}})()},[r]);const f=()=>{const p=[["Date","Member","Email","Amount","Payment Method","Status"].join(","),...s.map(k=>[k.createdAt instanceof Date?k.createdAt.toLocaleDateString():"N/A",k.userName,k.userEmail,k.amount,k.paymentMethod,k.status].join(","))].join(`
`),g=new Blob([p],{type:"text/csv"}),v=window.URL.createObjectURL(g),b=document.createElement("a");b.href=v,b.download=`payments-${new Date().toISOString().split("T")[0]}.csv`,b.click()};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Reports"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Analytics and insights"})]}),c.jsx("div",{className:"flex items-center gap-3",children:c.jsxs("button",{onClick:f,className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-200 dark:border-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg font-medium text-sm transition-colors",children:[c.jsx(xv,{className:"w-4 h-4"}),"Export Payments"]})})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5",children:[c.jsx("div",{className:"flex items-start justify-between mb-3",children:c.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg",children:c.jsx(to,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})})}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-1",children:l?"...":`${e.totalRevenue}`}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Revenue"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5",children:[c.jsx("div",{className:"flex items-start justify-between mb-3",children:c.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:c.jsx(Bi,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})})}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-1",children:l?"...":e.totalMembers}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Active Members"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5",children:[c.jsx("div",{className:"flex items-start justify-between mb-3",children:c.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:c.jsx(to,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-1",children:l?"...":e.approvedEnrollments}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Approved Enrollments"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5",children:[c.jsx("div",{className:"flex items-start justify-between mb-3",children:c.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:c.jsx(Bi,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})})}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-1",children:l?"...":e.pendingEnrollments}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Pending Requests"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg overflow-hidden",children:[c.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-800",children:c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"All Transactions"})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Date"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Member"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Email"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Amount"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Method"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Status"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:l?c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"py-8 text-center text-gray-500",children:"Loading..."})}):s.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"py-8 text-center text-gray-500",children:"No transactions found"})}):s.map(p=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/30",children:[c.jsx("td",{className:"py-3 px-5 text-sm text-gray-900 dark:text-white",children:p.createdAt instanceof Date?p.createdAt.toLocaleDateString():"N/A"}),c.jsx("td",{className:"py-3 px-5 text-sm font-medium text-gray-900 dark:text-white",children:p.userName}),c.jsx("td",{className:"py-3 px-5 text-sm text-gray-600 dark:text-gray-400",children:p.userEmail}),c.jsxs("td",{className:"py-3 px-5 text-sm font-semibold text-gray-900 dark:text-white",children:["",p.amount]}),c.jsx("td",{className:"py-3 px-5",children:c.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400 rounded text-xs font-medium uppercase",children:p.paymentMethod})}),c.jsx("td",{className:"py-3 px-5",children:c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize ${p.status==="approved"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":p.status==="pending"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:p.status})})]},p.id))})]})})]})]})}const Kx={pending:{bg:"bg-amber-100 dark:bg-amber-900/30",text:"text-amber-700 dark:text-amber-400"},reviewed:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-400"},resolved:{bg:"bg-emerald-100 dark:bg-emerald-900/30",text:"text-emerald-700 dark:text-emerald-400"},rejected:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-400"}},$u={Equipment:"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400",Cleanliness:"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-400",Staff:"bg-purple-50 text-purple-700 dark:bg-purple-900/20 dark:text-purple-400",Safety:"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-400",Other:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"};function Aj(){const{userData:r,user:e}=ir(),[t,s]=D.useState([]),[a,l]=D.useState(!0),[d,f]=D.useState(null),[p,g]=D.useState(""),[v,b]=D.useState(!1),k=async()=>{if(r?.gymId)try{l(!0);const N=tt(Xe(be,"gymReports"),Ne("gymId","==",r.gymId)),z=(await nt(N)).docs.map($=>({...$.data(),id:$.id,createdAt:Ge($.data().createdAt)||new Date,reviewedAt:Ge($.data().reviewedAt)}));z.sort(($,Q)=>Q.createdAt.getTime()-$.createdAt.getTime()),s(z)}catch(N){console.error("Error fetching gym reports:",N)}finally{l(!1)}};D.useEffect(()=>{k()},[r]);const P=async(N,O)=>{if(N.id){b(!0);try{if(O==="resolved"){if(!confirm("Are you sure you want to resolve and DELETE this report? This action cannot be undone.")){b(!1);return}await b_(ut(be,"gymReports",N.id))}else{const z={status:O,reviewedAt:Vr(),reviewedBy:e?.uid||null};p.trim()&&(z.adminNotes=p.trim()),await qt(ut(be,"gymReports",N.id),z)}await k(),f(null),g("")}catch(z){console.error("Error updating report:",z),alert("Failed to update report")}finally{b(!1)}}},L=t.filter(N=>N.status==="pending").length;return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(Ml,{className:"w-5 h-5"}),"Gym Issue Reports",L>0&&c.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded-full text-xs font-medium",children:[L," pending"]})]}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Reports submitted by members from the app"})]})}),a?c.jsx("div",{className:"flex justify-center py-12",children:c.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):t.length===0?c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-12 text-center",children:[c.jsx(Pd,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No reports submitted yet"})]}):c.jsx("div",{className:"space-y-4",children:t.map(N=>c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-3 mb-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N.userName}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:N.userEmail}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:N.createdAt instanceof Date?N.createdAt.toLocaleString():"N/A"})]}),c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize ${Kx[N.status]?.bg} ${Kx[N.status]?.text}`,children:N.status})]}),c.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:N.issueTypes.map(O=>c.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${$u[O]||$u.Other}`,children:O},O))}),c.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-800/50 rounded-lg p-3 mb-3",children:N.description}),N.adminNotes&&c.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-900/30 rounded-lg mb-3",children:[c.jsx(jm,{className:"w-4 h-4 text-blue-500 mt-0.5 shrink-0"}),c.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:N.adminNotes})]}),N.status==="pending"&&c.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100 dark:border-gray-800",children:[c.jsxs("button",{onClick:()=>{f(N),g("")},className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg text-xs font-medium transition-colors",children:[c.jsx(vv,{className:"w-3.5 h-3.5"})," Review"]}),c.jsxs("button",{onClick:()=>P(N,"resolved"),className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 rounded-lg text-xs font-medium transition-colors",children:[c.jsx(kn,{className:"w-3.5 h-3.5"})," Resolve"]}),c.jsxs("button",{onClick:()=>P(N,"rejected"),className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg text-xs font-medium transition-colors",children:[c.jsx(Sd,{className:"w-3.5 h-3.5"})," Reject"]})]}),N.status==="reviewed"&&c.jsx("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100 dark:border-gray-800",children:c.jsxs("button",{onClick:()=>P(N,"resolved"),className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 rounded-lg text-xs font-medium transition-colors",children:[c.jsx(kn,{className:"w-3.5 h-3.5"})," Mark Resolved"]})})]},N.id))}),d&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>f(null),children:c.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 w-full max-w-lg p-6",onClick:N=>N.stopPropagation(),children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Review Report"}),c.jsxs("div",{className:"space-y-3 mb-4",children:[c.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[c.jsx("strong",{children:"From:"})," ",d.userName," (",d.userEmail,")"]}),c.jsx("div",{className:"flex flex-wrap gap-1.5",children:d.issueTypes.map(N=>c.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${$u[N]||$u.Other}`,children:N},N))}),c.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-800/50 rounded-lg p-3",children:d.description})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Admin Notes (optional)"}),c.jsx("textarea",{value:p,onChange:N=>g(N.target.value),rows:3,placeholder:"Add notes about how this was handled...",className:"w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]}),c.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[c.jsx("button",{onClick:()=>f(null),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),c.jsx("button",{onClick:()=>P(d,"reviewed"),disabled:v,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:v?"Saving...":"Mark as Reviewed"}),c.jsx("button",{onClick:()=>P(d,"resolved"),disabled:v,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:v?"Saving...":"Resolve"})]})]})})]})}function Cj(){const{userData:r}=ir(),[e,t]=D.useState([]),[s,a]=D.useState(!0);D.useEffect(()=>{(async()=>{if(r?.gymId)try{a(!0);const f=tt(Xe(be,"gymReviews"),Ne("gymId","==",r.gymId)),g=(await nt(f)).docs.map(v=>({id:v.id,...v.data(),createdAt:Ge(v.data().createdAt)||new Date}));g.sort((v,b)=>b.createdAt.getTime()-v.createdAt.getTime()),t(g)}catch(f){console.error("Error fetching reviews:",f)}finally{a(!1)}})()},[r]);const l=d=>Array.from({length:5}).map((f,p)=>c.jsx(s0,{className:`w-4 h-4 ${p<d?"text-amber-400 fill-amber-400":"text-gray-300 dark:text-gray-600"}`},p));return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(jm,{className:"w-5 h-5"}),"Gym Reviews"]}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"See what your members are saying about your gym"})]}),s?c.jsx("div",{className:"flex justify-center py-12",children:c.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):e.length===0?c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-12 text-center",children:[c.jsx(s0,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No reviews yet"})]}):c.jsx("div",{className:"grid gap-4",children:e.map(d=>c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5 transition-shadow hover:shadow-md",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4 mb-3",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center flex-shrink-0",children:d.userImage?c.jsx("img",{src:d.userImage,alt:d.userName,className:"w-full h-full rounded-full object-cover"}):c.jsx(ST,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:d.userName||"Anonymous"}),c.jsx("div",{className:"flex items-center gap-1 mt-1",children:l(d.rating)})]})]}),c.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 px-2 py-1 rounded",children:[c.jsx(yv,{className:"w-3.5 h-3.5"}),d.createdAt.toLocaleDateString()]})]}),c.jsxs("div",{className:"mt-3 pl-13 sm:pl-13 ml-0 sm:ml-13 space-y-2",children:[d.comment&&c.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed bg-gray-50 dark:bg-gray-800/50 p-3 rounded-lg",children:d.comment}),c.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-500 dark:text-gray-400",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(Ad,{className:"w-3.5 h-3.5"}),d.userEmail]}),d.userPhone&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(Dm,{className:"w-3.5 h-3.5"}),d.userPhone]})]})]})]},d.id))})]})}const jr="w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",Rj=["Cardio Area","Weight Training","CrossFit","Yoga Studio","Steam Room","Sauna","Swimming Pool","Personal Training","Locker Room","Shower","Parking","AC","WiFi","Juice Bar","Group Classes"];function Pj(){const{userGym:r,refreshUserData:e}=ir(),[t,s]=D.useState(!1),[a,l]=D.useState(!1),[d,f]=D.useState(""),[p,g]=D.useState({name:"",phone:"",email:"",address:"",monthlyFee:0,upiId:"",description:"",quarterlyFee:0,annualFee:0,openingHours:"",capacity:0,amenities:[]});D.useEffect(()=>{r&&g({name:r.name||"",phone:r.phone||"",email:r.email||"",address:r.address||"",monthlyFee:r.monthlyFee||0,upiId:r.upiId||"",description:r.description||"",quarterlyFee:r.quarterlyFee||0,annualFee:r.annualFee||0,openingHours:r.openingHours||"",capacity:r.capacity||0,amenities:r.amenities||[]})},[r]);const v=async()=>{if(r?.id)try{s(!0),l(!1);const L={name:p.name,phone:p.phone,email:p.email,address:p.address,monthlyFee:Number(p.monthlyFee),upiId:p.upiId,description:p.description,openingHours:p.openingHours,capacity:Number(p.capacity)||0,amenities:p.amenities};Number(p.quarterlyFee)>0&&(L.quarterlyFee=Number(p.quarterlyFee)),Number(p.annualFee)>0&&(L.annualFee=Number(p.annualFee)),await qt(ut(be,"gyms",r.id),L),await e(),l(!0),setTimeout(()=>l(!1),3e3)}catch(L){console.error("Error saving settings:",L),alert("Failed to save settings")}finally{s(!1)}},b=L=>{const N=L.trim();N&&!p.amenities.includes(N)&&g({...p,amenities:[...p.amenities,N]}),f("")},k=L=>{g({...p,amenities:p.amenities.filter(N=>N!==L)})};if(!r)return c.jsx("div",{className:"space-y-6",children:c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Settings"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Loading gym information..."})]})});const P=Rj.filter(L=>!p.amenities.includes(L));return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Settings"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Manage your gym configuration"})]}),a&&c.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 dark:text-emerald-400 text-sm font-medium animate-pulse",children:[c.jsx(kn,{className:"w-4 h-4"}),"Saved!"]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-6",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Basic Information"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(Ll,{className:"w-4 h-4"}),"Gym Name"]}),c.jsx("input",{type:"text",value:p.name,onChange:L=>g({...p,name:L.target.value}),className:jr})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(G1,{className:"w-4 h-4"}),"Description"]}),c.jsx("textarea",{value:p.description,onChange:L=>g({...p,description:L.target.value}),rows:3,placeholder:"Describe your gym  this is shown to users on the app...",className:`${jr} resize-none`})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(Dm,{className:"w-4 h-4"}),"Phone"]}),c.jsx("input",{type:"tel",value:p.phone,onChange:L=>g({...p,phone:L.target.value}),className:jr})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(Ad,{className:"w-4 h-4"}),"Email"]}),c.jsx("input",{type:"email",value:p.email,onChange:L=>g({...p,email:L.target.value}),className:jr})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(lT,{className:"w-4 h-4"}),"Address"]}),c.jsx("input",{type:"text",value:p.address,onChange:L=>g({...p,address:L.target.value}),className:jr})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(Xl,{className:"w-4 h-4"}),"Opening Hours"]}),c.jsx("input",{type:"text",value:p.openingHours,onChange:L=>g({...p,openingHours:L.target.value}),placeholder:"e.g., 6:00 AM - 10:00 PM",className:jr})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(Bi,{className:"w-4 h-4"}),"Max Capacity"]}),c.jsx("input",{type:"number",value:p.capacity||"",onChange:L=>g({...p,capacity:parseInt(L.target.value)||0}),placeholder:"e.g., 50",min:"0",className:jr}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Used for crowd status in the user app"})]})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-6",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Pricing"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(Df,{className:"w-4 h-4"}),"Monthly Fee ()"]}),c.jsx("input",{type:"number",value:p.monthlyFee,onChange:L=>g({...p,monthlyFee:parseFloat(L.target.value)||0}),min:"0",className:jr})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(Df,{className:"w-4 h-4"}),"Quarterly Fee ()"]}),c.jsx("input",{type:"number",value:p.quarterlyFee||"",onChange:L=>g({...p,quarterlyFee:parseFloat(L.target.value)||0}),placeholder:`Suggested: ${Math.round(p.monthlyFee*2.7)}`,min:"0",className:jr}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:'For 3-month "Quarterly" plan'})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(Df,{className:"w-4 h-4"}),"6-Month Fee ()"]}),c.jsx("input",{type:"number",value:p.annualFee||"",onChange:L=>g({...p,annualFee:parseFloat(L.target.value)||0}),placeholder:`Suggested: ${Math.round(p.monthlyFee*5)}`,min:"0",className:jr}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"For 6-month plan"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(to,{className:"w-4 h-4"}),"UPI ID"]}),c.jsx("input",{type:"text",value:p.upiId,onChange:L=>g({...p,upiId:L.target.value}),placeholder:"e.g., gymname@upi",className:jr})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-6",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Amenities"}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mb-4",children:"These are shown to users when they view your gym details"}),p.amenities.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:p.amenities.map(L=>c.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 rounded-full text-xs font-medium",children:[L,c.jsx("button",{onClick:()=>k(L),className:"hover:text-red-600 dark:hover:text-red-400 transition-colors",children:c.jsx(Iv,{className:"w-3 h-3"})})]},L))}),c.jsxs("div",{className:"flex gap-2 mb-4",children:[c.jsx("input",{type:"text",value:d,onChange:L=>f(L.target.value),onKeyDown:L=>{L.key==="Enter"&&(L.preventDefault(),b(d))},placeholder:"Type a custom amenity...",className:`flex-1 ${jr}`}),c.jsx("button",{onClick:()=>b(d),disabled:!d.trim(),className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:c.jsx(Lm,{className:"w-4 h-4"})})]}),P.length>0&&c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mb-2",children:"Quick add:"}),c.jsx("div",{className:"flex flex-wrap gap-1.5",children:P.map(L=>c.jsxs("button",{onClick:()=>b(L),className:"px-2.5 py-1 border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-full text-xs transition-colors",children:["+ ",L]},L))})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{onClick:v,disabled:t,className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium text-sm transition-colors disabled:opacity-50",children:t?"Saving...":"Save All Changes"})}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-6",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Gym Statistics"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Gym ID"}),c.jsx("p",{className:"text-sm font-mono text-gray-900 dark:text-white break-all",children:r.id})]}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Created"}),c.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:r.createdAt instanceof Date?r.createdAt.toLocaleDateString():"N/A"})]}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Status"}),c.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${r.isActive?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:r.isActive?"Active":"Inactive"})]})]})]})]})}function jj({darkMode:r,setDarkMode:e}){console.log("LoginPage Rendered. darkMode:",r,"hasSetDarkMode:",!!e);const t=Xi(),[s,a]=D.useState(""),[l,d]=D.useState(""),[f,p]=D.useState(""),[g,v]=D.useState(!1),b=async k=>{k.preventDefault(),p(""),v(!0);try{const P=await GC(eo,s,l),L=await gd(ut(be,"users",P.user.uid));if(L.exists()){const N=L.data();N.role==="superAdmin"?t("/super-admin"):N.role==="gymAdmin"?t("/dashboard"):(p("Access denied. Admin only."),await eo.signOut())}else p("User not found."),await eo.signOut()}catch(P){const L=P;L.code==="auth/user-not-found"?p("No account found with this email."):L.code==="auth/wrong-password"?p("Incorrect password."):L.code==="auth/invalid-credential"?p("Invalid email or password."):p(L.message||"Login failed")}finally{v(!1)}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative",children:[e&&c.jsx("button",{onClick:()=>e&&e(!r),className:"absolute top-4 right-4 p-3 rounded-full bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800 backdrop-blur-sm border border-white/20 dark:border-white/10 shadow-lg text-gray-800 dark:text-gray-200 transition-all z-20 group",title:r?"Switch to Light Mode":"Switch to Dark Mode",children:r?c.jsx(Rd,{className:"w-5 h-5 group-hover:rotate-45 transition-transform"}):c.jsx(Cd,{className:"w-5 h-5 group-hover:-rotate-12 transition-transform"})}),c.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none -z-10",children:[c.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-primary-500/20 rounded-full blur-3xl opacity-50 mix-blend-multiply animate-blob"}),c.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl opacity-50 mix-blend-multiply animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-8 left-1/2 w-96 h-96 bg-pink-500/20 rounded-full blur-3xl opacity-50 mix-blend-multiply animate-blob animation-delay-4000"})]}),c.jsxs("div",{className:"w-full max-w-md glass-panel p-8 rounded-2xl relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary-500 to-transparent opacity-50"}),c.jsxs("div",{className:"text-center mb-8 relative",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-primary-500 to-indigo-600 rounded-2xl mb-4 shadow-lg shadow-primary-500/30 transform rotate-3",children:c.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2 tracking-tight",children:"FITCORE"}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Administration Portal"})]}),c.jsxs("form",{onSubmit:b,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:c.jsx(Ad,{className:"h-5 w-5 text-gray-400 group-focus-within:text-primary-500 transition-colors"})}),c.jsx("input",{type:"email",value:s,onChange:k=>a(k.target.value),className:"input-modern !pl-11",placeholder:"admin@fitcore.com",required:!0})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:c.jsx(sT,{className:"h-5 w-5 text-gray-400 group-focus-within:text-primary-500 transition-colors"})}),c.jsx("input",{type:"password",value:l,onChange:k=>d(k.target.value),className:"input-modern !pl-11",placeholder:"",required:!0})]})]}),f&&c.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 p-3 rounded-lg text-sm border border-red-100 dark:border-red-900/30 animate-shake",children:[c.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),f]}),c.jsx("button",{type:"submit",disabled:g,className:"btn-primary flex items-center justify-center gap-2 group",children:g?c.jsxs(c.Fragment,{children:[c.jsx(rT,{className:"w-5 h-5 animate-spin"}),c.jsx("span",{children:"Authenticating..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"Sign In"}),c.jsx(N1,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]}),c.jsx("div",{className:"mt-8 text-center",children:c.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Protected by secure encryption. ",c.jsx("br",{}),"Unauthorized access is prohibited."]})})]})]})}const Qx=r=>r?r instanceof Date?r:typeof r=="object"&&r!==null&&"toDate"in r?r.toDate():typeof r=="object"&&r!==null&&"seconds"in r?new Date(r.seconds*1e3):new Date(r):new Date;function Dj(){const r=Xi(),{user:e,userData:t,loading:s,logout:a}=ir(),[l,d]=D.useState([]),[f,p]=D.useState(!0),[g,v]=D.useState(null),b=nb(),[k,P]=D.useState([]),[L,N]=D.useState(!0),[O,z]=D.useState(null),$=3;D.useEffect(()=>{s||(e?t?.role!=="superAdmin"?r("/"):(Q(),fe()):r("/"))},[e,t,s,r]);const Q=async()=>{try{const S=tt(Xe(be,"gyms"),Qi("createdAt","desc")),A=(await nt(S)).docs.map(ie=>({id:ie.id,name:ie.data().name,address:ie.data().address,phone:ie.data().phone,email:ie.data().email,upiId:ie.data().upiId,monthlyFee:ie.data().monthlyFee,createdAt:ie.data().createdAt?.toDate()||new Date,adminId:ie.data().adminId,isActive:ie.data().isActive??!0}));d(A)}catch(S){console.error("Error fetching gyms:",S)}finally{p(!1)}},fe=async()=>{try{N(!0);const M=(await nt(Xe(be,"gymReports"))).docs.map(we=>{const Ce=we.data();return{id:we.id,gymId:Ce.gymId||"",gymName:Ce.gymName||"",userId:Ce.userId||"",userName:Ce.userName||"",userEmail:Ce.userEmail||"",issueTypes:Ce.issueTypes||[],description:Ce.description||"",status:Ce.status||"pending",createdAt:Qx(Ce.createdAt),reviewedAt:Ce.reviewedAt?Qx(Ce.reviewedAt):null,reviewedBy:Ce.reviewedBy||null,adminNotes:Ce.adminNotes||void 0}}),A=new Map;M.forEach(we=>{we.status==="resolved"||we.status==="rejected"||(A.has(we.gymId)||A.set(we.gymId,[]),A.get(we.gymId).push(we))});const ie=[];A.forEach((we,Ce)=>{if(we.length>=$){const Me={};we.forEach(K=>{K.issueTypes.forEach(de=>{Me[de]=(Me[de]||0)+1})}),we.sort((K,de)=>de.createdAt.getTime()-K.createdAt.getTime()),ie.push({gymId:Ce,gymName:we[0].gymName||"Unknown Gym",totalReports:we.length,pendingReports:we.filter(K=>K.status==="pending").length,issueBreakdown:Me,reports:we})}}),ie.sort((we,Ce)=>Ce.totalReports-we.totalReports),P(ie)}catch(S){console.error("Error fetching flagged gyms:",S)}finally{N(!1)}},oe=async S=>{if(!S.email){alert("No email found for this gym admin");return}if(confirm(`Send password reset email to ${S.email}?`)){v(S.id);try{await HC(b,S.email),alert(`Password reset email sent to ${S.email}`)}catch(M){console.error("Error sending password reset:",M),alert("Failed to send password reset email")}finally{v(null)}}},Y=async S=>{const M=S.isActive?"deactivate":"activate";if(confirm(`Are you sure you want to ${M} ${S.name}?`)){v(S.id);try{await qt(ut(be,"gyms",S.id),{isActive:!S.isActive}),await Q(),alert(`Gym ${M}d successfully`)}catch(A){console.error(`Error ${M}ing gym:`,A),alert(`Failed to ${M} gym`)}finally{v(null)}}},I=async S=>{if(confirm(` WARNING: Delete ${S.name}? This action cannot be undone!`)&&confirm(`Type the gym name to confirm deletion: "${S.name}"`)){v(S.id);try{await qt(ut(be,"gyms",S.id),{isActive:!1}),await Q(),alert("Gym deactivated (deletion requires additional cleanup)")}catch(M){console.error("Error deleting gym:",M),alert("Failed to delete gym")}finally{v(null)}}},E=async()=>{await a(),r("/")},R={totalGyms:l.length,activeGyms:l.filter(S=>S.isActive).length,inactiveGyms:l.filter(S=>!S.isActive).length,totalRevenue:l.reduce((S,M)=>S+M.monthlyFee,0)},C={Equipment:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",Cleanliness:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",Staff:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",Safety:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",Other:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"};return s||f?c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 flex items-center justify-center",children:c.jsx("div",{className:"w-10 h-10 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:[c.jsx("header",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center",children:c.jsx(Ll,{className:"w-6 h-6 text-white"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"FITCORE"}),c.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Super Admin"})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("button",{onClick:()=>r("/super-admin/create-gym"),className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium text-sm transition-colors",children:[c.jsx(Lm,{className:"w-4 h-4"}),"Create Gym"]}),c.jsxs("div",{className:"text-right hidden sm:block",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t?.displayName}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:t?.email})]}),c.jsx("button",{onClick:E,className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:c.jsx(_v,{className:"w-5 h-5"})})]})]})})}),c.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[c.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-between bg-purple-50 dark:bg-purple-900/10 border-2 border-purple-200 dark:border-purple-800 rounded-lg p-4 gap-4",children:c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Gym Management"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Create and manage all gyms in the system"})]})}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5",children:[c.jsx("div",{className:"flex items-start justify-between mb-3",children:c.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:c.jsx(Ll,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})})}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:R.totalGyms}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Gyms"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5",children:[c.jsx("div",{className:"flex items-start justify-between mb-3",children:c.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg",children:c.jsx(kn,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})})}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:R.activeGyms}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Gyms"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5",children:[c.jsx("div",{className:"flex items-start justify-between mb-3",children:c.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:c.jsx(n0,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:R.inactiveGyms}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Inactive Gyms"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-5",children:[c.jsx("div",{className:"flex items-start justify-between mb-3",children:c.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:c.jsx(to,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})}),c.jsxs("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:["",R.totalRevenue]}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Monthly Fees"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border-2 border-red-200 dark:border-red-900/50 rounded-lg overflow-hidden",children:[c.jsxs("div",{className:"p-5 border-b border-red-200 dark:border-red-900/50 bg-red-50 dark:bg-red-900/10 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:c.jsx(Pd,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["Flagged Gyms  Repeated Reports (",$,"+ reports)"]}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:["Gyms with ",$," or more member reports that need your attention"]})]})]}),k.length>0&&c.jsxs("span",{className:"px-3 py-1 bg-red-600 text-white rounded-full text-xs font-bold",children:[k.length," flagged"]})]}),L?c.jsx("div",{className:"p-8 flex justify-center",children:c.jsx("div",{className:"w-6 h-6 border-4 border-red-500 border-t-transparent rounded-full animate-spin"})}):k.length===0?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx(kn,{className:"w-10 h-10 text-emerald-400 mx-auto mb-2"}),c.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["All clear! No gyms have ",$,"+ reports."]})]}):c.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:k.map(S=>c.jsxs("div",{className:"transition-colors",children:[c.jsxs("button",{onClick:()=>z(O===S.gymId?null:S.gymId),className:"w-full flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-gray-800/30 text-left",children:[c.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[c.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg shrink-0",children:c.jsx(Ml,{className:"w-4 h-4 text-red-600 dark:text-red-400"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:S.gymName}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[c.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded text-xs font-bold",children:[S.totalReports," reports"]}),S.pendingReports>0&&c.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded text-xs font-medium",children:[S.pendingReports," pending"]})]})]})]}),c.jsx("div",{className:"hidden md:flex items-center gap-1.5 mx-4 shrink-0",children:Object.entries(S.issueBreakdown).sort((M,A)=>A[1]-M[1]).slice(0,4).map(([M,A])=>c.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${C[M]||C.Other}`,children:[M,": ",A]},M))}),O===S.gymId?c.jsx(M1,{className:"w-4 h-4 text-gray-400 shrink-0"}):c.jsx(D1,{className:"w-4 h-4 text-gray-400 shrink-0"})]}),O===S.gymId&&c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/20 border-t border-gray-200 dark:border-gray-800",children:[c.jsx("div",{className:"px-5 pt-4 pb-2 flex flex-wrap gap-2",children:Object.entries(S.issueBreakdown).sort((M,A)=>A[1]-M[1]).map(([M,A])=>c.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium ${C[M]||C.Other}`,children:[c.jsx("span",{children:M}),c.jsxs("span",{className:"opacity-70",children:["",A]})]},M))}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left py-2 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Date"}),c.jsx("th",{className:"text-left py-2 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Member"}),c.jsx("th",{className:"text-left py-2 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Issues"}),c.jsx("th",{className:"text-left py-2 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Description"}),c.jsx("th",{className:"text-left py-2 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Status"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:S.reports.map(M=>c.jsxs("tr",{className:"hover:bg-white dark:hover:bg-gray-800/40",children:[c.jsx("td",{className:"py-2.5 px-5 text-xs text-gray-600 dark:text-gray-400 whitespace-nowrap",children:M.createdAt.toLocaleDateString()}),c.jsxs("td",{className:"py-2.5 px-5",children:[c.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white",children:M.userName||"Unknown"}),c.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[150px]",children:M.userEmail})]}),c.jsx("td",{className:"py-2.5 px-5",children:c.jsx("div",{className:"flex flex-wrap gap-1",children:M.issueTypes.map(A=>c.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${C[A]||C.Other}`,children:A},A))})}),c.jsx("td",{className:"py-2.5 px-5 text-xs text-gray-600 dark:text-gray-400 max-w-[250px] truncate",children:M.description}),c.jsx("td",{className:"py-2.5 px-5",children:c.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium capitalize ${M.status==="pending"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":M.status==="resolved"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":M.status==="reviewed"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:M.status})})]},M.id))})]})})]})]},S.gymId))})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg overflow-hidden",children:[c.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-800",children:c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"All Gyms"})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Gym Name"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Contact"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Monthly Fee"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Status"}),c.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Created"}),c.jsx("th",{className:"text-right py-3 px-5 text-xs font-medium text-gray-600 dark:text-gray-400",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:l.length===0?c.jsx("tr",{children:c.jsxs("td",{colSpan:6,className:"py-8 text-center text-gray-500",children:[c.jsx(Bi,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),c.jsx("p",{children:"No gyms found"})]})}):l.map(S=>{const M=k.find(A=>A.gymId===S.id);return c.jsxs("tr",{className:`hover:bg-gray-50 dark:hover:bg-gray-800/30 ${M?"bg-red-50/50 dark:bg-red-900/5":""}`,children:[c.jsx("td",{className:"py-3 px-5",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:S.name}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:S.address})]}),M&&c.jsxs("span",{className:"px-1.5 py-0.5 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded text-xs font-bold shrink-0",title:`${M.totalReports} member reports`,children:[" ",M.totalReports]})]})}),c.jsxs("td",{className:"py-3 px-5",children:[c.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:S.email}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:S.phone})]}),c.jsxs("td",{className:"py-3 px-5 text-sm font-semibold text-gray-900 dark:text-white",children:["",S.monthlyFee]}),c.jsx("td",{className:"py-3 px-5",children:c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${S.isActive?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:S.isActive?"Active":"Inactive"})}),c.jsx("td",{className:"py-3 px-5 text-sm text-gray-600 dark:text-gray-400",children:S.createdAt instanceof Date?S.createdAt.toLocaleDateString():"N/A"}),c.jsx("td",{className:"py-3 px-5",children:c.jsxs("div",{className:"flex items-center justify-end gap-2",children:[c.jsx("button",{onClick:()=>oe(S),disabled:g===S.id,className:"p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded transition-colors disabled:opacity-50",title:"Reset Admin Password",children:c.jsx(X1,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>Y(S),disabled:g===S.id,className:`p-1.5 rounded transition-colors disabled:opacity-50 ${S.isActive?"text-orange-600 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/30":"text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30"}`,title:S.isActive?"Deactivate Gym":"Activate Gym",children:S.isActive?c.jsx(n0,{className:"w-4 h-4"}):c.jsx(kn,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>I(S),disabled:g===S.id,className:"p-1.5 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors disabled:opacity-50",title:"Delete Gym",children:c.jsx(Ev,{className:"w-4 h-4"})})]})})]},S.id)})})]})})]})]})]})}function Lj(){const r=Xi(),{userData:e,loading:t}=ir(),[s,a]=D.useState(!1),[l,d]=D.useState(""),[f,p]=D.useState(""),[g,v]=D.useState({name:"",address:"",phone:"",email:"",upiId:"",monthlyFee:"",adminName:"",adminEmail:"",adminPassword:""});if(!t&&e?.role!=="superAdmin")return r("/"),null;const b=P=>{v({...g,[P.target.name]:P.target.value})},k=async P=>{P.preventDefault(),a(!0),d(""),p("");try{const L=await WC(eo,g.adminEmail,g.adminPassword),N=await $2(Xe(be,"gyms"),{name:g.name,address:g.address,phone:g.phone,email:g.email,upiId:g.upiId,monthlyFee:parseFloat(g.monthlyFee),adminId:L.user.uid,isActive:!0,createdAt:Vr()});await z2(ut(be,"users",L.user.uid),{uid:L.user.uid,displayName:g.adminName,email:g.adminEmail,role:"gymAdmin",gymId:N.id,enrollmentStatus:"none",paymentMethod:null,transactionId:null,enrolledAt:null,createdAt:Vr()}),p(`Gym "${g.name}" created successfully!

Admin Credentials:
Email: ${g.adminEmail}
Password: ${g.adminPassword}

Please save these credentials securely.`),v({name:"",address:"",phone:"",email:"",upiId:"",monthlyFee:"",adminName:"",adminEmail:"",adminPassword:""})}catch(L){const N=L;N.code==="auth/email-already-in-use"?d("Admin email is already in use. Please use a different email."):N.code==="auth/weak-password"?d("Password is too weak. Use at least 6 characters."):d(N.message||"Failed to create gym. Please try again.")}finally{a(!1)}};return t?c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 flex items-center justify-center",children:c.jsx("div",{className:"w-10 h-10 border-4 border-purple-600 border-t-transparent rounded-full animate-spin"})}):c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:[c.jsx("header",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 sticky top-0 z-10",children:c.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>r("/super-admin"),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:c.jsx(nd,{className:"w-5 h-5"})}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center",children:c.jsx(Ll,{className:"w-6 h-6 text-white"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Create New Gym"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add a new gym and admin account"})]})]})]})})}),c.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[f&&c.jsxs("div",{className:"mb-6 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg p-4",children:[c.jsx("h3",{className:"text-emerald-800 dark:text-emerald-400 font-semibold mb-2",children:" Gym Created Successfully!"}),c.jsx("pre",{className:"text-sm text-emerald-700 dark:text-emerald-300 whitespace-pre-wrap",children:f}),c.jsxs("div",{className:"mt-4 flex gap-3",children:[c.jsx("button",{onClick:()=>r("/super-admin"),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium text-sm transition-colors",children:"Back to Dashboard"}),c.jsx("button",{onClick:()=>p(""),className:"px-4 py-2 border border-emerald-300 dark:border-emerald-700 text-emerald-700 dark:text-emerald-400 rounded-lg font-medium text-sm transition-colors hover:bg-emerald-100 dark:hover:bg-emerald-900/30",children:"Create Another"})]})]}),l&&c.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:c.jsx("p",{className:"text-red-600 dark:text-red-400",children:l})}),!f&&c.jsxs("form",{onSubmit:k,className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-6",children:[c.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[c.jsx(Ll,{className:"w-5 h-5 text-purple-600"}),"Gym Information"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Gym Name *"}),c.jsx("input",{type:"text",name:"name",value:g.name,onChange:b,placeholder:"e.g., FitCore Downtown",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Address *"}),c.jsx("input",{type:"text",name:"address",value:g.address,onChange:b,placeholder:"e.g., 123 Main Street, City Center",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number *"}),c.jsx("input",{type:"tel",name:"phone",value:g.phone,onChange:b,placeholder:"e.g., +91 9876543210",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Gym Email *"}),c.jsx("input",{type:"email",name:"email",value:g.email,onChange:b,placeholder:"e.g., contact@gym.com",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"UPI ID *"}),c.jsx("input",{type:"text",name:"upiId",value:g.upiId,onChange:b,placeholder:"e.g., gym@upi",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Monthly Fee () *"}),c.jsx("input",{type:"number",name:"monthlyFee",value:g.monthlyFee,onChange:b,placeholder:"e.g., 1500",min:"0",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:" Gym Admin Account"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"This account will be used by the gym administrator to manage members and payments."}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Name *"}),c.jsx("input",{type:"text",name:"adminName",value:g.adminName,onChange:b,placeholder:"e.g., John Smith",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Email *"}),c.jsx("input",{type:"email",name:"adminEmail",value:g.adminEmail,onChange:b,placeholder:"e.g., admin@gym.com",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Password *"}),c.jsx("input",{type:"password",name:"adminPassword",value:g.adminPassword,onChange:b,placeholder:"Min 6 characters",minLength:6,className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]})]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[c.jsx("button",{type:"button",onClick:()=>r("/super-admin"),className:"w-full sm:w-auto px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:s,className:"w-full sm:w-auto px-10 py-4 bg-red-600 hover:bg-red-700 text-white rounded-lg font-bold text-lg shadow-xl hover:shadow-2xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Creating Gym...":" Create Gym & Admin Account"})]})]})]})]})}function _n({children:r}){const{user:e,loading:t}=ir();return t?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-950",children:c.jsx("div",{className:"w-10 h-10 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e?c.jsx(c.Fragment,{children:r}):c.jsx(uv,{to:"/",replace:!0})}function Bs({children:r,darkMode:e,setDarkMode:t}){const[s,a]=D.useState(!1),{userData:l,logout:d}=ir(),f=as(),p=Xi(),g=[{id:"dashboard",name:"Dashboard",icon:eT,path:"/dashboard"},{id:"members",name:"Members",icon:Bi,path:"/members"},{id:"payments",name:"Payments",icon:Hu,path:"/payments"},{id:"attendance",name:"Attendance",icon:Tv,path:"/attendance"},{id:"reports",name:"Reports",icon:P1,path:"/reports"},{id:"gym-reports",name:"Issue Reports",icon:Ml,path:"/gym-reports"},{id:"reviews",name:"Reviews",icon:jm,path:"/reviews"},{id:"settings",name:"Settings",icon:xT,path:"/settings"}];return c.jsxs("div",{className:"min-h-screen transition-colors font-body",children:[c.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none -z-10 hidden dark:block",children:[c.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-primary-500/10 rounded-full blur-[100px] opacity-50 mix-blend-multiply"}),c.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-blue-500/10 rounded-full blur-[100px] opacity-50 mix-blend-multiply"})]}),s&&c.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm z-40 lg:hidden",onClick:()=>a(!1)}),c.jsxs("aside",{className:`fixed top-0 left-0 z-50 h-full w-72 glass-panel border-r-0 transform transition-transform duration-300 lg:translate-x-0 ${s?"translate-x-0":"-translate-x-full"} shadow-2xl lg:shadow-none bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl lg:bg-transparent lg:backdrop-filter-none`,children:[c.jsxs("div",{className:"flex items-center gap-3 h-20 px-8 border-b border-gray-200/50 dark:border-gray-800/50",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-600 to-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-primary-500/20",children:c.jsx("span",{className:"text-white font-bold text-lg",children:"F"})}),c.jsx("h1",{className:"font-bold text-xl tracking-tight text-gray-900 dark:text-white",children:"FITCORE"}),c.jsx("button",{onClick:()=>a(!1),className:"lg:hidden ml-auto text-gray-500",children:c.jsx(Iv,{className:"w-6 h-6"})})]}),c.jsx("nav",{className:"p-4 space-y-2 mt-4",children:g.map(v=>{const b=v.icon,k=f.pathname===v.path;return c.jsxs("button",{onClick:()=>{p(v.path),a(!1)},className:`w-full flex items-center gap-4 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 group ${k?"bg-gradient-to-r from-primary-500/10 to-blue-500/10 text-primary-700 dark:text-primary-400 shadow-sm border border-primary-100 dark:border-primary-900/30":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800/50 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[c.jsx(b,{className:`w-5 h-5 transition-colors ${k?"text-primary-600 dark:text-primary-400":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"}`}),v.name]},v.id)})}),c.jsx("div",{className:"absolute bottom-0 w-full p-4 border-t border-gray-200/50 dark:border-gray-800/50",children:c.jsxs("button",{onClick:d,className:"flex items-center gap-3 px-4 py-3 w-full text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors font-medium text-sm",children:[c.jsx(_v,{className:"w-5 h-5"}),c.jsx("span",{children:"Sign Out"})]})})]}),c.jsxs("div",{className:"lg:pl-72 transition-all duration-300",children:[c.jsxs("header",{className:"sticky top-0 z-30 h-20 flex items-center justify-between px-6 lg:px-8 glass-panel border-b-0 shadow-sm bg-white/80 dark:bg-gray-900/80 backdrop-blur-md m-4 rounded-xl lg:m-0 lg:rounded-none lg:bg-transparent lg:shadow-none lg:backdrop-filter-none",children:[c.jsxs("div",{className:"flex items-center gap-3 lg:hidden",children:[c.jsx("button",{onClick:()=>a(!0),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:c.jsx(uT,{className:"w-6 h-6"})}),c.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white capitalize",children:g.find(v=>v.path===f.pathname)?.name||"Dashboard"})]}),c.jsxs("div",{className:"hidden lg:block",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize tracking-tight",children:g.find(v=>v.path===f.pathname)?.name||"Dashboard"}),c.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Welcome back, ",l?.displayName?.split(" ")[0]||"Admin"]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>t(!e),className:"p-2.5 text-gray-500 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 hover:border-primary-100 dark:hover:border-primary-900 rounded-full transition-all shadow-sm hover:shadow",children:e?c.jsx(Rd,{className:"w-5 h-5"}):c.jsx(Cd,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center gap-3 pl-4 border-l border-gray-200 dark:border-gray-800",children:c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-indigo-600 rounded-full flex items-center justify-center ring-2 ring-white dark:ring-gray-900 shadow-md",children:c.jsx("span",{className:"text-white text-sm font-bold",children:l?.displayName?.[0]||"U"})})})]})]}),c.jsx("main",{className:"p-4 lg:p-8 pt-0",children:c.jsx("div",{className:"max-w-7xl mx-auto",children:r})})]})]})}function Mj(){const[r,e]=D.useState(()=>{if(typeof window<"u"){const s=localStorage.getItem("darkMode");return s!==null?JSON.parse(s):window.matchMedia("(prefers-color-scheme: dark)").matches}return!1});D.useEffect(()=>{localStorage.setItem("darkMode",JSON.stringify(r)),r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[r]);const{loading:t}=ir();return t?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-950",children:c.jsx("div",{className:"w-10 h-10 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:r?"dark":"",children:c.jsxs(FE,{children:[c.jsx(br,{path:"/",element:c.jsx(jj,{darkMode:r,setDarkMode:e})}),c.jsx(br,{path:"/dashboard",element:c.jsx(_n,{children:c.jsx(Bs,{darkMode:r,setDarkMode:e,children:c.jsx(fP,{darkMode:r})})})}),c.jsx(br,{path:"/members",element:c.jsx(_n,{children:c.jsx(Bs,{darkMode:r,setDarkMode:e,children:c.jsx(Tj,{})})})}),c.jsx(br,{path:"/payments",element:c.jsx(_n,{children:c.jsx(Bs,{darkMode:r,setDarkMode:e,children:c.jsx(Ij,{})})})}),c.jsx(br,{path:"/attendance",element:c.jsx(_n,{children:c.jsx(Bs,{darkMode:r,setDarkMode:e,children:c.jsx(Nj,{darkMode:r})})})}),c.jsx(br,{path:"/reports",element:c.jsx(_n,{children:c.jsx(Bs,{darkMode:r,setDarkMode:e,children:c.jsx(Sj,{})})})}),c.jsx(br,{path:"/gym-reports",element:c.jsx(_n,{children:c.jsx(Bs,{darkMode:r,setDarkMode:e,children:c.jsx(Aj,{})})})}),c.jsx(br,{path:"/reviews",element:c.jsx(_n,{children:c.jsx(Bs,{darkMode:r,setDarkMode:e,children:c.jsx(Cj,{})})})}),c.jsx(br,{path:"/settings",element:c.jsx(_n,{children:c.jsx(Bs,{darkMode:r,setDarkMode:e,children:c.jsx(Pj,{})})})}),c.jsx(br,{path:"/super-admin",element:c.jsx(_n,{children:c.jsx(Dj,{})})}),c.jsx(br,{path:"/super-admin/create-gym",element:c.jsx(_n,{children:c.jsx(Lj,{})})}),c.jsx(br,{path:"*",element:c.jsx(uv,{to:"/dashboard",replace:!0})})]})})}Uk.createRoot(document.getElementById("root")).render(c.jsx(c1,{children:c.jsx(hP,{children:c.jsx(Mj,{})})}));
